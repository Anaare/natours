{"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar express = require('express');\nvar morgan = require('morgan');\nvar rateLimit = require('express-rate-limit');\nvar helmet = require('helmet');\nvar mongoSanitize = require('express-mongo-sanitize');\nvar xss = require('xss-clean');\nvar hpp = require('hpp');\nvar cookieParser = require('cookie-parser');\nvar cors = require('cors');\nvar appError = require('./utils/appError');\nvar globalErrorHandler = require('./controllers/errorController');\nvar tourRouter = require('./routes/tourRoutes');\nvar userRouter = require('./routes/userRoutes');\nvar reviewRouter = require('./routes/reviewRoutes');\nvar app = express();\n\n// 1) GLOBAL MIDDLEWARES\n\n// app.use is a METHOD used to MOUNT middleware functions!!!\n\n// Set security HTTP headers\napp.use(helmet());\n\n// Cookie parser\napp.use(cookieParser());\n\n// Configuring CORS\n\nvar allowedOrigins = ['http://localhost:5173', 'http://127.0.0.1:5173', process.env.FRONTEND_URL];\napp.use(cors({\n  origin: function origin(_origin, callback) {\n    if (!_origin) return callback(null, true); // allow mobile/postman\n    if (allowedOrigins.includes(_origin)) return callback(null, true);\n    return callback(new Error('Not allowed by CORS'));\n  },\n  credentials: true\n}));\napp.options('*', cors());\n\n///////////////////////////////////////////////////////////////////////////\n\n// Development logging in a console\nif (process.env.NODE_ENV === 'development') app.use(morgan('dev'));\n\n// Rate limiter counts number of requests and BLOCKS then when there's TOO MANY\n// 1) Creating limiter\nvar limiter = rateLimit({\n  max: 500,\n  windowMs: 60 * 60 * 1000,\n  //Timeframe\n  message: 'Too many requests from this IP, please try again in an hour!'\n});\n\n// 2) Mounting limiter\napp.use('/api', limiter);\n\n// Body Parser, reading data from body into req.body\napp.use(express.json({\n  limit: '10kb'\n}));\n\n// Cookie Parser\n// app.use(cookieParser());\n\n// Data sanitization against NoSQL query injection (Someone is ABLE to login without knowing email)\napp.use(mongoSanitize());\n\n// Data sanitization against XSS\napp.use(xss());\n\n// Prevent parameter pollution\napp.use(hpp({\n  whitelist: ['duration', 'ratingsAverage', 'ratingsQuantity', 'maxGroupSize', 'difficulty', 'price']\n}));\n\n// Serve static files\n// To access it http://localhost:3000/overview.html (It doesn't need /public in it anymore)\napp.use(express[\"static\"](\"\".concat(__dirname, \"/public\")));\n\n// Test Middleware\napp.use(function (req, res, next) {\n  req.requestTime = new Date().toISOString();\n  next();\n});\n\n// 3) ROUTES\n\n// Process is called mounting a route\n\napp.use('/api/v1/tours', tourRouter);\napp.use('/api/v1/users', userRouter);\napp.use('/api/v1/reviews', reviewRouter);\n\n// Will run for ALL http verbs\n// Handling UNHANDLED routes\napp.all('/{*any}', function (req, res, next) {\n  // const err = new Error(`Can't find ${req.originalUrl} on this server!`);\n  // err.status = 'fail';\n  // err.statusCode = 404;\n\n  next(new appError(\"Can't find \".concat(req.originalUrl, \" on this server!\"), 404));\n});\n\n// Global Error handling middleware\napp.use(globalErrorHandler);\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIm1vcmdhbiIsInJhdGVMaW1pdCIsImhlbG1ldCIsIm1vbmdvU2FuaXRpemUiLCJ4c3MiLCJocHAiLCJjb29raWVQYXJzZXIiLCJjb3JzIiwiYXBwRXJyb3IiLCJnbG9iYWxFcnJvckhhbmRsZXIiLCJ0b3VyUm91dGVyIiwidXNlclJvdXRlciIsInJldmlld1JvdXRlciIsImFwcCIsInVzZSIsImFsbG93ZWRPcmlnaW5zIiwicHJvY2VzcyIsImVudiIsIkZST05URU5EX1VSTCIsIm9yaWdpbiIsImNhbGxiYWNrIiwiaW5jbHVkZXMiLCJFcnJvciIsImNyZWRlbnRpYWxzIiwib3B0aW9ucyIsIk5PREVfRU5WIiwibGltaXRlciIsIm1heCIsIndpbmRvd01zIiwibWVzc2FnZSIsImpzb24iLCJsaW1pdCIsIndoaXRlbGlzdCIsImNvbmNhdCIsIl9fZGlybmFtZSIsInJlcSIsInJlcyIsIm5leHQiLCJyZXF1ZXN0VGltZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImFsbCIsIm9yaWdpbmFsVXJsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC8iLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgbW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJyk7XG5jb25zdCByYXRlTGltaXQgPSByZXF1aXJlKCdleHByZXNzLXJhdGUtbGltaXQnKTtcbmNvbnN0IGhlbG1ldCA9IHJlcXVpcmUoJ2hlbG1ldCcpO1xuY29uc3QgbW9uZ29TYW5pdGl6ZSA9IHJlcXVpcmUoJ2V4cHJlc3MtbW9uZ28tc2FuaXRpemUnKTtcbmNvbnN0IHhzcyA9IHJlcXVpcmUoJ3hzcy1jbGVhbicpO1xuY29uc3QgaHBwID0gcmVxdWlyZSgnaHBwJyk7XG5jb25zdCBjb29raWVQYXJzZXIgPSByZXF1aXJlKCdjb29raWUtcGFyc2VyJyk7XG5cbmNvbnN0IGNvcnMgPSByZXF1aXJlKCdjb3JzJyk7XG5cbmNvbnN0IGFwcEVycm9yID0gcmVxdWlyZSgnLi91dGlscy9hcHBFcnJvcicpO1xuY29uc3QgZ2xvYmFsRXJyb3JIYW5kbGVyID0gcmVxdWlyZSgnLi9jb250cm9sbGVycy9lcnJvckNvbnRyb2xsZXInKTtcbmNvbnN0IHRvdXJSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcy90b3VyUm91dGVzJyk7XG5jb25zdCB1c2VyUm91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvdXNlclJvdXRlcycpO1xuY29uc3QgcmV2aWV3Um91dGVyID0gcmVxdWlyZSgnLi9yb3V0ZXMvcmV2aWV3Um91dGVzJyk7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gMSkgR0xPQkFMIE1JRERMRVdBUkVTXG5cbi8vIGFwcC51c2UgaXMgYSBNRVRIT0QgdXNlZCB0byBNT1VOVCBtaWRkbGV3YXJlIGZ1bmN0aW9ucyEhIVxuXG4vLyBTZXQgc2VjdXJpdHkgSFRUUCBoZWFkZXJzXG5hcHAudXNlKGhlbG1ldCgpKTtcblxuLy8gQ29va2llIHBhcnNlclxuYXBwLnVzZShjb29raWVQYXJzZXIoKSk7XG5cbi8vIENvbmZpZ3VyaW5nIENPUlNcblxuY29uc3QgYWxsb3dlZE9yaWdpbnMgPSBbXG4gICdodHRwOi8vbG9jYWxob3N0OjUxNzMnLFxuICAnaHR0cDovLzEyNy4wLjAuMTo1MTczJyxcbiAgcHJvY2Vzcy5lbnYuRlJPTlRFTkRfVVJMLFxuXTtcblxuYXBwLnVzZShcbiAgY29ycyh7XG4gICAgb3JpZ2luOiBmdW5jdGlvbiAob3JpZ2luLCBjYWxsYmFjaykge1xuICAgICAgaWYgKCFvcmlnaW4pIHJldHVybiBjYWxsYmFjayhudWxsLCB0cnVlKTsgLy8gYWxsb3cgbW9iaWxlL3Bvc3RtYW5cbiAgICAgIGlmIChhbGxvd2VkT3JpZ2lucy5pbmNsdWRlcyhvcmlnaW4pKSByZXR1cm4gY2FsbGJhY2sobnVsbCwgdHJ1ZSk7XG4gICAgICByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdOb3QgYWxsb3dlZCBieSBDT1JTJykpO1xuICAgIH0sXG4gICAgY3JlZGVudGlhbHM6IHRydWUsXG4gIH0pLFxuKTtcblxuYXBwLm9wdGlvbnMoJyonLCBjb3JzKCkpO1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuLy8gRGV2ZWxvcG1lbnQgbG9nZ2luZyBpbiBhIGNvbnNvbGVcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JykgYXBwLnVzZShtb3JnYW4oJ2RldicpKTtcblxuLy8gUmF0ZSBsaW1pdGVyIGNvdW50cyBudW1iZXIgb2YgcmVxdWVzdHMgYW5kIEJMT0NLUyB0aGVuIHdoZW4gdGhlcmUncyBUT08gTUFOWVxuLy8gMSkgQ3JlYXRpbmcgbGltaXRlclxuY29uc3QgbGltaXRlciA9IHJhdGVMaW1pdCh7XG4gIG1heDogNTAwLFxuICB3aW5kb3dNczogNjAgKiA2MCAqIDEwMDAsIC8vVGltZWZyYW1lXG4gIG1lc3NhZ2U6ICdUb28gbWFueSByZXF1ZXN0cyBmcm9tIHRoaXMgSVAsIHBsZWFzZSB0cnkgYWdhaW4gaW4gYW4gaG91ciEnLFxufSk7XG5cbi8vIDIpIE1vdW50aW5nIGxpbWl0ZXJcbmFwcC51c2UoJy9hcGknLCBsaW1pdGVyKTtcblxuLy8gQm9keSBQYXJzZXIsIHJlYWRpbmcgZGF0YSBmcm9tIGJvZHkgaW50byByZXEuYm9keVxuYXBwLnVzZShcbiAgZXhwcmVzcy5qc29uKHtcbiAgICBsaW1pdDogJzEwa2InLFxuICB9KSxcbik7XG5cbi8vIENvb2tpZSBQYXJzZXJcbi8vIGFwcC51c2UoY29va2llUGFyc2VyKCkpO1xuXG4vLyBEYXRhIHNhbml0aXphdGlvbiBhZ2FpbnN0IE5vU1FMIHF1ZXJ5IGluamVjdGlvbiAoU29tZW9uZSBpcyBBQkxFIHRvIGxvZ2luIHdpdGhvdXQga25vd2luZyBlbWFpbClcbmFwcC51c2UobW9uZ29TYW5pdGl6ZSgpKTtcblxuLy8gRGF0YSBzYW5pdGl6YXRpb24gYWdhaW5zdCBYU1NcbmFwcC51c2UoeHNzKCkpO1xuXG4vLyBQcmV2ZW50IHBhcmFtZXRlciBwb2xsdXRpb25cbmFwcC51c2UoXG4gIGhwcCh7XG4gICAgd2hpdGVsaXN0OiBbXG4gICAgICAnZHVyYXRpb24nLFxuICAgICAgJ3JhdGluZ3NBdmVyYWdlJyxcbiAgICAgICdyYXRpbmdzUXVhbnRpdHknLFxuICAgICAgJ21heEdyb3VwU2l6ZScsXG4gICAgICAnZGlmZmljdWx0eScsXG4gICAgICAncHJpY2UnLFxuICAgIF0sXG4gIH0pLFxuKTtcblxuLy8gU2VydmUgc3RhdGljIGZpbGVzXG4vLyBUbyBhY2Nlc3MgaXQgaHR0cDovL2xvY2FsaG9zdDozMDAwL292ZXJ2aWV3Lmh0bWwgKEl0IGRvZXNuJ3QgbmVlZCAvcHVibGljIGluIGl0IGFueW1vcmUpXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKGAke19fZGlybmFtZX0vcHVibGljYCkpO1xuXG4vLyBUZXN0IE1pZGRsZXdhcmVcbmFwcC51c2UoKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcS5yZXF1ZXN0VGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcblxuICBuZXh0KCk7XG59KTtcblxuLy8gMykgUk9VVEVTXG5cbi8vIFByb2Nlc3MgaXMgY2FsbGVkIG1vdW50aW5nIGEgcm91dGVcblxuYXBwLnVzZSgnL2FwaS92MS90b3VycycsIHRvdXJSb3V0ZXIpO1xuYXBwLnVzZSgnL2FwaS92MS91c2VycycsIHVzZXJSb3V0ZXIpO1xuYXBwLnVzZSgnL2FwaS92MS9yZXZpZXdzJywgcmV2aWV3Um91dGVyKTtcblxuLy8gV2lsbCBydW4gZm9yIEFMTCBodHRwIHZlcmJzXG4vLyBIYW5kbGluZyBVTkhBTkRMRUQgcm91dGVzXG5hcHAuYWxsKCcveyphbnl9JywgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIGNvbnN0IGVyciA9IG5ldyBFcnJvcihgQ2FuJ3QgZmluZCAke3JlcS5vcmlnaW5hbFVybH0gb24gdGhpcyBzZXJ2ZXIhYCk7XG4gIC8vIGVyci5zdGF0dXMgPSAnZmFpbCc7XG4gIC8vIGVyci5zdGF0dXNDb2RlID0gNDA0O1xuXG4gIG5leHQobmV3IGFwcEVycm9yKGBDYW4ndCBmaW5kICR7cmVxLm9yaWdpbmFsVXJsfSBvbiB0aGlzIHNlcnZlciFgLCA0MDQpKTtcbn0pO1xuXG4vLyBHbG9iYWwgRXJyb3IgaGFuZGxpbmcgbWlkZGxld2FyZVxuYXBwLnVzZShnbG9iYWxFcnJvckhhbmRsZXIpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFTLENBQUM7QUFDbEMsSUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBUSxDQUFDO0FBQ2hDLElBQU1FLFNBQVMsR0FBR0YsT0FBTyxDQUFDLG9CQUFvQixDQUFDO0FBQy9DLElBQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUNoQyxJQUFNSSxhQUFhLEdBQUdKLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQztBQUN2RCxJQUFNSyxHQUFHLEdBQUdMLE9BQU8sQ0FBQyxXQUFXLENBQUM7QUFDaEMsSUFBTU0sR0FBRyxHQUFHTixPQUFPLENBQUMsS0FBSyxDQUFDO0FBQzFCLElBQU1PLFlBQVksR0FBR1AsT0FBTyxDQUFDLGVBQWUsQ0FBQztBQUU3QyxJQUFNUSxJQUFJLEdBQUdSLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFFNUIsSUFBTVMsUUFBUSxHQUFHVCxPQUFPLENBQUMsa0JBQWtCLENBQUM7QUFDNUMsSUFBTVUsa0JBQWtCLEdBQUdWLE9BQU8sQ0FBQywrQkFBK0IsQ0FBQztBQUNuRSxJQUFNVyxVQUFVLEdBQUdYLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUNqRCxJQUFNWSxVQUFVLEdBQUdaLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQztBQUNqRCxJ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","map":{"version":3,"names":["express","require","morgan","rateLimit","helmet","mongoSanitize","xss","hpp","cookieParser","cors","appError","globalErrorHandler","tourRouter","userRouter","reviewRouter","app","use","allowedOrigins","process","env","FRONTEND_URL","origin","callback","includes","Error","credentials","options","NODE_ENV","limiter","max","windowMs","message","json","limit","whitelist","concat","__dirname","req","res","next","requestTime","Date","toISOString","all","originalUrl","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/","sources":["app.js"],"sourcesContent":["const express = require('express');\nconst morgan = require('morgan');\nconst rateLimit = require('express-rate-limit');\nconst helmet = require('helmet');\nconst mongoSanitize = require('express-mongo-sanitize');\nconst xss = require('xss-clean');\nconst hpp = require('hpp');\nconst cookieParser = require('cookie-parser');\n\nconst cors = require('cors');\n\nconst appError = require('./utils/appError');\nconst globalErrorHandler = require('./controllers/errorController');\nconst tourRouter = require('./routes/tourRoutes');\nconst userRouter = require('./routes/userRoutes');\nconst reviewRouter = require('./routes/reviewRoutes');\n\nconst app = express();\n\n// 1) GLOBAL MIDDLEWARES\n\n// app.use is a METHOD used to MOUNT middleware functions!!!\n\n// Set security HTTP headers\napp.use(helmet());\n\n// Cookie parser\napp.use(cookieParser());\n\n// Configuring CORS\n\nconst allowedOrigins = [\n  'http://localhost:5173',\n  'http://127.0.0.1:5173',\n  process.env.FRONTEND_URL,\n];\n\napp.use(\n  cors({\n    origin: function (origin, callback) {\n      if (!origin) return callback(null, true); // allow mobile/postman\n      if (allowedOrigins.includes(origin)) return callback(null, true);\n      return callback(new Error('Not allowed by CORS'));\n    },\n    credentials: true,\n  }),\n);\n\napp.options('*', cors());\n\n///////////////////////////////////////////////////////////////////////////\n\n// Development logging in a console\nif (process.env.NODE_ENV === 'development') app.use(morgan('dev'));\n\n// Rate limiter counts number of requests and BLOCKS then when there's TOO MANY\n// 1) Creating limiter\nconst limiter = rateLimit({\n  max: 500,\n  windowMs: 60 * 60 * 1000, //Timeframe\n  message: 'Too many requests from this IP, please try again in an hour!',\n});\n\n// 2) Mounting limiter\napp.use('/api', limiter);\n\n// Body Parser, reading data from body into req.body\napp.use(\n  express.json({\n    limit: '10kb',\n  }),\n);\n\n// Cookie Parser\n// app.use(cookieParser());\n\n// Data sanitization against NoSQL query injection (Someone is ABLE to login without knowing email)\napp.use(mongoSanitize());\n\n// Data sanitization against XSS\napp.use(xss());\n\n// Prevent parameter pollution\napp.use(\n  hpp({\n    whitelist: [\n      'duration',\n      'ratingsAverage',\n      'ratingsQuantity',\n      'maxGroupSize',\n      'difficulty',\n      'price',\n    ],\n  }),\n);\n\n// Serve static files\n// To access it http://localhost:3000/overview.html (It doesn't need /public in it anymore)\napp.use(express.static(`${__dirname}/public`));\n\n// Test Middleware\napp.use((req, res, next) => {\n  req.requestTime = new Date().toISOString();\n\n  next();\n});\n\n// 3) ROUTES\n\n// Process is called mounting a route\n\napp.use('/api/v1/tours', tourRouter);\napp.use('/api/v1/users', userRouter);\napp.use('/api/v1/reviews', reviewRouter);\n\n// Will run for ALL http verbs\n// Handling UNHANDLED routes\napp.all('/{*any}', (req, res, next) => {\n  // const err = new Error(`Can't find ${req.originalUrl} on this server!`);\n  // err.status = 'fail';\n  // err.statusCode = 404;\n\n  next(new appError(`Can't find ${req.originalUrl} on this server!`, 404));\n});\n\n// Global Error handling middleware\napp.use(globalErrorHandler);\n\nmodule.exports = app;\n"],"mappings":"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","ignoreList":[]}},"mtime":1764919180987},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/appError.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _wrapNativeSuper(t) { var r = \"function\" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf(\"[native code]\"); } catch (n) { return \"function\" == typeof t; } }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nvar appError = /*#__PURE__*/function (_Error) {\n  function appError(message, statusCode) {\n    var _this;\n    _classCallCheck(this, appError);\n    _this = _callSuper(this, appError, [message]);\n    _this.statusCode = statusCode;\n    _this.status = \"\".concat(statusCode).startsWith('4') ? 'fail' : 'error';\n    _this.isOperational = true;\n    Error.captureStackTrace(_this, _this.constructor);\n    return _this;\n  }\n  _inherits(appError, _Error);\n  return _createClass(appError);\n}(/*#__PURE__*/_wrapNativeSuper(Error));\nmodule.exports = appError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBFcnJvciIsIl9FcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJfY2FsbFN1cGVyIiwic3RhdHVzIiwiY29uY2F0Iiwic3RhcnRzV2l0aCIsImlzT3BlcmF0aW9uYWwiLCJFcnJvciIsImNhcHR1cmVTdGFja1RyYWNlIiwiY29uc3RydWN0b3IiLCJfaW5oZXJpdHMiLCJfY3JlYXRlQ2xhc3MiLCJfd3JhcE5hdGl2ZVN1cGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC91dGlscy8iLCJzb3VyY2VzIjpbImFwcEVycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIGFwcEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLnN0YXR1cyA9IGAke3N0YXR1c0NvZGV9YC5zdGFydHNXaXRoKCc0JykgPyAnZmFpbCcgOiAnZXJyb3InO1xuICAgIHRoaXMuaXNPcGVyYXRpb25hbCA9IHRydWU7XG5cbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcEVycm9yO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFBTUEsUUFBUSwwQkFBQUMsTUFBQTtFQUNaLFNBQUFELFNBQVlFLE9BQU8sRUFBRUMsVUFBVSxFQUFFO0lBQUEsSUFBQUMsS0FBQTtJQUFBQyxlQUFBLE9BQUFMLFFBQUE7SUFDL0JJLEtBQUEsR0FBQUUsVUFBQSxPQUFBTixRQUFBLEdBQU1FLE9BQU87SUFDYkUsS0FBQSxDQUFLRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUJDLEtBQUEsQ0FBS0csTUFBTSxHQUFHLEdBQUFDLE1BQUEsQ0FBR0wsVUFBVSxFQUFHTSxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxHQUFHLE9BQU87SUFDaEVMLEtBQUEsQ0FBS00sYUFBYSxHQUFHLElBQUk7SUFFekJDLEtBQUssQ0FBQ0MsaUJBQWlCLENBQUFSLEtBQUEsRUFBT0EsS0FBQSxDQUFLUyxXQUFXLENBQUM7SUFBQyxPQUFBVCxLQUFBO0VBQ2xEO0VBQUNVLFNBQUEsQ0FBQWQsUUFBQSxFQUFBQyxNQUFBO0VBQUEsT0FBQWMsWUFBQSxDQUFBZixRQUFBO0FBQUEsZUFBQWdCLGdCQUFBLENBUm9CTCxLQUFLO0FBVzVCTSxNQUFNLENBQUNDLE9BQU8sR0FBR2xCLFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["appError","_Error","message","statusCode","_this","_classCallCheck","_callSuper","status","concat","startsWith","isOperational","Error","captureStackTrace","constructor","_inherits","_createClass","_wrapNativeSuper","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["appError.js"],"sourcesContent":["class appError extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.statusCode = statusCode;\n    this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\n    this.isOperational = true;\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nmodule.exports = appError;\n"],"mappings":";;;;;;;;;;;;;;;;;;IAAMA,QAAQ,0BAAAC,MAAA;EACZ,SAAAD,SAAYE,OAAO,EAAEC,UAAU,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAL,QAAA;IAC/BI,KAAA,GAAAE,UAAA,OAAAN,QAAA,GAAME,OAAO;IACbE,KAAA,CAAKD,UAAU,GAAGA,UAAU;IAC5BC,KAAA,CAAKG,MAAM,GAAG,GAAAC,MAAA,CAAGL,UAAU,EAAGM,UAAU,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,OAAO;IAChEL,KAAA,CAAKM,aAAa,GAAG,IAAI;IAEzBC,KAAK,CAACC,iBAAiB,CAAAR,KAAA,EAAOA,KAAA,CAAKS,WAAW,CAAC;IAAC,OAAAT,KAAA;EAClD;EAACU,SAAA,CAAAd,QAAA,EAAAC,MAAA;EAAA,OAAAc,YAAA,CAAAf,QAAA;AAAA,eAAAgB,gBAAA,CARoBL,KAAK;AAW5BM,MAAM,CAACC,OAAO,GAAGlB,QAAQ","ignoreList":[]}},"mtime":1762243431370},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/errorController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar appError = require('../utils/appError');\nvar handleCastErrorDB = function handleCastErrorDB(err) {\n  var message = \"Invalid \".concat(err.path, \": \").concat(err.value);\n  return new appError(message, 400);\n};\nvar handleDuplicateFieldsDB = function handleDuplicateFieldsDB(err) {\n  var value = err.errmsg.match(/([\"'])(?:(?=(\\\\?))\\2.)*?\\1/)[0];\n  var message = \"Duplicate fields value: \".concat(value, \". Please use another value!\");\n  return new appError(message, 400);\n};\nvar handleValidationErrorDB = function handleValidationErrorDB(err) {\n  var errors = Object.values(err.errors).map(function (el) {\n    return el.message;\n  });\n  var message = \"Invalid input data. \".concat(errors.join('. '));\n  return new appError(message, 400);\n};\nvar handleJWTError = function handleJWTError() {\n  return new appError('Invalid token. Please log in again!', 401);\n};\nvar handleJWTExpiredError = function handleJWTExpiredError() {\n  return new appError('Your token has expired, please log in again!', 401);\n};\nvar sendErrorDev = function sendErrorDev(err, res) {\n  res.status(err.statusCode).json({\n    status: err.status,\n    error: err,\n    message: err.message,\n    stack: err.stack\n  });\n};\nvar sendErrorProd = function sendErrorProd(err, res) {\n  // Operational, trusted error: send message to client\n  if (err.isOperational) {\n    res.status(err.statusCode).json({\n      status: err.status,\n      message: err.message\n    });\n\n    // Programming or other unknown error: don't leak error details\n  } else {\n    // 1) Log error\n    console.error('ERROR ', err);\n\n    // 2) Send generic message\n    res.status(500).json({\n      status: 'error',\n      message: 'Something went wrong'\n    });\n  }\n};\nmodule.exports = function (err, req, res, next) {\n  err.statusCode = err.statusCode || 500;\n  err.status = err.status || 'error';\n  if (process.env.NODE_ENV === 'development') {\n    sendErrorDev(err, res);\n  } else if (process.env.NODE_ENV === 'production') {\n    var error = err;\n    if (error.name === 'CastError') error = handleCastErrorDB(error);\n    if (error.code === 11000) error = handleDuplicateFieldsDB(error);\n    if (error.name === 'ValidationError') error = handleValidationErrorDB(error);\n    if (error.name === 'JsonWebTokenError') error = handleJWTError();\n    if (error.name === 'TokenExpiredError') error = handleJWTExpiredError();\n    sendErrorProd(error, res);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBFcnJvciIsInJlcXVpcmUiLCJoYW5kbGVDYXN0RXJyb3JEQiIsImVyciIsIm1lc3NhZ2UiLCJjb25jYXQiLCJwYXRoIiwidmFsdWUiLCJoYW5kbGVEdXBsaWNhdGVGaWVsZHNEQiIsImVycm1zZyIsIm1hdGNoIiwiaGFuZGxlVmFsaWRhdGlvbkVycm9yREIiLCJlcnJvcnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlbCIsImpvaW4iLCJoYW5kbGVKV1RFcnJvciIsImhhbmRsZUpXVEV4cGlyZWRFcnJvciIsInNlbmRFcnJvckRldiIsInJlcyIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJqc29uIiwiZXJyb3IiLCJzdGFjayIsInNlbmRFcnJvclByb2QiLCJpc09wZXJhdGlvbmFsIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXEiLCJuZXh0IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibmFtZSIsImNvZGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJlcnJvckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBwRXJyb3IgPSByZXF1aXJlKCcuLi91dGlscy9hcHBFcnJvcicpO1xuXG5jb25zdCBoYW5kbGVDYXN0RXJyb3JEQiA9IChlcnIpID0+IHtcbiAgY29uc3QgbWVzc2FnZSA9IGBJbnZhbGlkICR7ZXJyLnBhdGh9OiAke2Vyci52YWx1ZX1gO1xuXG4gIHJldHVybiBuZXcgYXBwRXJyb3IobWVzc2FnZSwgNDAwKTtcbn07XG5cbmNvbnN0IGhhbmRsZUR1cGxpY2F0ZUZpZWxkc0RCID0gKGVycikgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGVyci5lcnJtc2cubWF0Y2goLyhbXCInXSkoPzooPz0oXFxcXD8pKVxcMi4pKj9cXDEvKVswXTtcblxuICBjb25zdCBtZXNzYWdlID0gYER1cGxpY2F0ZSBmaWVsZHMgdmFsdWU6ICR7dmFsdWV9LiBQbGVhc2UgdXNlIGFub3RoZXIgdmFsdWUhYDtcblxuICByZXR1cm4gbmV3IGFwcEVycm9yKG1lc3NhZ2UsIDQwMCk7XG59O1xuXG5jb25zdCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JEQiA9IChlcnIpID0+IHtcbiAgY29uc3QgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnIuZXJyb3JzKS5tYXAoKGVsKSA9PiBlbC5tZXNzYWdlKTtcbiAgY29uc3QgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0IGRhdGEuICR7ZXJyb3JzLmpvaW4oJy4gJyl9YDtcblxuICByZXR1cm4gbmV3IGFwcEVycm9yKG1lc3NhZ2UsIDQwMCk7XG59O1xuXG5jb25zdCBoYW5kbGVKV1RFcnJvciA9ICgpID0+XG4gIG5ldyBhcHBFcnJvcignSW52YWxpZCB0b2tlbi4gUGxlYXNlIGxvZyBpbiBhZ2FpbiEnLCA0MDEpO1xuXG5jb25zdCBoYW5kbGVKV1RFeHBpcmVkRXJyb3IgPSAoKSA9PlxuICBuZXcgYXBwRXJyb3IoJ1lvdXIgdG9rZW4gaGFzIGV4cGlyZWQsIHBsZWFzZSBsb2cgaW4gYWdhaW4hJywgNDAxKTtcblxuY29uc3Qgc2VuZEVycm9yRGV2ID0gKGVyciwgcmVzKSA9PiB7XG4gIHJlcy5zdGF0dXMoZXJyLnN0YXR1c0NvZGUpLmpzb24oe1xuICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICBlcnJvcjogZXJyLFxuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gIH0pO1xufTtcblxuY29uc3Qgc2VuZEVycm9yUHJvZCA9IChlcnIsIHJlcykgPT4ge1xuICAvLyBPcGVyYXRpb25hbCwgdHJ1c3RlZCBlcnJvcjogc2VuZCBtZXNzYWdlIHRvIGNsaWVudFxuICBpZiAoZXJyLmlzT3BlcmF0aW9uYWwpIHtcbiAgICByZXMuc3RhdHVzKGVyci5zdGF0dXNDb2RlKS5qc29uKHtcbiAgICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIH0pO1xuXG4gICAgLy8gUHJvZ3JhbW1pbmcgb3Igb3RoZXIgdW5rbm93biBlcnJvcjogZG9uJ3QgbGVhayBlcnJvciBkZXRhaWxzXG4gIH0gZWxzZSB7XG4gICAgLy8gMSkgTG9nIGVycm9yXG4gICAgY29uc29sZS5lcnJvcignRVJST1Ig8J+krycsIGVycik7XG5cbiAgICAvLyAyKSBTZW5kIGdlbmVyaWMgbWVzc2FnZVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gICAgfSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgZXJyLnN0YXR1c0NvZGUgPSBlcnIuc3RhdHVzQ29kZSB8fCA1MDA7XG4gIGVyci5zdGF0dXMgPSBlcnIuc3RhdHVzIHx8ICdlcnJvcic7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgc2VuZEVycm9yRGV2KGVyciwgcmVzKTtcbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgbGV0IGVycm9yID0gZXJyO1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnQ2FzdEVycm9yJykgZXJyb3IgPSBoYW5kbGVDYXN0RXJyb3JEQihlcnJvcik7XG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDExMDAwKSBlcnJvciA9IGhhbmRsZUR1cGxpY2F0ZUZpZWxkc0RCKGVycm9yKTtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpXG4gICAgICBlcnJvciA9IGhhbmRsZVZhbGlkYXRpb25FcnJvckRCKGVycm9yKTtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykgZXJyb3IgPSBoYW5kbGVKV1RFcnJvcigpO1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSBlcnJvciA9IGhhbmRsZUpXVEV4cGlyZWRFcnJvcigpO1xuXG4gICAgc2VuZEVycm9yUHJvZChlcnJvciwgcmVzKTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUU3QyxJQUFNQyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQWlCQSxDQUFJQyxHQUFHLEVBQUs7RUFDakMsSUFBTUMsT0FBTyxjQUFBQyxNQUFBLENBQWNGLEdBQUcsQ0FBQ0csSUFBSSxRQUFBRCxNQUFBLENBQUtGLEdBQUcsQ0FBQ0ksS0FBSyxDQUFFO0VBRW5ELE9BQU8sSUFBSVAsUUFBUSxDQUFDSSxPQUFPLEVBQUUsR0FBRyxDQUFDO0FBQ25DLENBQUM7QUFFRCxJQUFNSSx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQXVCQSxDQUFJTCxHQUFHLEVBQUs7RUFDdkMsSUFBTUksS0FBSyxHQUFHSixHQUFHLENBQUNNLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRS9ELElBQU1OLE9BQU8sOEJBQUFDLE1BQUEsQ0FBOEJFLEtBQUssZ0NBQTZCO0VBRTdFLE9BQU8sSUFBSVAsUUFBUSxDQUFDSSxPQUFPLEVBQUUsR0FBRyxDQUFDO0FBQ25DLENBQUM7QUFFRCxJQUFNTyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQXVCQSxDQUFJUixHQUFHLEVBQUs7RUFDdkMsSUFBTVMsTUFBTSxHQUFHQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ1gsR0FBRyxDQUFDUyxNQUFNLENBQUMsQ0FBQ0csR0FBRyxDQUFDLFVBQUNDLEVBQUU7SUFBQSxPQUFLQSxFQUFFLENBQUNaLE9BQU87RUFBQSxFQUFDO0VBQ2hFLElBQU1BLE9BQU8sMEJBQUFDLE1BQUEsQ0FBMEJPLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFFO0VBRTFELE9B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","map":{"version":3,"names":["appError","require","handleCastErrorDB","err","message","concat","path","value","handleDuplicateFieldsDB","errmsg","match","handleValidationErrorDB","errors","Object","values","map","el","join","handleJWTError","handleJWTExpiredError","sendErrorDev","res","status","statusCode","json","error","stack","sendErrorProd","isOperational","console","module","exports","req","next","process","env","NODE_ENV","name","code"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["errorController.js"],"sourcesContent":["const appError = require('../utils/appError');\n\nconst handleCastErrorDB = (err) => {\n  const message = `Invalid ${err.path}: ${err.value}`;\n\n  return new appError(message, 400);\n};\n\nconst handleDuplicateFieldsDB = (err) => {\n  const value = err.errmsg.match(/([\"'])(?:(?=(\\\\?))\\2.)*?\\1/)[0];\n\n  const message = `Duplicate fields value: ${value}. Please use another value!`;\n\n  return new appError(message, 400);\n};\n\nconst handleValidationErrorDB = (err) => {\n  const errors = Object.values(err.errors).map((el) => el.message);\n  const message = `Invalid input data. ${errors.join('. ')}`;\n\n  return new appError(message, 400);\n};\n\nconst handleJWTError = () =>\n  new appError('Invalid token. Please log in again!', 401);\n\nconst handleJWTExpiredError = () =>\n  new appError('Your token has expired, please log in again!', 401);\n\nconst sendErrorDev = (err, res) => {\n  res.status(err.statusCode).json({\n    status: err.status,\n    error: err,\n    message: err.message,\n    stack: err.stack,\n  });\n};\n\nconst sendErrorProd = (err, res) => {\n  // Operational, trusted error: send message to client\n  if (err.isOperational) {\n    res.status(err.statusCode).json({\n      status: err.status,\n      message: err.message,\n    });\n\n    // Programming or other unknown error: don't leak error details\n  } else {\n    // 1) Log error\n    console.error('ERROR ', err);\n\n    // 2) Send generic message\n    res.status(500).json({\n      status: 'error',\n      message: 'Something went wrong',\n    });\n  }\n};\n\nmodule.exports = (err, req, res, next) => {\n  err.statusCode = err.statusCode || 500;\n  err.status = err.status || 'error';\n\n  if (process.env.NODE_ENV === 'development') {\n    sendErrorDev(err, res);\n  } else if (process.env.NODE_ENV === 'production') {\n    let error = err;\n    if (error.name === 'CastError') error = handleCastErrorDB(error);\n    if (error.code === 11000) error = handleDuplicateFieldsDB(error);\n    if (error.name === 'ValidationError')\n      error = handleValidationErrorDB(error);\n    if (error.name === 'JsonWebTokenError') error = handleJWTError();\n    if (error.name === 'TokenExpiredError') error = handleJWTExpiredError();\n\n    sendErrorProd(error, res);\n  }\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1764231491532},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/routes/tourRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar express = require('express');\nvar tourController = require('../controllers/tourController');\nvar authController = require('../controllers/authController');\nvar reviewRouter = require('./../routes/reviewRoutes');\nvar _require = require('../utils/upload'),\n  uploadTourImages = _require.uploadTourImages;\n\n/* \ntourController is an object containing all functions that I exported \nfrom a controller therefore all methods must be called on it! \n*/\n\nvar router = express.Router();\n\n// Mounting review router AFTER tours (MAIN) router\nrouter.use('/:tourId/reviews', reviewRouter);\nrouter.route('/top-5-cheap').get(tourController.aliasTopTours, tourController.getAllTours);\nrouter.route('/tour-stats').get(tourController.getTourStats);\nrouter.route('/monthly-plan/:year').get(authController.protect, authController.restrictTo('admin', 'lead-guide', 'guide'), tourController.getMonthlyPlan);\n\n////////////////////////////////////////////////////////////////////////////\nrouter.route('/tours-within/:distance/center/:latlng/unit/:unit').get(tourController.getToursWithin);\n\n// Distance from a certain point to EVERY tour\nrouter.route('/distances/:latlng/unit/:unit').get(tourController.getDistance);\n\n////////////////////////////////////////////////////////////////////////////\n\nrouter.route('/').get(tourController.getAllTours).post(authController.protect, authController.restrictTo('admin', 'lead-guide'), tourController.createTour); // This is CHAINING multiple middlewares\n\nrouter.route('/:id').get(tourController.getTour).patch(authController.protect, authController.restrictTo('admin', 'lead-guide'), uploadTourImages.fields([{\n  name: 'imageCover',\n  maxCount: 1\n}, {\n  name: 'images',\n  maxCount: 3\n}]), tourController.updateTour)[\"delete\"](authController.protect, authController.restrictTo('admin', 'lead-guide'), tourController.deleteTour);\n\n// Get a Tour based on slug\nrouter.route('/slug/:slug').get(tourController.getTourBySlug);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInRvdXJDb250cm9sbGVyIiwiYXV0aENvbnRyb2xsZXIiLCJyZXZpZXdSb3V0ZXIiLCJfcmVxdWlyZSIsInVwbG9hZFRvdXJJbWFnZXMiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ1c2UiLCJyb3V0ZSIsImdldCIsImFsaWFzVG9wVG91cnMiLCJnZXRBbGxUb3VycyIsImdldFRvdXJTdGF0cyIsInByb3RlY3QiLCJyZXN0cmljdFRvIiwiZ2V0TW9udGhseVBsYW4iLCJnZXRUb3Vyc1dpdGhpbiIsImdldERpc3RhbmNlIiwicG9zdCIsImNyZWF0ZVRvdXIiLCJnZXRUb3VyIiwicGF0Y2giLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJ1cGRhdGVUb3VyIiwiZGVsZXRlVG91ciIsImdldFRvdXJCeVNsdWciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL3JvdXRlcy8iLCJzb3VyY2VzIjpbInRvdXJSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHRvdXJDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvdG91ckNvbnRyb2xsZXInKTtcbmNvbnN0IGF1dGhDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvYXV0aENvbnRyb2xsZXInKTtcbmNvbnN0IHJldmlld1JvdXRlciA9IHJlcXVpcmUoJy4vLi4vcm91dGVzL3Jldmlld1JvdXRlcycpO1xuY29uc3QgeyB1cGxvYWRUb3VySW1hZ2VzIH0gPSByZXF1aXJlKCcuLi91dGlscy91cGxvYWQnKTtcblxuLyogXG50b3VyQ29udHJvbGxlciBpcyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgZnVuY3Rpb25zIHRoYXQgSSBleHBvcnRlZCBcbmZyb20gYSBjb250cm9sbGVyIHRoZXJlZm9yZSBhbGwgbWV0aG9kcyBtdXN0IGJlIGNhbGxlZCBvbiBpdCEgXG4qL1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vLyBNb3VudGluZyByZXZpZXcgcm91dGVyIEFGVEVSIHRvdXJzIChNQUlOKSByb3V0ZXJcbnJvdXRlci51c2UoJy86dG91cklkL3Jldmlld3MnLCByZXZpZXdSb3V0ZXIpO1xuXG5yb3V0ZXJcbiAgLnJvdXRlKCcvdG9wLTUtY2hlYXAnKVxuICAuZ2V0KHRvdXJDb250cm9sbGVyLmFsaWFzVG9wVG91cnMsIHRvdXJDb250cm9sbGVyLmdldEFsbFRvdXJzKTtcblxucm91dGVyLnJvdXRlKCcvdG91ci1zdGF0cycpLmdldCh0b3VyQ29udHJvbGxlci5nZXRUb3VyU3RhdHMpO1xucm91dGVyXG4gIC5yb3V0ZSgnL21vbnRobHktcGxhbi86eWVhcicpXG4gIC5nZXQoXG4gICAgYXV0aENvbnRyb2xsZXIucHJvdGVjdCxcbiAgICBhdXRoQ29udHJvbGxlci5yZXN0cmljdFRvKCdhZG1pbicsICdsZWFkLWd1aWRlJywgJ2d1aWRlJyksXG4gICAgdG91ckNvbnRyb2xsZXIuZ2V0TW9udGhseVBsYW4sXG4gICk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnJvdXRlclxuICAucm91dGUoJy90b3Vycy13aXRoaW4vOmRpc3RhbmNlL2NlbnRlci86bGF0bG5nL3VuaXQvOnVuaXQnKVxuICAuZ2V0KHRvdXJDb250cm9sbGVyLmdldFRvdXJzV2l0aGluKTtcblxuLy8gRGlzdGFuY2UgZnJvbSBhIGNlcnRhaW4gcG9pbnQgdG8gRVZFUlkgdG91clxucm91dGVyLnJvdXRlKCcvZGlzdGFuY2VzLzpsYXRsbmcvdW5pdC86dW5pdCcpLmdldCh0b3VyQ29udHJvbGxlci5nZXREaXN0YW5jZSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxucm91dGVyXG4gIC5yb3V0ZSgnLycpXG4gIC5nZXQodG91ckNvbnRyb2xsZXIuZ2V0QWxsVG91cnMpXG4gIC5wb3N0KFxuICAgIGF1dGhDb250cm9sbGVyLnByb3RlY3QsXG4gICAgYXV0aENvbnRyb2xsZXIucmVzdHJpY3RUbygnYWRtaW4nLCAnbGVhZC1ndWlkZScpLFxuICAgIHRvdXJDb250cm9sbGVyLmNyZWF0ZVRvdXIsXG4gICk7IC8vIFRoaXMgaXMgQ0hBSU5JTkcgbXVsdGlwbGUgbWlkZGxld2FyZXNcblxucm91dGVyXG4gIC5yb3V0ZSgnLzppZCcpXG4gIC5nZXQodG91ckNvbnRyb2xsZXIuZ2V0VG91cilcbiAgLnBhdGNoKFxuICAgIGF1dGhDb250cm9sbGVyLnByb3RlY3QsXG4gICAgYXV0aENvbnRyb2xsZXIucmVzdHJpY3RUbygnYWRtaW4nLCAnbGVhZC1ndWlkZScpLFxuICAgIHVwbG9hZFRvdXJJbWFnZXMuZmllbGRzKFtcbiAgICAgIHsgbmFtZTogJ2ltYWdlQ292ZXInLCBtYXhDb3VudDogMSB9LFxuICAgICAgeyBuYW1lOiAnaW1hZ2VzJywgbWF4Q291bnQ6IDMgfSxcbiAgICBdKSxcbiAgICB0b3VyQ29udHJvbGxlci51cGRhdGVUb3VyLFxuICApXG4gIC5kZWxldGUoXG4gICAgYXV0aENvbnRyb2xsZXIucHJvdGVjdCxcbiAgICBhdXRoQ29udHJvbGxlci5yZXN0cmljdFRvKCdhZG1pbicsICdsZWFkLWd1aWRlJyksXG4gICAgdG91ckNvbnRyb2xsZXIuZGVsZXRlVG91cixcbiAgKTtcblxuLy8gR2V0IGEgVG91ciBiYXNlZCBvbiBzbHVnXG5yb3V0ZXIucm91dGUoJy9zbHVnLzpzbHVnJykuZ2V0KHRvdXJDb250cm9sbGVyLmdldFRvdXJCeVNsdWcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFT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","map":{"version":3,"names":["express","require","tourController","authController","reviewRouter","_require","uploadTourImages","router","Router","use","route","get","aliasTopTours","getAllTours","getTourStats","protect","restrictTo","getMonthlyPlan","getToursWithin","getDistance","post","createTour","getTour","patch","fields","name","maxCount","updateTour","deleteTour","getTourBySlug","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/routes/","sources":["tourRoutes.js"],"sourcesContent":["const express = require('express');\nconst tourController = require('../controllers/tourController');\nconst authController = require('../controllers/authController');\nconst reviewRouter = require('./../routes/reviewRoutes');\nconst { uploadTourImages } = require('../utils/upload');\n\n/* \ntourController is an object containing all functions that I exported \nfrom a controller therefore all methods must be called on it! \n*/\n\nconst router = express.Router();\n\n// Mounting review router AFTER tours (MAIN) router\nrouter.use('/:tourId/reviews', reviewRouter);\n\nrouter\n  .route('/top-5-cheap')\n  .get(tourController.aliasTopTours, tourController.getAllTours);\n\nrouter.route('/tour-stats').get(tourController.getTourStats);\nrouter\n  .route('/monthly-plan/:year')\n  .get(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide', 'guide'),\n    tourController.getMonthlyPlan,\n  );\n\n////////////////////////////////////////////////////////////////////////////\nrouter\n  .route('/tours-within/:distance/center/:latlng/unit/:unit')\n  .get(tourController.getToursWithin);\n\n// Distance from a certain point to EVERY tour\nrouter.route('/distances/:latlng/unit/:unit').get(tourController.getDistance);\n\n////////////////////////////////////////////////////////////////////////////\n\nrouter\n  .route('/')\n  .get(tourController.getAllTours)\n  .post(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide'),\n    tourController.createTour,\n  ); // This is CHAINING multiple middlewares\n\nrouter\n  .route('/:id')\n  .get(tourController.getTour)\n  .patch(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide'),\n    uploadTourImages.fields([\n      { name: 'imageCover', maxCount: 1 },\n      { name: 'images', maxCount: 3 },\n    ]),\n    tourController.updateTour,\n  )\n  .delete(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide'),\n    tourController.deleteTour,\n  );\n\n// Get a Tour based on slug\nrouter.route('/slug/:slug').get(tourController.getTourBySlug);\n\nmodule.exports = router;\n"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMC,cAAc,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AAC/D,IAAME,cAAc,GAAGF,OAAO,CAAC,+BAA+B,CAAC;AAC/D,IAAMG,YAAY,GAAGH,OAAO,CAAC,0BAA0B,CAAC;AACxD,IAAAI,QAAA,GAA6BJ,OAAO,CAAC,iBAAiB,CAAC;EAA/CK,gBAAgB,GAAAD,QAAA,CAAhBC,gBAAgB;;AAExB;AACA;AACA;AACA;;AAEA,IAAMC,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;;AAE/B;AACAD,MAAM,CAACE,GAAG,CAAC,kBAAkB,EAAEL,YAAY,CAAC;AAE5CG,MAAM,CACHG,KAAK,CAAC,cAAc,CAAC,CACrBC,GAAG,CAACT,cAAc,CAACU,aAAa,EAAEV,cAAc,CAACW,WAAW,CAAC;AAEhEN,MAAM,CAACG,KAAK,CAAC,aAAa,CAAC,CAACC,GAAG,CAACT,cAAc,CAACY,YAAY,CAAC;AAC5DP,MAAM,CACHG,KAAK,CAAC,qBAAqB,CAAC,CAC5BC,GAAG,CACFR,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,EAAE,OAAO,CAAC,EACzDd,cAAc,CAACe,cACjB,CAAC;;AAEH;AACAV,MAAM,CACHG,KAAK,CAAC,mDAAmD,CAAC,CAC1DC,GAAG,CAACT,cAAc,CAACgB,cAAc,CAAC;;AAErC;AACAX,MAAM,CAACG,KAAK,CAAC,+BAA+B,CAAC,CAACC,GAAG,CAACT,cAAc,CAACiB,WAAW,CAAC;;AAE7E;;AAEAZ,MAAM,CACHG,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAACT,cAAc,CAACW,WAAW,CAAC,CAC/BO,IAAI,CACHjB,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,EAChDd,cAAc,CAACmB,UACjB,CAAC,CAAC,CAAC;;AAELd,MAAM,CACHG,KAAK,CAAC,MAAM,CAAC,CACbC,GAAG,CAACT,cAAc,CAACoB,OAAO,CAAC,CAC3BC,KAAK,CACJpB,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,EAChDV,gBAAgB,CAACkB,MAAM,CAAC,CACtB;EAAEC,IAAI,EAAE,YAAY;EAAEC,QAAQ,EAAE;AAAE,CAAC,EACnC;EAAED,IAAI,EAAE,QAAQ;EAAEC,QAAQ,EAAE;AAAE,CAAC,CAChC,CAAC,EACFxB,cAAc,CAACyB,UACjB,CAAC,UACM,CACLxB,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,EAChDd,cAAc,CAAC0B,UACjB,CAAC;;AAEH;AACArB,MAAM,CAACG,KAAK,CAAC,aAAa,CAAC,CAACC,GAAG,CAACT,cAAc,CAAC2B,aAAa,CAAC;AAE7DC,MAAM,CAACC,OAAO,GAAGxB,MAAM","ignoreList":[]}},"mtime":1765344111285},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/tourController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar Tour = require('../models/tourModel');\nvar appError = require('../utils/appError');\nvar catchAsync = require('../utils/catchAsync');\nvar factory = require('./handlerFactory');\nvar executeUpdate = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next, Model) {\n    var doc;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          _context.n = 1;\n          return Model.findByIdAndUpdate(req.params.id, req.body, {\n            \"new\": true,\n            runValidators: true\n          });\n        case 1:\n          doc = _context.v;\n          if (doc) {\n            _context.n = 2;\n            break;\n          }\n          return _context.a(2, next(new appError('No document found with that ID', 404)));\n        case 2:\n          res.status(200).json({\n            status: 'success',\n            data: {\n              doc: doc\n            }\n          });\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee);\n  }));\n  return function executeUpdate(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n//  Custom UpdateTour Function\nexports.updateTour = catchAsync(/*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var galleryUrls;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // 1. CHECK IF FILES WERE UPLOADED\n          if (req.files) {\n            // 1a. Process imageCover (Field name: imageCover, maxCount: 1)\n            if (req.files.imageCover && req.files.imageCover.length) {\n              // Multer stores the URL in the .path property\n              req.body.imageCover = req.files.imageCover[0].path;\n            }\n\n            // 1b. Process images (Field name: images, maxCount: 3)\n            if (req.files.images && req.files.images.length) {\n              // Map the array of file objects to an array of URLs\n              galleryUrls = req.files.images.map(function (file) {\n                return file.path;\n              }); // Add the array of URLs to the request body\n              req.body.images = galleryUrls;\n            }\n          }\n\n          // 2. PASS CONTROL TO THE GENERIC UPDATE LOGIC\n          // Now req.body contains the updated fields (including the new URL(s)),\n          // and we can run the standard update logic.\n          _context2.n = 1;\n          return executeUpdate(req, res, next, Tour);\n        case 1:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexports.aliasTopTours = function (req, res, next) {\n  req.url = '/?sort=-ratingsAverage,price&fields=ratingsAverage,price,name,difficulty,summary&limit=5';\n  next();\n};\nexports.getAllTours = factory.getAll(Tour);\nexports.getTour = factory.getOne(Tour, {\n  path: 'reviews'\n});\nexports.createTour = factory.createOne(Tour);\n// exports.updateTour = factory.updateOne(Tour);\nexports.deleteTour = factory.deleteOne(Tour);\n\n// Get Tour By Slug\nexports.getTourBySlug = catchAsync(/*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(req, res, next) {\n    var tour;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          _context3.n = 1;\n          return Tour.findOne({\n            slug: req.params.slug\n          });\n        case 1:\n          tour = _context3.v;\n          if (tour) {\n            _context3.n = 2;\n            break;\n          }\n          return _context3.a(2, next(new appError('No tour found', 404)));\n        case 2:\n          res.status(200).json({\n            status: 'success',\n            data: {\n              doc: tour\n            }\n          });\n        case 3:\n          return _context3.a(2);\n      }\n    }, _callee3);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexports.getTourStats = catchAsync(/*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var stats;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          _context4.n = 1;\n          return Tour.aggregate([{\n            $match: {\n              ratingsAverage: {\n                $gte: 4.5\n              }\n            }\n          }, {\n            $group: {\n              _id: {\n                $toUpper: '$difficulty'\n              },\n              numTours: {\n                $sum: 1\n              },\n              numRatings: {\n                $sum: '$ratingsQuantity'\n              },\n              avgRating: {\n                $avg: '$ratingsAverage'\n              },\n              avgPrice: {\n                $avg: '$price'\n              },\n              minPrice: {\n                $min: '$price'\n              },\n              maxPrice: {\n                $max: '$price'\n              }\n            }\n          }, {\n            $sort: {\n              avgPrice: 1\n            }\n          }\n          // {\n          //   $match: { _id: { $ne: 'EASY' } },\n          // },\n          ]);\n        case 1:\n          stats = _context4.v;\n          res.status(200).json({\n            status: 'success',\n            data: {\n              stats: stats\n            }\n          });\n        case 2:\n          return _context4.a(2);\n      }\n    }, _callee4);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexports.getMonthlyPlan = catchAsync(/*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var year, plan;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          year = req.params.year * 1;\n          _context5.n = 1;\n          return Tour.aggregate([{\n            $unwind: '$startDates'\n          }, {\n            $match: {\n              startDates: {\n                $gte: new Date(\"\".concat(year, \"-01-01\")),\n                $lte: new Date(\"\".concat(year, \"-12-31\"))\n              }\n            }\n          }, {\n            $group: {\n              _id: {\n                $month: '$startDates'\n              },\n              numTourStarts: {\n                $sum: 1\n              },\n              tours: {\n                $push: '$name'\n              }\n            }\n          }, {\n            $addFields: {\n              month: '$_id'\n            }\n          }, {\n            $project: {\n              _id: 0\n            }\n          }, {\n            $sort: {\n              numTourStarts: -1\n            }\n          }, {\n            $limit: 12\n          }]);\n        case 1:\n          plan = _context5.v;\n          res.status(200).json({\n            status: 'success',\n            results: plan.length,\n            data: {\n              plan: plan\n            }\n          });\n        case 2:\n          return _context5.a(2);\n      }\n    }, _callee5);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nexports.getToursWithin = catchAsync(/*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(req, res, next) {\n    var _req$params, distance, latlng, unit, _latlng$split, _latlng$split2, lat, lng, radius, tours;\n    return _regenerator().w(function (_context6) {\n      while (1) switch (_context6.n) {\n        case 0:\n          _req$params = req.params, distance = _req$params.distance, latlng = _req$params.latlng, unit = _req$params.unit;\n          _latlng$split = latlng.split(','), _latlng$split2 = _slicedToArray(_latlng$split, 2), lat = _latlng$split2[0], lng = _latlng$split2[1];\n          radius = unit === 'mi' ? distance / 3963.2 : distance / 6378.1;\n          if (!lat || !lng) {\n            next(new appError('Please, provide latitude and longiture in the format lat, lng.', 400));\n          }\n          _context6.n = 1;\n          return Tour.find({\n            startLocation: {\n              $geoWithin: {\n                $centerSphere: [[lng, lat], radius]\n              }\n            }\n          });\n        case 1:\n          tours = _context6.v;\n          res.status(200).json({\n            status: 'success',\n            results: tours.length,\n            data: {\n              data: tours\n            }\n          });\n        case 2:\n          return _context6.a(2);\n      }\n    }, _callee6);\n  }));\n  return function (_x15, _x16, _x17) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nexports.getDistance = catchAsync(/*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$params2, latlng, unit, _latlng$split3, _latlng$split4, lat, lng, multiplier, distances;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          _req$params2 = req.params, latlng = _req$params2.latlng, unit = _req$params2.unit;\n          _latlng$split3 = latlng.split(','), _latlng$split4 = _slicedToArray(_latlng$split3, 2), lat = _latlng$split4[0], lng = _latlng$split4[1];\n          multiplier = unit === 'mi' ? 0.0006213712 : 0.001;\n          if (!lat || !lng) {\n            next(new appError('Please, provide latitude and longiture in the format lat, lng.', 400));\n          }\n          _context7.n = 1;\n          return Tour.aggregate([{\n            $geoNear: {\n              near: {\n                type: 'Point',\n                coordinates: [lng * 1, lat * 1]\n              },\n              distanceField: 'distance',\n              distanceMultiplier: multiplier\n            }\n          }, {\n            $project: {\n              distance: 1,\n              name: 1\n            }\n          }]);\n        case 1:\n          distances = _context7.v;\n          res.status(200).json({\n            status: 'success',\n            data: {\n              data: distances\n            }\n          });\n        case 2:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x18, _x19, _x20) {\n    return _ref7.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIlRvdXIiLCJyZXF1aXJlIiwiYXBwRXJyb3IiLCJjYXRjaEFzeW5jIiwiZmFjdG9yeSIsImV4ZWN1dGVVcGRhdGUiLCJfcmVmIiwiX2NhbGxlZSIsInJlcSIsInJlcyIsIm5leHQiLCJNb2RlbCIsImRvYyIsIl9jb250ZXh0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJwYXJhbXMiLCJpZCIsImJvZHkiLCJydW5WYWxpZGF0b3JzIiwic3RhdHVzIiwianNvbiIsImRhdGEiLCJfeCIsIl94MiIsIl94MyIsIl94NCIsImV4cG9ydHMiLCJ1cGRhdGVUb3VyIiwiX3JlZjIiLCJfY2FsbGVlMiIsImdhbGxlcnlVcmxzIiwiX2NvbnRleHQyIiwiZmlsZXMiLCJpbWFnZUNvdmVyIiwicGF0aCIsImltYWdlcyIsIm1hcCIsImZpbGUiLCJfeDUiLCJfeDYiLCJfeDciLCJhbGlhc1RvcFRvdXJzIiwidXJsIiwiZ2V0QWxsVG91cnMiLCJnZXRBbGwiLCJnZXRUb3VyIiwiZ2V0T25lIiwiY3JlYXRlVG91ciIsImNyZWF0ZU9uZSIsImRlbGV0ZVRvdXIiLCJkZWxldGVPbmUiLCJnZXRUb3VyQnlTbHVnIiwiX3JlZjMiLCJfY2FsbGVlMyIsInRvdXIiLCJfY29udGV4dDMiLCJmaW5kT25lIiwic2x1ZyIsIl94OCIsIl94OSIsIl94MCIsImdldFRvdXJTdGF0cyIsIl9yZWY0IiwiX2NhbGxlZTQiLCJzdGF0cyIsIl9jb250ZXh0NCIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsInJhdGluZ3NBdmVyYWdlIiwiJGd0ZSIsIiRncm91cCIsIl9pZCIsIiR0b1VwcGVyIiwibnVtVG91cnMiLCIkc3VtIiwibnVtUmF0aW5ncyIsImF2Z1JhdGluZyIsIiRhdmciLCJhdmdQcmljZSIsIm1pblByaWNlIiwiJG1pbiIsIm1heFByaWNlIiwiJG1heCIsIiRzb3J0IiwiX3gxIiwiX3gxMCIsIl94MTEiLCJnZXRNb250aGx5UGxhbiIsIl9yZWY1IiwiX2NhbGxlZTUiLCJ5ZWFyIiwicGxhbiIsIl9jb250ZXh0NSIsIiR1bndpbmQiLCJzdGFydERhdGVzIiwiRGF0ZSIsImNvbmNhdCIsIiRsdGUiLCIkbW9udGgiLCJudW1Ub3VyU3RhcnRzIiwidG91cnMiLCIkcHVzaCIsIiRhZGRGaWVsZHMiLCJtb250aCIsIiRwcm9qZWN0IiwiJGxpbWl0IiwicmVzdWx0cyIsIl94MTIiLCJfeDEzIiwiX3gxNCIsImdldFRvdXJzV2l0aGluIiwiX3JlZjYiLCJfY2FsbGVlNiIsIl9yZXEkcGFyYW1zIiwiZGlzdGFuY2UiLCJsYXRsbmciLCJ1bml0IiwiX2xhdGxuZyRzcGxpdCIsIl9sYXRsbmckc3BsaXQyIiwibGF0IiwibG5nIiwicmFkaXVzIiwiX2NvbnRleHQ2Iiwic3BsaXQiLCJfc2xpY2VkVG9BcnJheSIsImZpbmQiLCJzdGFydExvY2F0aW9uIiwiJGdlb1dpdGhpbiIsIiRjZW50ZXJTcGhlcmUiLCJfeDE1IiwiX3gxNiIsIl94MTciLCJnZXREaXN0YW5jZSIsIl9yZWY3IiwiX2NhbGxlZTciLCJfcmVxJHBhcmFtczIiLCJfbGF0bG5nJHNwbGl0MyIsIl9sYXRsbmckc3BsaXQ0IiwibXVsdGlwbGllciIsImRpc3RhbmNlcyIsIl9jb250ZXh0NyIsIiRnZW9OZWFyIiwibmVhciIsInR5cGUiLCJjb29yZGluYXRlcyIsImRpc3RhbmNlRmllbGQiLCJkaXN0YW5jZU11bHRpcGxpZXIiLCJuYW1lIiwiX3gxOCIsIl94MTkiLCJfeDIwIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsidG91ckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVG91ciA9IHJlcXVpcmUoJy4uL21vZGVscy90b3VyTW9kZWwnKTtcbmNvbnN0IGFwcEVycm9yID0gcmVxdWlyZSgnLi4vdXRpbHMvYXBwRXJyb3InKTtcbmNvbnN0IGNhdGNoQXN5bmMgPSByZXF1aXJlKCcuLi91dGlscy9jYXRjaEFzeW5jJyk7XG5cbmNvbnN0IGZhY3RvcnkgPSByZXF1aXJlKCcuL2hhbmRsZXJGYWN0b3J5Jyk7XG5cbmNvbnN0IGV4ZWN1dGVVcGRhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQsIE1vZGVsKSA9PiB7XG4gIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5wYXJhbXMuaWQsIHJlcS5ib2R5LCB7XG4gICAgbmV3OiB0cnVlLFxuICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXG4gIH0pO1xuXG4gIGlmICghZG9jKSB7XG4gICAgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdObyBkb2N1bWVudCBmb3VuZCB3aXRoIHRoYXQgSUQnLCA0MDQpKTtcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICBkYXRhOiB7XG4gICAgICBkb2MsXG4gICAgfSxcbiAgfSk7XG59O1xuXG4vLyDwn5SRIEN1c3RvbSBVcGRhdGVUb3VyIEZ1bmN0aW9uXG5leHBvcnRzLnVwZGF0ZVRvdXIgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAvLyAxLiBDSEVDSyBJRiBGSUxFUyBXRVJFIFVQTE9BREVEXG4gIGlmIChyZXEuZmlsZXMpIHtcbiAgICAvLyAxYS4gUHJvY2VzcyBpbWFnZUNvdmVyIChGaWVsZCBuYW1lOiBpbWFnZUNvdmVyLCBtYXhDb3VudDogMSlcbiAgICBpZiAocmVxLmZpbGVzLmltYWdlQ292ZXIgJiYgcmVxLmZpbGVzLmltYWdlQ292ZXIubGVuZ3RoKSB7XG4gICAgICAvLyBNdWx0ZXIgc3RvcmVzIHRoZSBVUkwgaW4gdGhlIC5wYXRoIHByb3BlcnR5XG4gICAgICByZXEuYm9keS5pbWFnZUNvdmVyID0gcmVxLmZpbGVzLmltYWdlQ292ZXJbMF0ucGF0aDtcbiAgICB9XG5cbiAgICAvLyAxYi4gUHJvY2VzcyBpbWFnZXMgKEZpZWxkIG5hbWU6IGltYWdlcywgbWF4Q291bnQ6IDMpXG4gICAgaWYgKHJlcS5maWxlcy5pbWFnZXMgJiYgcmVxLmZpbGVzLmltYWdlcy5sZW5ndGgpIHtcbiAgICAgIC8vIE1hcCB0aGUgYXJyYXkgb2YgZmlsZSBvYmplY3RzIHRvIGFuIGFycmF5IG9mIFVSTHNcbiAgICAgIGNvbnN0IGdhbGxlcnlVcmxzID0gcmVxLmZpbGVzLmltYWdlcy5tYXAoKGZpbGUpID0+IGZpbGUucGF0aCk7XG5cbiAgICAgIC8vIEFkZCB0aGUgYXJyYXkgb2YgVVJMcyB0byB0aGUgcmVxdWVzdCBib2R5XG4gICAgICByZXEuYm9keS5pbWFnZXMgPSBnYWxsZXJ5VXJscztcbiAgICB9XG4gIH1cblxuICAvLyAyLiBQQVNTIENPTlRST0wgVE8gVEhFIEdFTkVSSUMgVVBEQVRFIExPR0lDXG4gIC8vIE5vdyByZXEuYm9keSBjb250YWlucyB0aGUgdXBkYXRlZCBmaWVsZHMgKGluY2x1ZGluZyB0aGUgbmV3IFVSTChzKSksXG4gIC8vIGFuZCB3ZSBjYW4gcnVuIHRoZSBzdGFuZGFyZCB1cGRhdGUgbG9naWMuXG4gIGF3YWl0IGV4ZWN1dGVVcGRhdGUocmVxLCByZXMsIG5leHQsIFRvdXIpO1xufSk7XG5cbmV4cG9ydHMuYWxpYXNUb3BUb3VycyA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXEudXJsID1cbiAgICAnLz9zb3J0PS1yYXRpbmdzQXZlcmFnZSxwcmljZSZmaWVsZHM9cmF0aW5nc0F2ZXJhZ2UscHJpY2UsbmFtZSxkaWZmaWN1bHR5LHN1bW1hcnkmbGltaXQ9NSc7XG5cbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0cy5nZXRBbGxUb3VycyA9IGZhY3RvcnkuZ2V0QWxsKFRvdXIpO1xuZXhwb3J0cy5nZXRUb3VyID0gZmFjdG9yeS5nZXRPbmUoVG91ciwgeyBwYXRoOiAncmV2aWV3cycgfSk7XG5leHBvcnRzLmNyZWF0ZVRvdXIgPSBmYWN0b3J5LmNyZWF0ZU9uZShUb3VyKTtcbi8vIGV4cG9ydHMudXBkYXRlVG91ciA9IGZhY3RvcnkudXBkYXRlT25lKFRvdXIpO1xuZXhwb3J0cy5kZWxldGVUb3VyID0gZmFjdG9yeS5kZWxldGVPbmUoVG91cik7XG5cbi8vIEdldCBUb3VyIEJ5IFNsdWdcbmV4cG9ydHMuZ2V0VG91ckJ5U2x1ZyA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHRvdXIgPSBhd2FpdCBUb3VyLmZpbmRPbmUoeyBzbHVnOiByZXEucGFyYW1zLnNsdWcgfSk7XG4gIGlmICghdG91cikgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdObyB0b3VyIGZvdW5kJywgNDA0KSk7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3RhdHVzOiAnc3VjY2VzcycsIGRhdGE6IHsgZG9jOiB0b3VyIH0gfSk7XG59KTtcblxuZXhwb3J0cy5nZXRUb3VyU3RhdHMgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzdGF0cyA9IGF3YWl0IFRvdXIuYWdncmVnYXRlKFtcbiAgICB7XG4gICAgICAkbWF0Y2g6IHsgcmF0aW5nc0F2ZXJhZ2U6IHsgJGd0ZTogNC41IH0gfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICRncm91cDoge1xuICAgICAgICBfaWQ6IHsgJHRvVXBwZXI6ICckZGlmZmljdWx0eScgfSxcbiAgICAgICAgbnVtVG91cnM6IHsgJHN1bTogMSB9LFxuICAgICAgICBudW1SYXRpbmdzOiB7ICRzdW06ICckcmF0aW5nc1F1YW50aXR5JyB9LFxuICAgICAgICBhdmdSYXRpbmc6IHsgJGF2ZzogJyRyYXRpbmdzQXZlcmFnZScgfSxcbiAgICAgICAgYXZnUHJpY2U6IHsgJGF2ZzogJyRwcmljZScgfSxcbiAgICAgICAgbWluUHJpY2U6IHsgJG1pbjogJyRwcmljZScgfSxcbiAgICAgICAgbWF4UHJpY2U6IHsgJG1heDogJyRwcmljZScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkc29ydDoge1xuICAgICAgICBhdmdQcmljZTogMSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAvLyB7XG4gICAgLy8gICAkbWF0Y2g6IHsgX2lkOiB7ICRuZTogJ0VBU1knIH0gfSxcbiAgICAvLyB9LFxuICBdKTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgZGF0YToge1xuICAgICAgc3RhdHMsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRNb250aGx5UGxhbiA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHllYXIgPSByZXEucGFyYW1zLnllYXIgKiAxO1xuICBjb25zdCBwbGFuID0gYXdhaXQgVG91ci5hZ2dyZWdhdGUoW1xuICAgIHtcbiAgICAgICR1bndpbmQ6ICckc3RhcnREYXRlcycsXG4gICAgfSxcbiAgICB7XG4gICAgICAkbWF0Y2g6IHtcbiAgICAgICAgc3RhcnREYXRlczoge1xuICAgICAgICAgICRndGU6IG5ldyBEYXRlKGAke3llYXJ9LTAxLTAxYCksXG4gICAgICAgICAgJGx0ZTogbmV3IERhdGUoYCR7eWVhcn0tMTItMzFgKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkZ3JvdXA6IHtcbiAgICAgICAgX2lkOiB7ICRtb250aDogJyRzdGFydERhdGVzJyB9LFxuICAgICAgICBudW1Ub3VyU3RhcnRzOiB7ICRzdW06IDEgfSxcbiAgICAgICAgdG91cnM6IHsgJHB1c2g6ICckbmFtZScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkYWRkRmllbGRzOiB7IG1vbnRoOiAnJF9pZCcgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICRwcm9qZWN0OiB7IF9pZDogMCB9LFxuICAgIH0sXG4gICAge1xuICAgICAgJHNvcnQ6IHsgbnVtVG91clN0YXJ0czogLTEgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICRsaW1pdDogMTIsXG4gICAgfSxcbiAgXSk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIHJlc3VsdHM6IHBsYW4ubGVuZ3RoLFxuICAgIGRhdGE6IHtcbiAgICAgIHBsYW4sXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRUb3Vyc1dpdGhpbiA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgZGlzdGFuY2UsIGxhdGxuZywgdW5pdCB9ID0gcmVxLnBhcmFtcztcbiAgY29uc3QgW2xhdCwgbG5nXSA9IGxhdGxuZy5zcGxpdCgnLCcpO1xuXG4gIGNvbnN0IHJhZGl1cyA9IHVuaXQgPT09ICdtaScgPyBkaXN0YW5jZSAvIDM5NjMuMiA6IGRpc3RhbmNlIC8gNjM3OC4xO1xuXG4gIGlmICghbGF0IHx8ICFsbmcpIHtcbiAgICBuZXh0KFxuICAgICAgbmV3IGFwcEVycm9yKFxuICAgICAgICAnUGxlYXNlLCBwcm92aWRlIGxhdGl0dWRlIGFuZCBsb25naXR1cmUgaW4gdGhlIGZvcm1hdCBsYXQsIGxuZy4nLFxuICAgICAgICA0MDAsXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICBjb25zdCB0b3VycyA9IGF3YWl0IFRvdXIuZmluZCh7XG4gICAgc3RhcnRMb2NhdGlvbjoge1xuICAgICAgJGdlb1dpdGhpbjogeyAkY2VudGVyU3BoZXJlOiBbW2xuZywgbGF0XSwgcmFkaXVzXSB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICByZXN1bHRzOiB0b3Vycy5sZW5ndGgsXG4gICAgZGF0YToge1xuICAgICAgZGF0YTogdG91cnMsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXREaXN0YW5jZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgbGF0bG5nLCB1bml0IH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBbbGF0LCBsbmddID0gbGF0bG5nLnNwbGl0KCcsJyk7XG5cbiAgY29uc3QgbXVsdGlwbGllciA9IHVuaXQgPT09ICdtaScgPyAwLjAwMDYyMTM3MTIgOiAwLjAwMTtcblxuICBpZiAoIWxhdCB8fCAhbG5nKSB7XG4gICAgbmV4dChcbiAgICAgIG5ldyBhcHBFcnJvcihcbiAgICAgICAgJ1BsZWFzZSwgcHJvdmlkZSBsYXRpdHVkZSBhbmQgbG9uZ2l0dXJlIGluIHRoZSBmb3JtYXQgbGF0LCBsbmcuJyxcbiAgICAgICAgNDAwLFxuICAgICAgKSxcbiAgICApO1xuICB9XG5cbiAgY29uc3QgZGlzdGFuY2VzID0gYXdhaXQgVG91ci5hZ2dyZWdhdGUoW1xuICAgIHtcbiAgICAgICRnZW9OZWFyOiB7XG4gICAgICAgIG5lYXI6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbbG5nICogMSwgbGF0ICogMV0sXG4gICAgICAgIH0sXG4gICAgICAgIGRpc3RhbmNlRmllbGQ6ICdkaXN0YW5jZScsXG4gICAgICAgIGRpc3RhbmNlTXVsdGlwbGllcjogbXVsdGlwbGllcixcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkcHJvamVjdDoge1xuICAgICAgICBkaXN0YW5jZTogMSxcbiAgICAgICAgbmFtZTogMSxcbiAgICAgIH0sXG4gICAgfSxcbiAgXSk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIGRhdGE6IHtcbiAgICAgIGRhdGE6IGRpc3RhbmNlcyxcbiAgICB9LFxuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNBQUEsVUFBQUssbUJBQUEsQ0FBQUgsQ0FBQSx1QkFBQVYsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUUsQ0FBQSxFQUFBQyxDQUFBLEVBQUFHLENBQUEsRUFBQUksQ0FBQSxNQUFBQyxDQUFBLEdBQUFYLENBQUEsUUFBQVksQ0FBQSxPQUFBQyxDQUFBLEtBQUFGLENBQUEsS0FBQWIsQ0FBQSxLQUFBZ0IsQ0FBQSxFQUFBcEIsQ0FBQSxFQUFBcUIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFOLENBQUEsRUFBQU0sQ0FB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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","Tour","require","appError","catchAsync","factory","executeUpdate","_ref","_callee","req","res","next","Model","doc","_context","findByIdAndUpdate","params","id","body","runValidators","status","json","data","_x","_x2","_x3","_x4","exports","updateTour","_ref2","_callee2","galleryUrls","_context2","files","imageCover","path","images","map","file","_x5","_x6","_x7","aliasTopTours","url","getAllTours","getAll","getTour","getOne","createTour","createOne","deleteTour","deleteOne","getTourBySlug","_ref3","_callee3","tour","_context3","findOne","slug","_x8","_x9","_x0","getTourStats","_ref4","_callee4","stats","_context4","aggregate","$match","ratingsAverage","$gte","$group","_id","$toUpper","numTours","$sum","numRatings","avgRating","$avg","avgPrice","minPrice","$min","maxPrice","$max","$sort","_x1","_x10","_x11","getMonthlyPlan","_ref5","_callee5","year","plan","_context5","$unwind","startDates","Date","concat","$lte","$month","numTourStarts","tours","$push","$addFields","month","$project","$limit","results","_x12","_x13","_x14","getToursWithin","_ref6","_callee6","_req$params","distance","latlng","unit","_latlng$split","_latlng$split2","lat","lng","radius","_context6","split","_slicedToArray","find","startLocation","$geoWithin","$centerSphere","_x15","_x16","_x17","getDistance","_ref7","_callee7","_req$params2","_latlng$split3","_latlng$split4","multiplier","distances","_context7","$geoNear","near","type","coordinates","distanceField","distanceMultiplier","name","_x18","_x19","_x20"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["tourController.js"],"sourcesContent":["const Tour = require('../models/tourModel');\nconst appError = require('../utils/appError');\nconst catchAsync = require('../utils/catchAsync');\n\nconst factory = require('./handlerFactory');\n\nconst executeUpdate = async (req, res, next, Model) => {\n  const doc = await Model.findByIdAndUpdate(req.params.id, req.body, {\n    new: true,\n    runValidators: true,\n  });\n\n  if (!doc) {\n    return next(new appError('No document found with that ID', 404));\n  }\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      doc,\n    },\n  });\n};\n\n//  Custom UpdateTour Function\nexports.updateTour = catchAsync(async (req, res, next) => {\n  // 1. CHECK IF FILES WERE UPLOADED\n  if (req.files) {\n    // 1a. Process imageCover (Field name: imageCover, maxCount: 1)\n    if (req.files.imageCover && req.files.imageCover.length) {\n      // Multer stores the URL in the .path property\n      req.body.imageCover = req.files.imageCover[0].path;\n    }\n\n    // 1b. Process images (Field name: images, maxCount: 3)\n    if (req.files.images && req.files.images.length) {\n      // Map the array of file objects to an array of URLs\n      const galleryUrls = req.files.images.map((file) => file.path);\n\n      // Add the array of URLs to the request body\n      req.body.images = galleryUrls;\n    }\n  }\n\n  // 2. PASS CONTROL TO THE GENERIC UPDATE LOGIC\n  // Now req.body contains the updated fields (including the new URL(s)),\n  // and we can run the standard update logic.\n  await executeUpdate(req, res, next, Tour);\n});\n\nexports.aliasTopTours = (req, res, next) => {\n  req.url =\n    '/?sort=-ratingsAverage,price&fields=ratingsAverage,price,name,difficulty,summary&limit=5';\n\n  next();\n};\n\nexports.getAllTours = factory.getAll(Tour);\nexports.getTour = factory.getOne(Tour, { path: 'reviews' });\nexports.createTour = factory.createOne(Tour);\n// exports.updateTour = factory.updateOne(Tour);\nexports.deleteTour = factory.deleteOne(Tour);\n\n// Get Tour By Slug\nexports.getTourBySlug = catchAsync(async (req, res, next) => {\n  const tour = await Tour.findOne({ slug: req.params.slug });\n  if (!tour) return next(new appError('No tour found', 404));\n  res.status(200).json({ status: 'success', data: { doc: tour } });\n});\n\nexports.getTourStats = catchAsync(async (req, res, next) => {\n  const stats = await Tour.aggregate([\n    {\n      $match: { ratingsAverage: { $gte: 4.5 } },\n    },\n    {\n      $group: {\n        _id: { $toUpper: '$difficulty' },\n        numTours: { $sum: 1 },\n        numRatings: { $sum: '$ratingsQuantity' },\n        avgRating: { $avg: '$ratingsAverage' },\n        avgPrice: { $avg: '$price' },\n        minPrice: { $min: '$price' },\n        maxPrice: { $max: '$price' },\n      },\n    },\n    {\n      $sort: {\n        avgPrice: 1,\n      },\n    },\n    // {\n    //   $match: { _id: { $ne: 'EASY' } },\n    // },\n  ]);\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      stats,\n    },\n  });\n});\n\nexports.getMonthlyPlan = catchAsync(async (req, res, next) => {\n  const year = req.params.year * 1;\n  const plan = await Tour.aggregate([\n    {\n      $unwind: '$startDates',\n    },\n    {\n      $match: {\n        startDates: {\n          $gte: new Date(`${year}-01-01`),\n          $lte: new Date(`${year}-12-31`),\n        },\n      },\n    },\n    {\n      $group: {\n        _id: { $month: '$startDates' },\n        numTourStarts: { $sum: 1 },\n        tours: { $push: '$name' },\n      },\n    },\n    {\n      $addFields: { month: '$_id' },\n    },\n    {\n      $project: { _id: 0 },\n    },\n    {\n      $sort: { numTourStarts: -1 },\n    },\n    {\n      $limit: 12,\n    },\n  ]);\n\n  res.status(200).json({\n    status: 'success',\n    results: plan.length,\n    data: {\n      plan,\n    },\n  });\n});\n\nexports.getToursWithin = catchAsync(async (req, res, next) => {\n  const { distance, latlng, unit } = req.params;\n  const [lat, lng] = latlng.split(',');\n\n  const radius = unit === 'mi' ? distance / 3963.2 : distance / 6378.1;\n\n  if (!lat || !lng) {\n    next(\n      new appError(\n        'Please, provide latitude and longiture in the format lat, lng.',\n        400,\n      ),\n    );\n  }\n\n  const tours = await Tour.find({\n    startLocation: {\n      $geoWithin: { $centerSphere: [[lng, lat], radius] },\n    },\n  });\n\n  res.status(200).json({\n    status: 'success',\n    results: tours.length,\n    data: {\n      data: tours,\n    },\n  });\n});\n\nexports.getDistance = catchAsync(async (req, res, next) => {\n  const { latlng, unit } = req.params;\n  const [lat, lng] = latlng.split(',');\n\n  const multiplier = unit === 'mi' ? 0.0006213712 : 0.001;\n\n  if (!lat || !lng) {\n    next(\n      new appError(\n        'Please, provide latitude and longiture in the format lat, lng.',\n        400,\n      ),\n    );\n  }\n\n  const distances = await Tour.aggregate([\n    {\n      $geoNear: {\n        near: {\n          type: 'Point',\n          coordinates: [lng * 1, lat * 1],\n        },\n        distanceField: 'distance',\n        distanceMultiplier: multiplier,\n      },\n    },\n    {\n      $project: {\n        distance: 1,\n        name: 1,\n      },\n    },\n  ]);\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      data: distances,\n    },\n  });\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1764940594469},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/models/tourModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar mongoose = require('mongoose');\nvar slugify = require('slugify');\n// const User = require('./userModel');\n// const validator = require('validator');\n\nvar tourSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'A tour must have a name'],\n    unique: true,\n    trim: true,\n    maxlength: [40, 'A tour name must have less or equal then 40 characters'],\n    minlength: [10, 'A tour name must have more or equal then 10 characters']\n    // validate: [validator.isAlpha, 'Tour name must only contain characters']\n  },\n  slug: String,\n  duration: {\n    type: Number,\n    required: [true, 'A tour must have a duration']\n  },\n  maxGroupSize: {\n    type: Number,\n    required: [true, 'A tour must have a group size']\n  },\n  difficulty: {\n    type: String,\n    required: [true, 'A tour must have a difficulty'],\n    \"enum\": {\n      values: ['easy', 'medium', 'difficult'],\n      message: 'Difficulty is either: easy, medium, difficult'\n    }\n  },\n  ratingsAverage: {\n    type: Number,\n    \"default\": 4.5,\n    min: [1, 'Rating must be above 1.0'],\n    max: [5, 'Rating must be below 5.0'],\n    set: function set(val) {\n      return Math.round(val * 10) / 10;\n    } // 4.666666, 46.6666, 47, 4.7\n  },\n  ratingsQuantity: {\n    type: Number,\n    \"default\": 0\n  },\n  price: {\n    type: Number,\n    required: [true, 'A tour must have a price']\n  },\n  priceDiscount: {\n    type: Number,\n    validate: {\n      validator: function validator(val) {\n        // this only points to current doc on NEW document creation\n        return val < this.price;\n      },\n      message: 'Discount price ({VALUE}) should be below regular price'\n    }\n  },\n  summary: {\n    type: String,\n    trim: true,\n    required: [true, 'A tour must have a description']\n  },\n  description: {\n    type: String,\n    trim: true\n  },\n  imageCover: {\n    type: String,\n    required: [true, 'A tour must have a cover image']\n  },\n  images: [String],\n  createdAt: {\n    type: Date,\n    \"default\": Date.now(),\n    select: false\n  },\n  startDates: [Date],\n  secretTour: {\n    type: Boolean,\n    \"default\": false\n  },\n  startLocation: {\n    // GeoJSON\n    type: {\n      type: String,\n      \"default\": 'Point',\n      \"enum\": ['Point']\n    },\n    coordinates: [Number],\n    address: String,\n    description: String\n  },\n  locations: [{\n    type: {\n      type: String,\n      \"default\": 'Point',\n      \"enum\": ['Point']\n    },\n    coordinates: [Number],\n    address: String,\n    description: String,\n    day: Number\n  }],\n  guides: [{\n    type: mongoose.Schema.ObjectId,\n    ref: 'User'\n  }]\n}, {\n  toJSON: {\n    virtuals: true\n  },\n  toObject: {\n    virtuals: true\n  }\n});\n\n// tourSchema.index({ price: 1 });\ntourSchema.index({\n  price: 1,\n  ratingsAverage: -1\n});\ntourSchema.index({\n  slug: 1\n});\ntourSchema.index({\n  startLocation: '2dsphere'\n});\ntourSchema.virtual('durationWeeks').get(function () {\n  return this.duration / 7;\n});\n\n// Virtual populate\ntourSchema.virtual('reviews', {\n  ref: 'Review',\n  foreignField: 'tour',\n  localField: '_id'\n});\n\n// DOCUMENT MIDDLEWARE: runs before .save() and .create()\ntourSchema.pre('save', function (next) {\n  this.slug = slugify(this.name, {\n    lower: true\n  });\n  next();\n});\n\n// tourSchema.pre('save', async function(next) {\n//   const guidesPromises = this.guides.map(async id => await User.findById(id));\n//   this.guides = await Promise.all(guidesPromises);\n//   next();\n// });\n\n// tourSchema.pre('save', function(next) {\n//   console.log('Will save document...');\n//   next();\n// });\n\n// tourSchema.post('save', function(doc, next) {\n//   console.log(doc);\n//   next();\n// });\n\n// QUERY MIDDLEWARE\n// tourSchema.pre('find', function(next) {\ntourSchema.pre(/^find/, function (next) {\n  this.find({\n    secretTour: {\n      $ne: true\n    }\n  });\n  this.start = Date.now();\n  next();\n});\ntourSchema.pre(/^find/, function (next) {\n  this.populate({\n    path: 'guides',\n    select: '-__v -passwordChangedAt'\n  });\n  next();\n});\n\n// tourSchema.post(/^find/, function(docs, next) {\n//   console.log(`Query took ${Date.now() - this.start} milliseconds!`);\n//   next();\n// });\n\n// AGGREGATION MIDDLEWARE\n// tourSchema.pre('aggregate', function(next) {\n//   this.pipeline().unshift({ $match: { secretTour: { $ne: true } } });\n\n//   console.log(this.pipeline());\n//   next();\n// });\n\nvar Tour = mongoose.model('Tour', tourSchema);\nmodule.exports = Tour;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJzbHVnaWZ5IiwidG91clNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJ0cmltIiwibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwic2x1ZyIsImR1cmF0aW9uIiwiTnVtYmVyIiwibWF4R3JvdXBTaXplIiwiZGlmZmljdWx0eSIsInZhbHVlcyIsIm1lc3NhZ2UiLCJyYXRpbmdzQXZlcmFnZSIsIm1pbiIsIm1heCIsInNldCIsInZhbCIsIk1hdGgiLCJyb3VuZCIsInJhdGluZ3NRdWFudGl0eSIsInByaWNlIiwicHJpY2VEaXNjb3VudCIsInZhbGlkYXRlIiwidmFsaWRhdG9yIiwic3VtbWFyeSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VDb3ZlciIsImltYWdlcyIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJzZWxlY3QiLCJzdGFydERhdGVzIiwic2VjcmV0VG91ciIsIkJvb2xlYW4iLCJzdGFydExvY2F0aW9uIiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwibG9jYXRpb25zIiwiZGF5IiwiZ3VpZGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ0b0pTT04iLCJ2aXJ0dWFscyIsInRvT2JqZWN0IiwiaW5kZXgiLCJ2aXJ0dWFsIiwiZ2V0IiwiZm9yZWlnbkZpZWxkIiwibG9jYWxGaWVsZCIsInByZSIsIm5leHQiLCJsb3dlciIsImZpbmQiLCIkbmUiLCJzdGFydCIsInBvcHVsYXRlIiwicGF0aCIsIlRvdXIiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsidG91ck1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHNsdWdpZnkgPSByZXF1aXJlKCdzbHVnaWZ5Jyk7XG4vLyBjb25zdCBVc2VyID0gcmVxdWlyZSgnLi91c2VyTW9kZWwnKTtcbi8vIGNvbnN0IHZhbGlkYXRvciA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpO1xuXG5jb25zdCB0b3VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ0EgdG91ciBtdXN0IGhhdmUgYSBuYW1lJ10sXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgICAgbWF4bGVuZ3RoOiBbNDAsICdBIHRvdXIgbmFtZSBtdXN0IGhhdmUgbGVzcyBvciBlcXVhbCB0aGVuIDQwIGNoYXJhY3RlcnMnXSxcbiAgICAgIG1pbmxlbmd0aDogWzEwLCAnQSB0b3VyIG5hbWUgbXVzdCBoYXZlIG1vcmUgb3IgZXF1YWwgdGhlbiAxMCBjaGFyYWN0ZXJzJ10sXG4gICAgICAvLyB2YWxpZGF0ZTogW3ZhbGlkYXRvci5pc0FscGhhLCAnVG91ciBuYW1lIG11c3Qgb25seSBjb250YWluIGNoYXJhY3RlcnMnXVxuICAgIH0sXG4gICAgc2x1ZzogU3RyaW5nLFxuICAgIGR1cmF0aW9uOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdBIHRvdXIgbXVzdCBoYXZlIGEgZHVyYXRpb24nXSxcbiAgICB9LFxuICAgIG1heEdyb3VwU2l6ZToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnQSB0b3VyIG11c3QgaGF2ZSBhIGdyb3VwIHNpemUnXSxcbiAgICB9LFxuICAgIGRpZmZpY3VsdHk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ0EgdG91ciBtdXN0IGhhdmUgYSBkaWZmaWN1bHR5J10sXG4gICAgICBlbnVtOiB7XG4gICAgICAgIHZhbHVlczogWydlYXN5JywgJ21lZGl1bScsICdkaWZmaWN1bHQnXSxcbiAgICAgICAgbWVzc2FnZTogJ0RpZmZpY3VsdHkgaXMgZWl0aGVyOiBlYXN5LCBtZWRpdW0sIGRpZmZpY3VsdCcsXG4gICAgICB9LFxuICAgIH0sXG4gICAgcmF0aW5nc0F2ZXJhZ2U6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDQuNSxcbiAgICAgIG1pbjogWzEsICdSYXRpbmcgbXVzdCBiZSBhYm92ZSAxLjAnXSxcbiAgICAgIG1heDogWzUsICdSYXRpbmcgbXVzdCBiZSBiZWxvdyA1LjAnXSxcbiAgICAgIHNldDogKHZhbCkgPT4gTWF0aC5yb3VuZCh2YWwgKiAxMCkgLyAxMCwgLy8gNC42NjY2NjYsIDQ2LjY2NjYsIDQ3LCA0LjdcbiAgICB9LFxuICAgIHJhdGluZ3NRdWFudGl0eToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMCxcbiAgICB9LFxuICAgIHByaWNlOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdBIHRvdXIgbXVzdCBoYXZlIGEgcHJpY2UnXSxcbiAgICB9LFxuICAgIHByaWNlRGlzY291bnQ6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgIC8vIHRoaXMgb25seSBwb2ludHMgdG8gY3VycmVudCBkb2Mgb24gTkVXIGRvY3VtZW50IGNyZWF0aW9uXG4gICAgICAgICAgcmV0dXJuIHZhbCA8IHRoaXMucHJpY2U7XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6ICdEaXNjb3VudCBwcmljZSAoe1ZBTFVFfSkgc2hvdWxkIGJlIGJlbG93IHJlZ3VsYXIgcHJpY2UnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHN1bW1hcnk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHRyaW06IHRydWUsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdBIHRvdXIgbXVzdCBoYXZlIGEgZGVzY3JpcHRpb24nXSxcbiAgICB9LFxuICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgaW1hZ2VDb3Zlcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnQSB0b3VyIG11c3QgaGF2ZSBhIGNvdmVyIGltYWdlJ10sXG4gICAgfSxcbiAgICBpbWFnZXM6IFtTdHJpbmddLFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93KCksXG4gICAgICBzZWxlY3Q6IGZhbHNlLFxuICAgIH0sXG4gICAgc3RhcnREYXRlczogW0RhdGVdLFxuICAgIHNlY3JldFRvdXI6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICAgIHN0YXJ0TG9jYXRpb246IHtcbiAgICAgIC8vIEdlb0pTT05cbiAgICAgIHR5cGU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnUG9pbnQnLFxuICAgICAgICBlbnVtOiBbJ1BvaW50J10sXG4gICAgICB9LFxuICAgICAgY29vcmRpbmF0ZXM6IFtOdW1iZXJdLFxuICAgICAgYWRkcmVzczogU3RyaW5nLFxuICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgICB9LFxuICAgIGxvY2F0aW9uczogW1xuICAgICAge1xuICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGRlZmF1bHQ6ICdQb2ludCcsXG4gICAgICAgICAgZW51bTogWydQb2ludCddLFxuICAgICAgICB9LFxuICAgICAgICBjb29yZGluYXRlczogW051bWJlcl0sXG4gICAgICAgIGFkZHJlc3M6IFN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgICAgICAgZGF5OiBOdW1iZXIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgZ3VpZGVzOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5PYmplY3RJZCxcbiAgICAgICAgcmVmOiAnVXNlcicsXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcbiAgICB0b09iamVjdDogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB9LFxuKTtcblxuLy8gdG91clNjaGVtYS5pbmRleCh7IHByaWNlOiAxIH0pO1xudG91clNjaGVtYS5pbmRleCh7IHByaWNlOiAxLCByYXRpbmdzQXZlcmFnZTogLTEgfSk7XG50b3VyU2NoZW1hLmluZGV4KHsgc2x1ZzogMSB9KTtcbnRvdXJTY2hlbWEuaW5kZXgoeyBzdGFydExvY2F0aW9uOiAnMmRzcGhlcmUnIH0pO1xuXG50b3VyU2NoZW1hLnZpcnR1YWwoJ2R1cmF0aW9uV2Vla3MnKS5nZXQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5kdXJhdGlvbiAvIDc7XG59KTtcblxuLy8gVmlydHVhbCBwb3B1bGF0ZVxudG91clNjaGVtYS52aXJ0dWFsKCdyZXZpZXdzJywge1xuICByZWY6ICdSZXZpZXcnLFxuICBmb3JlaWduRmllbGQ6ICd0b3VyJyxcbiAgbG9jYWxGaWVsZDogJ19pZCcsXG59KTtcblxuLy8gRE9DVU1FTlQgTUlERExFV0FSRTogcnVucyBiZWZvcmUgLnNhdmUoKSBhbmQgLmNyZWF0ZSgpXG50b3VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuc2x1ZyA9IHNsdWdpZnkodGhpcy5uYW1lLCB7IGxvd2VyOiB0cnVlIH0pO1xuICBuZXh0KCk7XG59KTtcblxuLy8gdG91clNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7XG4vLyAgIGNvbnN0IGd1aWRlc1Byb21pc2VzID0gdGhpcy5ndWlkZXMubWFwKGFzeW5jIGlkID0+IGF3YWl0IFVzZXIuZmluZEJ5SWQoaWQpKTtcbi8vICAgdGhpcy5ndWlkZXMgPSBhd2FpdCBQcm9taXNlLmFsbChndWlkZXNQcm9taXNlcyk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG4vLyB0b3VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcbi8vICAgY29uc29sZS5sb2coJ1dpbGwgc2F2ZSBkb2N1bWVudC4uLicpO1xuLy8gICBuZXh0KCk7XG4vLyB9KTtcblxuLy8gdG91clNjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24oZG9jLCBuZXh0KSB7XG4vLyAgIGNvbnNvbGUubG9nKGRvYyk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG4vLyBRVUVSWSBNSURETEVXQVJFXG4vLyB0b3VyU2NoZW1hLnByZSgnZmluZCcsIGZ1bmN0aW9uKG5leHQpIHtcbnRvdXJTY2hlbWEucHJlKC9eZmluZC8sIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuZmluZCh7IHNlY3JldFRvdXI6IHsgJG5lOiB0cnVlIH0gfSk7XG5cbiAgdGhpcy5zdGFydCA9IERhdGUubm93KCk7XG4gIG5leHQoKTtcbn0pO1xuXG50b3VyU2NoZW1hLnByZSgvXmZpbmQvLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLnBvcHVsYXRlKHtcbiAgICBwYXRoOiAnZ3VpZGVzJyxcbiAgICBzZWxlY3Q6ICctX192IC1wYXNzd29yZENoYW5nZWRBdCcsXG4gIH0pO1xuXG4gIG5leHQoKTtcbn0pO1xuXG4vLyB0b3VyU2NoZW1hLnBvc3QoL15maW5kLywgZnVuY3Rpb24oZG9jcywgbmV4dCkge1xuLy8gICBjb25zb2xlLmxvZyhgUXVlcnkgdG9vayAke0RhdGUubm93KCkgLSB0aGlzLnN0YXJ0fSBtaWxsaXNlY29uZHMhYCk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG4vLyBBR0dSRUdBVElPTiBNSURETEVXQVJFXG4vLyB0b3VyU2NoZW1hLnByZSgnYWdncmVnYXRlJywgZnVuY3Rpb24obmV4dCkge1xuLy8gICB0aGlzLnBpcGVsaW5lKCkudW5zaGlmdCh7ICRtYXRjaDogeyBzZWNyZXRUb3VyOiB7ICRuZTogdHJ1ZSB9IH0gfSk7XG5cbi8vICAgY29uc29sZS5sb2codGhpcy5waXBlbGluZSgpKTtcbi8vICAgbmV4dCgpO1xuLy8gfSk7XG5cbmNvbnN0IFRvdXIgPSBtb25nb29zZS5tb2RlbCgnVG91cicsIHRvdXJTY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvdXI7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLElBQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQztBQUNBOztBQUVBLElBQU1FLFVBQVUsR0FBRyxJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FDcEM7RUFDRUMsSUFBSSxFQUFFO0lBQ0pDLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUseUJBQXlCLENBQUM7SUFDM0NDLE1BQU0sRUFBRSxJQUFJO0lBQ1pDLElBQUksRUFBRSxJQUFJO0lBQ1ZDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSx3REFBd0QsQ0FBQztJQUN6RUMsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLHdEQUF3RDtJQUN4RTtFQUNGLENBQUM7RUFDREMsSUFBSSxFQUFFTixNQUFNO0VBQ1pPLFFBQVEsRUFBRTtJQUNSUixJQUFJLEVBQUVTLE1BQU07SUFDWlAsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLDZCQUE2QjtFQUNoRCxDQUFDO0VBQ0RRLFlBQVksRUFBRTtJQUNaVixJQUFJLEVBQUVTLE1BQU07SUFDWlAsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLCtCQUErQjtFQUNsRCxDQUFDO0VBQ0RTLFVBQVUsRUFBRTtJQUNWWCxJQUFJLEVBQUVDLE1BQU07SUFDWkMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLCtCQUErQixDQUFDO0lBQ2pELFFBQU07TUFDSlUsTUFBTSxFQUFFLENBQUMsTUFBTSxF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","map":{"version":3,"names":["mongoose","require","slugify","tourSchema","Schema","name","type","String","required","unique","trim","maxlength","minlength","slug","duration","Number","maxGroupSize","difficulty","values","message","ratingsAverage","min","max","set","val","Math","round","ratingsQuantity","price","priceDiscount","validate","validator","summary","description","imageCover","images","createdAt","Date","now","select","startDates","secretTour","Boolean","startLocation","coordinates","address","locations","day","guides","ObjectId","ref","toJSON","virtuals","toObject","index","virtual","get","foreignField","localField","pre","next","lower","find","$ne","start","populate","path","Tour","model","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/models/","sources":["tourModel.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst slugify = require('slugify');\n// const User = require('./userModel');\n// const validator = require('validator');\n\nconst tourSchema = new mongoose.Schema(\n  {\n    name: {\n      type: String,\n      required: [true, 'A tour must have a name'],\n      unique: true,\n      trim: true,\n      maxlength: [40, 'A tour name must have less or equal then 40 characters'],\n      minlength: [10, 'A tour name must have more or equal then 10 characters'],\n      // validate: [validator.isAlpha, 'Tour name must only contain characters']\n    },\n    slug: String,\n    duration: {\n      type: Number,\n      required: [true, 'A tour must have a duration'],\n    },\n    maxGroupSize: {\n      type: Number,\n      required: [true, 'A tour must have a group size'],\n    },\n    difficulty: {\n      type: String,\n      required: [true, 'A tour must have a difficulty'],\n      enum: {\n        values: ['easy', 'medium', 'difficult'],\n        message: 'Difficulty is either: easy, medium, difficult',\n      },\n    },\n    ratingsAverage: {\n      type: Number,\n      default: 4.5,\n      min: [1, 'Rating must be above 1.0'],\n      max: [5, 'Rating must be below 5.0'],\n      set: (val) => Math.round(val * 10) / 10, // 4.666666, 46.6666, 47, 4.7\n    },\n    ratingsQuantity: {\n      type: Number,\n      default: 0,\n    },\n    price: {\n      type: Number,\n      required: [true, 'A tour must have a price'],\n    },\n    priceDiscount: {\n      type: Number,\n      validate: {\n        validator: function (val) {\n          // this only points to current doc on NEW document creation\n          return val < this.price;\n        },\n        message: 'Discount price ({VALUE}) should be below regular price',\n      },\n    },\n    summary: {\n      type: String,\n      trim: true,\n      required: [true, 'A tour must have a description'],\n    },\n    description: {\n      type: String,\n      trim: true,\n    },\n    imageCover: {\n      type: String,\n      required: [true, 'A tour must have a cover image'],\n    },\n    images: [String],\n    createdAt: {\n      type: Date,\n      default: Date.now(),\n      select: false,\n    },\n    startDates: [Date],\n    secretTour: {\n      type: Boolean,\n      default: false,\n    },\n    startLocation: {\n      // GeoJSON\n      type: {\n        type: String,\n        default: 'Point',\n        enum: ['Point'],\n      },\n      coordinates: [Number],\n      address: String,\n      description: String,\n    },\n    locations: [\n      {\n        type: {\n          type: String,\n          default: 'Point',\n          enum: ['Point'],\n        },\n        coordinates: [Number],\n        address: String,\n        description: String,\n        day: Number,\n      },\n    ],\n    guides: [\n      {\n        type: mongoose.Schema.ObjectId,\n        ref: 'User',\n      },\n    ],\n  },\n  {\n    toJSON: { virtuals: true },\n    toObject: { virtuals: true },\n  },\n);\n\n// tourSchema.index({ price: 1 });\ntourSchema.index({ price: 1, ratingsAverage: -1 });\ntourSchema.index({ slug: 1 });\ntourSchema.index({ startLocation: '2dsphere' });\n\ntourSchema.virtual('durationWeeks').get(function () {\n  return this.duration / 7;\n});\n\n// Virtual populate\ntourSchema.virtual('reviews', {\n  ref: 'Review',\n  foreignField: 'tour',\n  localField: '_id',\n});\n\n// DOCUMENT MIDDLEWARE: runs before .save() and .create()\ntourSchema.pre('save', function (next) {\n  this.slug = slugify(this.name, { lower: true });\n  next();\n});\n\n// tourSchema.pre('save', async function(next) {\n//   const guidesPromises = this.guides.map(async id => await User.findById(id));\n//   this.guides = await Promise.all(guidesPromises);\n//   next();\n// });\n\n// tourSchema.pre('save', function(next) {\n//   console.log('Will save document...');\n//   next();\n// });\n\n// tourSchema.post('save', function(doc, next) {\n//   console.log(doc);\n//   next();\n// });\n\n// QUERY MIDDLEWARE\n// tourSchema.pre('find', function(next) {\ntourSchema.pre(/^find/, function (next) {\n  this.find({ secretTour: { $ne: true } });\n\n  this.start = Date.now();\n  next();\n});\n\ntourSchema.pre(/^find/, function (next) {\n  this.populate({\n    path: 'guides',\n    select: '-__v -passwordChangedAt',\n  });\n\n  next();\n});\n\n// tourSchema.post(/^find/, function(docs, next) {\n//   console.log(`Query took ${Date.now() - this.start} milliseconds!`);\n//   next();\n// });\n\n// AGGREGATION MIDDLEWARE\n// tourSchema.pre('aggregate', function(next) {\n//   this.pipeline().unshift({ $match: { secretTour: { $ne: true } } });\n\n//   console.log(this.pipeline());\n//   next();\n// });\n\nconst Tour = mongoose.model('Tour', tourSchema);\n\nmodule.exports = Tour;\n"],"mappings":"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","ignoreList":[]}},"mtime":1762502227726},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/catchAsync.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nmodule.exports = function (fn) {\n  return function (req, res, next) {\n    fn(req, res, next)[\"catch\"](function (err) {\n      return next(err);\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiZm4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL3V0aWxzLyIsInNvdXJjZXMiOlsiY2F0Y2hBc3luYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IChmbikgPT4ge1xuICByZXR1cm4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgZm4ocmVxLCByZXMsIG5leHQpLmNhdGNoKChlcnIpID0+IG5leHQoZXJyKSk7XG4gIH07XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFDQyxFQUFFLEVBQUs7RUFDdkIsT0FBTyxVQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFLO0lBQ3pCSCxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLENBQUMsU0FBTSxDQUFDLFVBQUNDLEdBQUc7TUFBQSxPQUFLRCxJQUFJLENBQUNDLEdBQUcsQ0FBQztJQUFBLEVBQUM7RUFDOUMsQ0FBQztBQUNILENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["module","exports","fn","req","res","next","err"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["catchAsync.js"],"sourcesContent":["module.exports = (fn) => {\n  return (req, res, next) => {\n    fn(req, res, next).catch((err) => next(err));\n  };\n};\n"],"mappings":";;AAAAA,MAAM,CAACC,OAAO,GAAG,UAACC,EAAE,EAAK;EACvB,OAAO,UAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;IACzBH,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC,SAAM,CAAC,UAACC,GAAG;MAAA,OAAKD,IAAI,CAACC,GAAG,CAAC;IAAA,EAAC;EAC9C,CAAC;AACH,CAAC","ignoreList":[]}},"mtime":1762243431370},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/handlerFactory.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar catchAsync = require('./../utils/catchAsync');\nvar appError = require('./../utils/appError');\nvar APIFeatures = require('../utils/apiFeatures');\nexports.deleteOne = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next) {\n      var doc;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return Model.findByIdAndDelete(req.params.id);\n          case 1:\n            doc = _context.v;\n            if (doc) {\n              _context.n = 2;\n              break;\n            }\n            return _context.a(2, next(new appError('No document found with that ID', 404)));\n          case 2:\n            res.status(204).json({\n              status: 'success',\n              data: {\n                doc: null\n              }\n            });\n          case 3:\n            return _context.a(2);\n        }\n      }, _callee);\n    }));\n    return function (_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\nexports.updateOne = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n      var doc;\n      return _regenerator().w(function (_context2) {\n        while (1) switch (_context2.n) {\n          case 0:\n            _context2.n = 1;\n            return Model.findByIdAndUpdate(req.params.id, req.body, {\n              \"new\": true,\n              runValidators: true\n            });\n          case 1:\n            doc = _context2.v;\n            if (doc) {\n              _context2.n = 2;\n              break;\n            }\n            return _context2.a(2, next(new appError('No document found with that ID', 404)));\n          case 2:\n            res.status(200).json({\n              status: 'success',\n              data: {\n                doc: doc\n              }\n            });\n          case 3:\n            return _context2.a(2);\n        }\n      }, _callee2);\n    }));\n    return function (_x4, _x5, _x6) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n};\nexports.createOne = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(req, res, next) {\n      var newDoc;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            _context3.n = 1;\n            return Model.create(req.body);\n          case 1:\n            newDoc = _context3.v;\n            res.status(201).json({\n              status: 'success',\n              data: {\n                data: newDoc\n              }\n            });\n          case 2:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x7, _x8, _x9) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n};\nexports.getOne = function (Model, popOptions) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n      var query, doc;\n      return _regenerator().w(function (_context4) {\n        while (1) switch (_context4.n) {\n          case 0:\n            // populate will fill up guides with the actual data but only in QUERY, not in database\n            // This will populate with EVERY FIELD in guides\n            // const tour = await Tour.findById(req.params.id).populate('guides');\n            query = Model.findById(req.params.id);\n            if (popOptions) query = query.populate(popOptions);\n            _context4.n = 1;\n            return query;\n          case 1:\n            doc = _context4.v;\n            if (doc) {\n              _context4.n = 2;\n              break;\n            }\n            return _context4.a(2, next(new appError('No document found with that ID', 404)));\n          case 2:\n            res.status(200).json({\n              status: 'success',\n              data: {\n                data: doc\n              }\n            });\n          case 3:\n            return _context4.a(2);\n        }\n      }, _callee4);\n    }));\n    return function (_x0, _x1, _x10) {\n      return _ref4.apply(this, arguments);\n    };\n  }());\n};\nexports.getAll = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n      var filter, features, doc;\n      return _regenerator().w(function (_context5) {\n        while (1) switch (_context5.n) {\n          case 0:\n            // To allow for nested GET reviews on tour (hack)\n            filter = {};\n            if (req.params.tourId) filter = {\n              tour: req.params.tourId\n            };\n\n            // EXECUTE QUERY\n            features = new APIFeatures(Model.find(filter), req.query).filter().sort().limitFields().paginate();\n            _context5.n = 1;\n            return features.query;\n          case 1:\n            doc = _context5.v;\n            res.status(200).json({\n              status: 'success',\n              results: doc.length,\n              data: {\n                doc: doc\n              }\n            });\n          case 2:\n            return _context5.a(2);\n        }\n      }, _callee5);\n    }));\n    return function (_x11, _x12, _x13) {\n      return _ref5.apply(this, arguments);\n    };\n  }());\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImNhdGNoQXN5bmMiLCJyZXF1aXJlIiwiYXBwRXJyb3IiLCJBUElGZWF0dXJlcyIsImV4cG9ydHMiLCJkZWxldGVPbmUiLCJNb2RlbCIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwibmV4dCIsImRvYyIsIl9jb250ZXh0IiwiZmluZEJ5SWRBbmREZWxldGUiLCJwYXJhbXMiLCJpZCIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwiX3giLCJfeDIiLCJfeDMiLCJ1cGRhdGVPbmUiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJib2R5IiwicnVuVmFsaWRhdG9ycyIsIl94NCIsIl94NSIsIl94NiIsImNyZWF0ZU9uZSIsIl9yZWYzIiwiX2NhbGxlZTMiLCJuZXdEb2MiLCJfY29udGV4dDMiLCJfeDciLCJfeDgiLCJfeDkiLCJnZXRPbmUiLCJwb3BPcHRpb25zIiwiX3JlZjQiLCJfY2FsbGVlNCIsInF1ZXJ5IiwiX2NvbnRleHQ0IiwiZmluZEJ5SWQiLCJwb3B1bGF0ZSIsIl94MCIsIl94MSIsIl94MTAiLCJnZXRBbGwiLCJfcmVmNSIsIl9jYWxsZWU1IiwiZmlsdGVyIiwiZmVhdHVyZXMiLCJfY29udGV4dDUiLCJ0b3VySWQiLCJ0b3VyIiwiZmluZCIsInNvcnQiLCJsaW1pdEZpZWxkcyIsInBhZ2luYXRlIiwicmVzdWx0cyIsIl94MTEiLCJfeDEyIiwiX3gxMyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImhhbmRsZXJGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhdGNoQXN5bmMgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2NhdGNoQXN5bmMnKTtcbmNvbnN0IGFwcEVycm9yID0gcmVxdWlyZSgnLi8uLi91dGlscy9hcHBFcnJvcicpO1xuY29uc3QgQVBJRmVhdHVyZXMgPSByZXF1aXJlKCcuLi91dGlscy9hcGlGZWF0dXJlcycpO1xuXG5leHBvcnRzLmRlbGV0ZU9uZSA9IChNb2RlbCkgPT5cbiAgY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCBkb2MgPSBhd2FpdCBNb2RlbC5maW5kQnlJZEFuZERlbGV0ZShyZXEucGFyYW1zLmlkKTtcblxuICAgIGlmICghZG9jKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ05vIGRvY3VtZW50IGZvdW5kIHdpdGggdGhhdCBJRCcsIDQwNCkpO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjA0KS5qc29uKHtcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgZGF0YToge1xuICAgICAgICBkb2M6IG51bGwsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuZXhwb3J0cy51cGRhdGVPbmUgPSAoTW9kZWwpID0+XG4gIGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgTW9kZWwuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgcmVxLmJvZHksIHtcbiAgICAgIG5ldzogdHJ1ZSxcbiAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXG4gICAgfSk7XG5cbiAgICBpZiAoIWRvYykge1xuICAgICAgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdObyBkb2N1bWVudCBmb3VuZCB3aXRoIHRoYXQgSUQnLCA0MDQpKTtcbiAgICB9XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbmV4cG9ydHMuY3JlYXRlT25lID0gKE1vZGVsKSA9PlxuICBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IG5ld0RvYyA9IGF3YWl0IE1vZGVsLmNyZWF0ZShyZXEuYm9keSk7XG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICBkYXRhOiB7IGRhdGE6IG5ld0RvYyB9LFxuICAgIH0pO1xuICB9KTtcblxuZXhwb3J0cy5nZXRPbmUgPSAoTW9kZWwsIHBvcE9wdGlvbnMpID0+XG4gIGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgLy8gcG9wdWxhdGUgd2lsbCBmaWxsIHVwIGd1aWRlcyB3aXRoIHRoZSBhY3R1YWwgZGF0YSBidXQgb25seSBpbiBRVUVSWSwgbm90IGluIGRhdGFiYXNlXG4gICAgLy8gVGhpcyB3aWxsIHBvcHVsYXRlIHdpdGggRVZFUlkgRklFTEQgaW4gZ3VpZGVzXG4gICAgLy8gY29uc3QgdG91ciA9IGF3YWl0IFRvdXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCkucG9wdWxhdGUoJ2d1aWRlcycpO1xuXG4gICAgbGV0IHF1ZXJ5ID0gTW9kZWwuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKHBvcE9wdGlvbnMpIHF1ZXJ5ID0gcXVlcnkucG9wdWxhdGUocG9wT3B0aW9ucyk7XG5cbiAgICBjb25zdCBkb2MgPSBhd2FpdCBxdWVyeTtcblxuICAgIGlmICghZG9jKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ05vIGRvY3VtZW50IGZvdW5kIHdpdGggdGhhdCBJRCcsIDQwNCkpO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgZGF0YToge1xuICAgICAgICBkYXRhOiBkb2MsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuZXhwb3J0cy5nZXRBbGwgPSAoTW9kZWwpID0+XG4gIGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgLy8gVG8gYWxsb3cgZm9yIG5lc3RlZCBHRVQgcmV2aWV3cyBvbiB0b3VyIChoYWNrKVxuICAgIGxldCBmaWx0ZXIgPSB7fTtcbiAgICBpZiAocmVxLnBhcmFtcy50b3VySWQpIGZpbHRlciA9IHsgdG91cjogcmVxLnBhcmFtcy50b3VySWQgfTtcblxuICAgIC8vIEVYRUNVVEUgUVVFUllcbiAgICBjb25zdCBmZWF0dXJlcyA9IG5ldyBBUElGZWF0dXJlcyhNb2RlbC5maW5kKGZpbHRlciksIHJlcS5xdWVyeSlcbiAgICAgIC5maWx0ZXIoKVxuICAgICAgLnNvcnQoKVxuICAgICAgLmxpbWl0RmllbGRzKClcbiAgICAgIC5wYWdpbmF0ZSgpO1xuXG4gICAgY29uc3QgZG9jID0gYXdhaXQgZmVhdHVyZXMucXVlcnk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgIHJlc3VsdHM6IGRvYy5sZW5ndGgsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGRvYyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuIl0sIm1hcHBpbmdzIjoiOzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNBQUEsVUFBQUssbUJBQUEsQ0FBQUgsQ0FBQSx1QkFBQVYsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUUsQ0FBQSxFQUFBQyxDQUFBLEVBQUFHLENBQUEsRUFBQUksQ0FBQSxNQUFBQyxDQUFBLEdBQUFYLENBQUEsUUFBQVksQ0FBQSxPQUFBQyxDQUFBLEtBQUFGLENBQUEsS0FBQWIsQ0FBQSxLQUFBZ0IsQ0FBQSxFQUFBcEIsQ0FBQSxFQUFBcUIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFOLENBQUEsRUFBQU0sQ0FBQSxDQUFBQyxJQUFBLENBQUF2QixDQUFBLE1BQUFzQixDQUFBLFdBQUFBLEVBQUFyQixDQUFBLEVBQUFDLENBQUEsV0FBQU0sQ0FBQSxHQUFBUCxDQUFBLEVBQUFRLENBQUEsTUFBQUcsQ0FBQSxHQUFBWixDQUFBLEVBQUFtQixDQUFBLENBQUFmLENBQUEsR0FBQUYsQ0FBQSxFQUFBbUIsQ0FBQSxnQkFBQUMsRUFBQXBCLENBQUEsRUFBQUUsQ0FBQSxTQUFBSyxDQUFBLEdBQUFQLENBQUEsRUFBQVUsQ0FBQSxHQUFBUixDQUFBLEVBQUFI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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","catchAsync","require","appError","APIFeatures","exports","deleteOne","Model","_ref","_callee","req","res","next","doc","_context","findByIdAndDelete","params","id","status","json","data","_x","_x2","_x3","updateOne","_ref2","_callee2","_context2","findByIdAndUpdate","body","runValidators","_x4","_x5","_x6","createOne","_ref3","_callee3","newDoc","_context3","_x7","_x8","_x9","getOne","popOptions","_ref4","_callee4","query","_context4","findById","populate","_x0","_x1","_x10","getAll","_ref5","_callee5","filter","features","_context5","tourId","tour","find","sort","limitFields","paginate","results","_x11","_x12","_x13"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["handlerFactory.js"],"sourcesContent":["const catchAsync = require('./../utils/catchAsync');\nconst appError = require('./../utils/appError');\nconst APIFeatures = require('../utils/apiFeatures');\n\nexports.deleteOne = (Model) =>\n  catchAsync(async (req, res, next) => {\n    const doc = await Model.findByIdAndDelete(req.params.id);\n\n    if (!doc) {\n      return next(new appError('No document found with that ID', 404));\n    }\n\n    res.status(204).json({\n      status: 'success',\n      data: {\n        doc: null,\n      },\n    });\n  });\n\nexports.updateOne = (Model) =>\n  catchAsync(async (req, res, next) => {\n    const doc = await Model.findByIdAndUpdate(req.params.id, req.body, {\n      new: true,\n      runValidators: true,\n    });\n\n    if (!doc) {\n      return next(new appError('No document found with that ID', 404));\n    }\n\n    res.status(200).json({\n      status: 'success',\n      data: {\n        doc,\n      },\n    });\n  });\n\nexports.createOne = (Model) =>\n  catchAsync(async (req, res, next) => {\n    const newDoc = await Model.create(req.body);\n    res.status(201).json({\n      status: 'success',\n      data: { data: newDoc },\n    });\n  });\n\nexports.getOne = (Model, popOptions) =>\n  catchAsync(async (req, res, next) => {\n    // populate will fill up guides with the actual data but only in QUERY, not in database\n    // This will populate with EVERY FIELD in guides\n    // const tour = await Tour.findById(req.params.id).populate('guides');\n\n    let query = Model.findById(req.params.id);\n    if (popOptions) query = query.populate(popOptions);\n\n    const doc = await query;\n\n    if (!doc) {\n      return next(new appError('No document found with that ID', 404));\n    }\n\n    res.status(200).json({\n      status: 'success',\n      data: {\n        data: doc,\n      },\n    });\n  });\n\nexports.getAll = (Model) =>\n  catchAsync(async (req, res, next) => {\n    // To allow for nested GET reviews on tour (hack)\n    let filter = {};\n    if (req.params.tourId) filter = { tour: req.params.tourId };\n\n    // EXECUTE QUERY\n    const features = new APIFeatures(Model.find(filter), req.query)\n      .filter()\n      .sort()\n      .limitFields()\n      .paginate();\n\n    const doc = await features.query;\n\n    res.status(200).json({\n      status: 'success',\n      results: doc.length,\n      data: {\n        doc,\n      },\n    });\n  });\n"],"mappings":";;0BACA,uKAAAA,CAAA,EAAAC,CAAA,EAAAC,CAAA,wBAAAC,MAAA,GAAAA,MAAA,OAAAC,CAAA,GAAAF,CAAA,CAAAG,QAAA,kBAAAC,CAAA,GAAAJ,CAAA,CAAAK,WAAA,8BAAAC,EAAAN,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAC,CAAA,GAAAL,CAAA,IAAAA,CAAA,CAAAM,SAAA,YAAAC,SAAA,GAAAP,CAAA,GAAAO,SAAA,EAAAC,CAAA,GAAAC,MAAA,CAAAC,MAAA,CAAAL,CAAA,CAAAC,SAAA,UAAAK,mBAAA,CAAAH,CAAA,uBAAAV,CAAA,EAAAE,CAAA,EAAAE,CAAA,QAAAE,CAAA,EAAAC,CAAA,EAAAG,CAAA,EAAAI,CAAA,MAAAC,CAAA,GAAAX,CAAA,QAAAY,CAAA,OAAAC,CAAA,KAAAF,CAAA,KAAAb,CAAA,KAAAgB,CAAA,EAAApB,CAAA,EAAAqB,CAAA,EAAAC,CAAA,EAAAN,CAAA,EAAAM,CAAA,CAAAC,IAAA,CAAAvB,CAAA,MAAAsB,CAAA,WAAAA,EAAArB,CAAA,EAAAC,CAAA,WAAAM,CAAA,GAAAP,CAAA,EAAAQ,CAAA,MAAAG,CAAA,GAAAZ,CAAA,EAAAmB,CAAA,CAAAf,CAAA,GAAAF,CAAA,EAAAmB,CAAA,gBAAAC,EAAApB,CAAA,EAAAE,CAAA,SAAAK,CAAA,GAAAP,CAAA,EAAAU,CAAA,GAAAR,CAAA,EAAAH,CAAA,OAAAiB,CAAA,IAAAF,CAAA,KAAAV,CAAA,IAAAL,CAAA,GAAAgB,CAAA,CAAAO,MAAA,EAAAvB,CAAA,UAAAK,CAAA,EAAAE,CAAA,GAAAS,CAAA,CAAAhB,CAAA,GAAAqB,CAAA,GAAAH,CAAA,CAAAF,CAAA,EAAAQ,CAAA,GAAAjB,CAAA,KAAAN,CAAA,QAAAI,CAAA,GAAAmB,CAAA,KAAArB,CAAA,MAAAQ,CAAA,GAAAJ,CAAA,EAAAC,CAAA,GAAAD,CAAA,YAAAC,CAAA,WAAAD,CAAA,MAAAA,CAAA,MAAAR,CAAA,IAAAQ,CAAA,OAAAc,CAAA,MAAAhB,CAAA,GAAAJ,CAAA,QAAAoB,CAAA,GAAAd,CAAA,QAAAC,CAAA,MAAAU,CAAA,CAAAC,CAAA,GAAAhB,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAI,CAAA,OAAAc,CAAA,GAAAG,CAAA,KAAAnB,CAAA,GAAAJ,CAAA,QAAAM,CAAA,MAAAJ,CAAA,IAAAA,CAAA,GAAAqB,CAAA,MAAAjB,CAAA,MAAAN,CAAA,EAAAM,CAAA,MAAAJ,CAAA,EAAAe,CAAA,CAAAf,CAAA,GAAAqB,CAAA,EAAAhB,CAAA,cAAAH,CAAA,IAAAJ,CAAA,aAAAmB,CAAA,QAAAH,CAAA,OAAAd,CAAA,qBAAAE,CAAA,EAAAW,CAAA,EAAAQ,CAAA,QAAAT,CAAA,YAAAU,SAAA,uCAAAR,CAAA,UAAAD,CAAA,IAAAK,CAAA,CAAAL,CAAA,EAAAQ,CAAA,GAAAhB,CAAA,GAAAQ,CAAA,EAAAL,CAAA,GAAAa,CAAA,GAAAxB,CAAA,GAAAQ,CAAA,OAAAT,CAAA,GAAAY,CAAA,MAAAM,CAAA,KAAAV,CAAA,KAAAC,CAAA,GAAAA,CAAA,QAAAA,CAAA,SAAAU,CAAA,CAAAf,CAAA,QAAAkB,CAAA,CAAAb,CAAA,EAAAG,CAAA,KAAAO,CAAA,CAAAf,CAAA,GAAAQ,CAAA,GAAAO,CAAA,CAAAC,CAAA,GAAAR,CAAA,aAAAI,CAAA,MAAAR,CAAA,QAAAC,CAAA,KAAAH,CAAA,YAAAL,CAAA,GAAAO,CAAA,CAAAF,CAAA,WAAAL,CAAA,GAAAA,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,EAAAI,CAAA,UAAAc,SAAA,2CAAAzB,CAAA,CAAA2B,IAAA,SAAA3B,CAAA,EAAAW,CAAA,GAAAX,CAAA,CAAA4B,KAAA,EAAApB,CAAA,SAAAA,CAAA,oBAAAA,CAAA,KAAAR,CAAA,GAAAO,CAAA,eAAAP,CAAA,CAAA0B,IAAA,CAAAnB,CAAA,GAAAC,CAAA,SAAAG,CAAA,GAAAc,SAAA,uCAAApB,CAAA,gBAAAG,CAAA,OAAAD,CAAA,GAAAR,CAAA,cAAAC,CAAA,IAAAiB,CAAA,GAAAC,CAAA,CAAAf,CAAA,QAAAQ,CAAA,GAAAV,CAAA,CAAAyB,IAAA,CAAAvB,CAAA,EAAAe,CAAA,OAAAE,CAAA,kBAAApB,CAAA,IAAAO,CAAA,GAAAR,CAAA,EAAAS,CAAA,MAAAG,CAAA,GAAAX,CAAA,cAAAe,CAAA,mBAAAa,KAAA,EAAA5B,CAAA,EAAA2B,IAAA,EAAAV,CAAA,SAAAhB,CAAA,EAAAI,CAAA,EAAAE,CAAA,QAAAI,CAAA,QAAAS,CAAA,gBAAAV,UAAA,cAAAmB,kBAAA,cAAAC,2BAAA,KAAA9B,CAAA,GAAAY,MAAA,CAAAmB,cAAA,MAAAvB,CAAA,MAAAL,CAAA,IAAAH,CAAA,CAAAA,CAAA,IAAAG,CAAA,SAAAW,mBAAA,CAAAd,CAAA,OAAAG,CAAA,iCAAAH,CAAA,GAAAW,CAAA,GAAAmB,0BAAA,CAAArB,SAAA,GAAAC,SAAA,CAAAD,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAL,CAAA,YAAAO,EAAAhB,CAAA,WAAAa,MAAA,CAAAoB,cAAA,GAAApB,MAAA,CAAAoB,cAAA,CAAAjC,CAAA,EAAA+B,0BAAA,KAAA/B,CAAA,CAAAkC,SAAA,GAAAH,0BAAA,EAAAhB,mBAAA,CAAAf,CAAA,EAAAM,CAAA,yBAAAN,CAAA,CAAAU,SAAA,GAAAG,MAAA,CAAAC,MAAA,CAAAF,CAAA,GAAAZ,CAAA,WAAA8B,iBAAA,CAAApB,SAAA,GAAAqB,0BAAA,EAAAhB,mBAAA,CAAAH,CAAA,iBAAAmB,0BAAA,GAAAhB,mBAAA,CAAAgB,0BAAA,iBAAAD,iBAAA,GAAAA,iBAAA,CAAAK,WAAA,wBAAApB,mBAAA,CAAAgB,0BAAA,EAAAzB,CAAA,wBAAAS,mBAAA,CAAAH,CAAA,GAAAG,mBAAA,CAAAH,CAAA,EAAAN,CAAA,gBAAAS,mBAAA,CAAAH,CAAA,EAAAR,CAAA,iCAAAW,mBAAA,CAAAH,CAAA,8DAAAwB,YAAA,YAAAA,aAAA,aAAAC,CAAA,EAAA7B,CAAA,EAAA8B,CAAA,EAAAtB,CAAA;AAAA,SAAAD,oBAAAf,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA,QAAAO,CAAA,GAAAK,MAAA,CAAA0B,cAAA,QAAA/B,CAAA,uBAAAR,CAAA,IAAAQ,CAAA,QAAAO,mBAAA,YAAAyB,mBAAAxC,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA,aAAAK,EAAAJ,CAAA,EAAAE,CAAA,IAAAW,mBAAA,CAAAf,CAAA,EAAAE,CAAA,YAAAF,CAAA,gBAAAyC,OAAA,CAAAvC,CAAA,EAAAE,CAAA,EAAAJ,CAAA,SAAAE,CAAA,GAAAM,CAAA,GAAAA,CAAA,CAAAR,CAAA,EAAAE,CAAA,IAAA2B,KAAA,EAAAzB,CAAA,EAAAsC,UAAA,GAAAzC,CAAA,EAAA0C,YAAA,GAAA1C,CAAA,EAAA2C,QAAA,GAAA3C,CAAA,MAAAD,CAAA,CAAAE,CAAA,IAAAE,CAAA,IAAAE,CAAA,aAAAA,CAAA,cAAAA,CAAA,mBAAAS,mBAAA,CAAAf,CAAA,EAAAE,CAAA,EAAAE,CAAA,EAAAH,CAAA;AAAA,SAAA4C,mBAAAzC,CAAA,EAAAH,CAAA,EAAAD,CAAA,EAAAE,CAAA,EAAAI,CAAA,EAAAe,CAAA,EAAAZ,CAAA,cAAAD,CAAA,GAAAJ,CAAA,CAAAiB,CAAA,EAAAZ,CAAA,GAAAG,CAAA,GAAAJ,CAAA,CAAAqB,KAAA,WAAAzB,CAAA,gBAAAJ,CAAA,CAAAI,CAAA,KAAAI,CAAA,CAAAoB,IAAA,GAAA3B,CAAA,CAAAW,CAAA,IAAAkC,OAAA,CAAAC,OAAA,CAAAnC,CAAA,EAAAoC,IAAA,CAAA9C,CAAA,EAAAI,CAAA;AAAA,SAAA2C,kBAAA7C,CAAA,6BAAAH,CAAA,SAAAD,CAAA,GAAAkD,SAAA,aAAAJ,OAAA,WAAA5C,CAAA,EAAAI,CAAA,QAAAe,CAAA,GAAAjB,CAAA,CAAA+C,KAAA,CAAAlD,CAAA,EAAAD,CAAA,YAAAoD,MAAAhD,CAAA,IAAAyC,kBAAA,CAAAxB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA8C,KAAA,EAAAC,MAAA,UAAAjD,CAAA,cAAAiD,OAAAjD,CAAA,IAAAyC,kBAAA,CAAAxB,CAAA,EAAAnB,CAAA,EAAAI,CAAA,EAAA8C,KAAA,EAAAC,MAAA,WAAAjD,CAAA,KAAAgD,KAAA;AADA,IAAME,UAAU,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AACnD,IAAMC,QAAQ,GAAGD,OAAO,CAAC,qBAAqB,CAAC;AAC/C,IAAME,WAAW,GAAGF,OAAO,CAAC,sBAAsB,CAAC;AAEnDG,OAAO,CAACC,SAAS,GAAG,UAACC,KAAK;EAAA,OACxBN,UAAU;IAAA,IAAAO,IAAA,GAAAZ,iBAAA,cAAAb,YAAA,GAAAE,CAAA,CAAC,SAAAwB,QAAOC,GAAG,EAAEC,GAAG,EAAEC,IAAI;MAAA,IAAAC,GAAA;MAAA,OAAA9B,YAAA,GAAAC,CAAA,WAAA8B,QAAA;QAAA,kBAAAA,QAAA,CAAA/D,CAAA;UAAA;YAAA+D,QAAA,CAAA/D,CAAA;YAAA,OACZwD,KAAK,CAACQ,iBAAiB,CAACL,GAAG,CAACM,MAAM,CAACC,EAAE,CAAC;UAAA;YAAlDJ,GAAG,GAAAC,QAAA,CAAA/C,CAAA;YAAA,IAEJ8C,GAAG;cAAAC,QAAA,CAAA/D,CAAA;cAAA;YAAA;YAAA,OAAA+D,QAAA,CAAA9C,CAAA,IACC4C,IAAI,CAAC,IAAIT,QAAQ,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;UAAA;YAGlEQ,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;cACnBD,MAAM,EAAE,SAAS;cACjBE,IAAI,EAAE;gBACJP,GAAG,EAAE;cACP;YACF,CAAC,CAAC;UAAC;YAAA,OAAAC,QAAA,CAAA9C,CAAA;QAAA;MAAA,GAAAyC,OAAA;IAAA,CACJ;IAAA,iBAAAY,EAAA,EAAAC,GAAA,EAAAC,GAAA;MAAA,OAAAf,IAAA,CAAAV,KAAA,OAAAD,SAAA;IAAA;EAAA,IAAC;AAAA;AAEJQ,OAAO,CAACmB,SAAS,GAAG,UAACjB,KAAK;EAAA,OACxBN,UAAU;IAAA,IAAAwB,KAAA,GAAA7B,iBAAA,cAAAb,YAAA,GAAAE,CAAA,CAAC,SAAAyC,SAAOhB,GAAG,EAAEC,GAAG,EAAEC,IAAI;MAAA,IAAAC,GAAA;MAAA,OAAA9B,YAAA,GAAAC,CAAA,WAAA2C,SAAA;QAAA,kBAAAA,SAAA,CAAA5E,CAAA;UAAA;YAAA4E,SAAA,CAAA5E,CAAA;YAAA,OACZwD,KAAK,CAACqB,iBAAiB,CAAClB,GAAG,CAACM,MAAM,CAACC,EAAE,EAAEP,GAAG,CAACmB,IAAI,EAAE;cACjE,OAAK,IAAI;cACTC,aAAa,EAAE;YACjB,CAAC,CAAC;UAAA;YAHIjB,GAAG,GAAAc,SAAA,CAAA5D,CAAA;YAAA,IAKJ8C,GAAG;cAAAc,SAAA,CAAA5E,CAAA;cAAA;YAAA;YAAA,OAAA4E,SAAA,CAAA3D,CAAA,IACC4C,IAAI,CAAC,IAAIT,QAAQ,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;UAAA;YAGlEQ,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;cACnBD,MAAM,EAAE,SAAS;cACjBE,IAAI,EAAE;gBACJP,GAAG,EAAHA;cACF;YACF,CAAC,CAAC;UAAC;YAAA,OAAAc,SAAA,CAAA3D,CAAA;QAAA;MAAA,GAAA0D,QAAA;IAAA,CACJ;IAAA,iBAAAK,GAAA,EAAAC,GAAA,EAAAC,GAAA;MAAA,OAAAR,KAAA,CAAA3B,KAAA,OAAAD,SAAA;IAAA;EAAA,IAAC;AAAA;AAEJQ,OAAO,CAAC6B,SAAS,GAAG,UAAC3B,KAAK;EAAA,OACxBN,UAAU;IAAA,IAAAkC,KAAA,GAAAvC,iBAAA,cAAAb,YAAA,GAAAE,CAAA,CAAC,SAAAmD,SAAO1B,GAAG,EAAEC,GAAG,EAAEC,IAAI;MAAA,IAAAyB,MAAA;MAAA,OAAAtD,YAAA,GAAAC,CAAA,WAAAsD,SAAA;QAAA,kBAAAA,SAAA,CAAAvF,CAAA;UAAA;YAAAuF,SAAA,CAAAvF,CAAA;YAAA,OACTwD,KAAK,CAAC9C,MAAM,CAACiD,GAAG,CAACmB,IAAI,CAAC;UAAA;YAArCQ,MAAM,GAAAC,SAAA,CAAAvE,CAAA;YACZ4C,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;cACnBD,MAAM,EAAE,SAAS;cACjBE,IAAI,EAAE;gBAAEA,IAAI,EAAEiB;cAAO;YACvB,CAAC,CAAC;UAAC;YAAA,OAAAC,SAAA,CAAAtE,CAAA;QAAA;MAAA,GAAAoE,QAAA;IAAA,CACJ;IAAA,iBAAAG,GAAA,EAAAC,GAAA,EAAAC,GAAA;MAAA,OAAAN,KAAA,CAAArC,KAAA,OAAAD,SAAA;IAAA;EAAA,IAAC;AAAA;AAEJQ,OAAO,CAACqC,MAAM,GAAG,UAACnC,KAAK,EAAEoC,UAAU;EAAA,OACjC1C,UAAU;IAAA,IAAA2C,KAAA,GAAAhD,iBAAA,cAAAb,YAAA,GAAAE,CAAA,CAAC,SAAA4D,SAAOnC,GAAG,EAAEC,GAAG,EAAEC,IAAI;MAAA,IAAAkC,KAAA,EAAAjC,GAAA;MAAA,OAAA9B,YAAA,GAAAC,CAAA,WAAA+D,SAAA;QAAA,kBAAAA,SAAA,CAAAhG,CAAA;UAAA;YAC9B;YACA;YACA;YAEI+F,KAAK,GAAGvC,KAAK,CAACyC,QAAQ,CAACtC,GAAG,CAACM,MAAM,CAACC,EAAE,CAAC;YACzC,IAAI0B,UAAU,EAAEG,KAAK,GAAGA,KAAK,CAACG,QAAQ,CAACN,UAAU,CAAC;YAACI,SAAA,CAAAhG,CAAA;YAAA,OAEjC+F,KAAK;UAAA;YAAjBjC,GAAG,GAAAkC,SAAA,CAAAhF,CAAA;YAAA,IAEJ8C,GAAG;cAAAkC,SAAA,CAAAhG,CAAA;cAAA;YAAA;YAAA,OAAAgG,SAAA,CAAA/E,CAAA,IACC4C,IAAI,CAAC,IAAIT,QAAQ,CAAC,gCAAgC,EAAE,GAAG,CAAC,CAAC;UAAA;YAGlEQ,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;cACnBD,MAAM,EAAE,SAAS;cACjBE,IAAI,EAAE;gBACJA,IAAI,EAAEP;cACR;YACF,CAAC,CAAC;UAAC;YAAA,OAAAkC,SAAA,CAAA/E,CAAA;QAAA;MAAA,GAAA6E,QAAA;IAAA,CACJ;IAAA,iBAAAK,GAAA,EAAAC,GAAA,EAAAC,IAAA;MAAA,OAAAR,KAAA,CAAA9C,KAAA,OAAAD,SAAA;IAAA;EAAA,IAAC;AAAA;AAEJQ,OAAO,CAACgD,MAAM,GAAG,UAAC9C,KAAK;EAAA,OACrBN,UAAU;IAAA,IAAAqD,KAAA,GAAA1D,iBAAA,cAAAb,YAAA,GAAAE,CAAA,CAAC,SAAAsE,SAAO7C,GAAG,EAAEC,GAAG,EAAEC,IAAI;MAAA,IAAA4C,MAAA,EAAAC,QAAA,EAAA5C,GAAA;MAAA,OAAA9B,YAAA,GAAAC,CAAA,WAAA0E,SAAA;QAAA,kBAAAA,SAAA,CAAA3G,CAAA;UAAA;YAC9B;YACIyG,MAAM,GAAG,CAAC,CAAC;YACf,IAAI9C,GAAG,CAACM,MAAM,CAAC2C,MAAM,EAAEH,MAAM,GAAG;cAAEI,IAAI,EAAElD,GAAG,CAACM,MAAM,CAAC2C;YAAO,CAAC;;YAE3D;YACMF,QAAQ,GAAG,IAAIrD,WAAW,CAACG,KAAK,CAACsD,IAAI,CAACL,MAAM,CAAC,EAAE9C,GAAG,CAACoC,KAAK,CAAC,CAC5DU,MAAM,CAAC,CAAC,CACRM,IAAI,CAAC,CAAC,CACNC,WAAW,CAAC,CAAC,CACbC,QAAQ,CAAC,CAAC;YAAAN,SAAA,CAAA3G,CAAA;YAAA,OAEK0G,QAAQ,CAACX,KAAK;UAAA;YAA1BjC,GAAG,GAAA6C,SAAA,CAAA3F,CAAA;YAET4C,GAAG,CAACO,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;cACnBD,MAAM,EAAE,SAAS;cACjB+C,OAAO,EAAEpD,GAAG,CAAC1C,MAAM;cACnBiD,IAAI,EAAE;gBACJP,GAAG,EAAHA;cACF;YACF,CAAC,CAAC;UAAC;YAAA,OAAA6C,SAAA,CAAA1F,CAAA;QAAA;MAAA,GAAAuF,QAAA;IAAA,CACJ;IAAA,iBAAAW,IAAA,EAAAC,IAAA,EAAAC,IAAA;MAAA,OAAAd,KAAA,CAAAxD,KAAA,OAAAD,SAAA;IAAA;EAAA,IAAC;AAAA","ignoreList":[]}},"mtime":1762243430742},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/apiFeatures.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar APIFeatures = /*#__PURE__*/function () {\n  // Query is an object that is a result of calling a method like .find()\n  // Query String is URL (req.query) part ?sort=price&limit=10\n  function APIFeatures(query, queryString) {\n    _classCallCheck(this, APIFeatures);\n    this.query = query;\n    this.queryString = queryString;\n  }\n  return _createClass(APIFeatures, [{\n    key: \"filter\",\n    value: function filter() {\n      // 1A) FILTERING\n      var queryObj = _objectSpread({}, this.queryString);\n      var excludedFields = ['page', 'sort', 'limit', 'fields'];\n      excludedFields.forEach(function (el) {\n        return delete queryObj[el];\n      });\n\n      // 1B) ADVANCED FILTERING\n      var queryStr = JSON.stringify(queryObj);\n      queryStr = queryStr.replace(/\\b(gte|gt|lte|lt)\\b/g, function (match) {\n        return \"$\".concat(match);\n      });\n      this.query = this.query.find(JSON.parse(queryStr));\n      return this;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort() {\n      if (this.queryString.sort) {\n        var sortBy = this.queryString.sort.split(',').join(' ');\n        this.query = this.query.sort(sortBy);\n      } else {\n        this.query = this.query.sort('-createdAt');\n      }\n      return this; // Crucial for chaining\n    }\n  }, {\n    key: \"limitFields\",\n    value: function limitFields() {\n      if (this.queryString.fields) {\n        var fields = this.queryString.fields.split(',').join(' ');\n        this.query = this.query.select(fields);\n      } else {\n        this.query = this.query.select('-__v');\n      }\n      return this; // Crucial for chaining\n    }\n  }, {\n    key: \"paginate\",\n    value: function paginate() {\n      var page = this.queryString.page * 1 || 1;\n      var limit = this.queryString.limit * 1 || 100;\n      var skip = (page - 1) * limit;\n      this.query = this.query.skip(skip).limit(limit);\n      return this; // Crucial for chaining\n    }\n  }]);\n}();\nmodule.exports = APIFeatures;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBUElGZWF0dXJlcyIsInF1ZXJ5IiwicXVlcnlTdHJpbmciLCJfY2xhc3NDYWxsQ2hlY2siLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsImZpbHRlciIsInF1ZXJ5T2JqIiwiX29iamVjdFNwcmVhZCIsImV4Y2x1ZGVkRmllbGRzIiwiZm9yRWFjaCIsImVsIiwicXVlcnlTdHIiLCJKU09OIiwic3RyaW5naWZ5IiwicmVwbGFjZSIsIm1hdGNoIiwiY29uY2F0IiwiZmluZCIsInBhcnNlIiwic29ydCIsInNvcnRCeSIsInNwbGl0Iiwiam9pbiIsImxpbWl0RmllbGRzIiwiZmllbGRzIiwic2VsZWN0IiwicGFnaW5hdGUiLCJwYWdlIiwibGltaXQiLCJza2lwIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC91dGlscy8iLCJzb3VyY2VzIjpbImFwaUZlYXR1cmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFQSUZlYXR1cmVzIHtcbiAgLy8gUXVlcnkgaXMgYW4gb2JqZWN0IHRoYXQgaXMgYSByZXN1bHQgb2YgY2FsbGluZyBhIG1ldGhvZCBsaWtlIC5maW5kKClcbiAgLy8gUXVlcnkgU3RyaW5nIGlzIFVSTCAocmVxLnF1ZXJ5KSBwYXJ0ID9zb3J0PXByaWNlJmxpbWl0PTEwXG4gIGNvbnN0cnVjdG9yKHF1ZXJ5LCBxdWVyeVN0cmluZykge1xuICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICB0aGlzLnF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmc7XG4gIH1cblxuICBmaWx0ZXIoKSB7XG4gICAgLy8gMUEpIEZJTFRFUklOR1xuICAgIGNvbnN0IHF1ZXJ5T2JqID0geyAuLi50aGlzLnF1ZXJ5U3RyaW5nIH07XG4gICAgY29uc3QgZXhjbHVkZWRGaWVsZHMgPSBbJ3BhZ2UnLCAnc29ydCcsICdsaW1pdCcsICdmaWVsZHMnXTtcbiAgICBleGNsdWRlZEZpZWxkcy5mb3JFYWNoKChlbCkgPT4gZGVsZXRlIHF1ZXJ5T2JqW2VsXSk7XG5cbiAgICAvLyAxQikgQURWQU5DRUQgRklMVEVSSU5HXG4gICAgbGV0IHF1ZXJ5U3RyID0gSlNPTi5zdHJpbmdpZnkocXVlcnlPYmopO1xuICAgIHF1ZXJ5U3RyID0gcXVlcnlTdHIucmVwbGFjZSgvXFxiKGd0ZXxndHxsdGV8bHQpXFxiL2csIChtYXRjaCkgPT4gYCQke21hdGNofWApO1xuXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuZmluZChKU09OLnBhcnNlKHF1ZXJ5U3RyKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNvcnQoKSB7XG4gICAgaWYgKHRoaXMucXVlcnlTdHJpbmcuc29ydCkge1xuICAgICAgY29uc3Qgc29ydEJ5ID0gdGhpcy5xdWVyeVN0cmluZy5zb3J0LnNwbGl0KCcsJykuam9pbignICcpO1xuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuc29ydChzb3J0QnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5xdWVyeS5zb3J0KCctY3JlYXRlZEF0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7IC8vIENydWNpYWwgZm9yIGNoYWluaW5nXG4gIH1cblxuICBsaW1pdEZpZWxkcygpIHtcbiAgICBpZiAodGhpcy5xdWVyeVN0cmluZy5maWVsZHMpIHtcbiAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMucXVlcnlTdHJpbmcuZmllbGRzLnNwbGl0KCcsJykuam9pbignICcpO1xuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuc2VsZWN0KGZpZWxkcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5LnNlbGVjdCgnLV9fdicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpczsgLy8gQ3J1Y2lhbCBmb3IgY2hhaW5pbmdcbiAgfVxuXG4gIHBhZ2luYXRlKCkge1xuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLnF1ZXJ5U3RyaW5nLnBhZ2UgKiAxIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSB0aGlzLnF1ZXJ5U3RyaW5nLmxpbWl0ICogMSB8fCAxMDA7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5LnNraXAoc2tpcCkubGltaXQobGltaXQpO1xuXG4gICAgcmV0dXJuIHRoaXM7IC8vIENydWNpYWwgZm9yIGNoYWluaW5nXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBUElGZWF0dXJlcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7SUFBTUEsV0FBVztFQUNmO0VBQ0E7RUFDQSxTQUFBQSxZQUFZQyxLQUFLLEVBQUVDLFdBQVcsRUFBRTtJQUFBQyxlQUFBLE9BQUFILFdBQUE7SUFDOUIsSUFBSSxDQUFDQyxLQUFLLEdBQUdBLEtBQUs7SUFDbEIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBLFdBQVc7RUFDaEM7RUFBQyxPQUFBRSxZQUFBLENBQUFKLFdBQUE7SUFBQUssR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUMsTUFBTUEsQ0FBQSxFQUFHO01BQ1A7TUFDQSxJQUFNQyxRQUFRLEdBQUFDLGFBQUEsS0FBUSxJQUFJLENBQUNQLFdBQVcsQ0FBRTtNQUN4QyxJQUFNUSxjQUFjLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUM7TUFDMURBLGNBQWMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUNDLEVBQUU7UUFBQSxPQUFLLE9BQU9KLFFBQVEsQ0FBQ0ksRUFBRSxDQUFDO01BQUEsRUFBQzs7TUFFbkQ7TUFDQSxJQUFJQyxRQUFRLEdBQUdDLElBQUksQ0FBQ0MsU0FBUyxDQUFDUCxRQUFRLENBQUM7TUFDdkNLLFFBQVEsR0FBR0EsUUFBUSxDQUFDRyxPQUFPLENBQUMsc0JBQXNCLEVBQUUsVUFBQ0MsS0FBSztRQUFBLFdBQUFDLE1BQUEsQ0FBU0QsS0FBSztNQUFBLENBQUUsQ0FBQztNQUUzRSxJQUFJLENBQUNoQixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNrQixJQUFJLENBQUNMLElBQUksQ0FBQ00sS0FBSyxDQUFDUCxRQUFRLENBQUMsQ0FBQztNQUVsRCxPQUFPLElBQUk7SUFDYjtFQUFDO0lBQUFSLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFlLElBQUlBLENBQUEsRUFBRztNQUNMLElBQUksSUFBSSxDQUFDbkIsV0FBVyxDQUFDbUIsSUFBSSxFQUFFO1FBQ3pCLElBQU1DLE1BQU0sR0FBRyxJQUFJLENBQUNwQixXQUFXLENBQUNtQixJQUFJLENBQUNFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUN6RCxJQUFJLENBQUN2QixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNvQixJQUFJLENBQUNDLE1BQU0sQ0FBQztNQUN0QyxDQUFDLE1BQU07UUFDTCxJQUFJLENBQUNyQixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNvQixJQUFJLENBQUMsWUFBWSxDQUFDO01BQzVDO01BRUEsT0FBTyxJQUFJLENBQUMsQ0FBQztJQUNmO0VBQUM7SUFBQWhCLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFtQixXQUFXQSxDQUFBLEVBQUc7TUFDWixJQUFJLElBQUksQ0FBQ3ZCLFdBQVcsQ0FBQ3dCLE1BQU0sRUFBRTtRQUMzQixJQUFNQSxNQUFNLEdBQUcsSUFBSSxDQUFDeEIsV0FBVyxDQUFDd0IsTUFBTSxDQUFDSCxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDM0QsSUFBSSxDQUFDdkIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFDMEIsTUFBTSxDQUFDRCxNQUFNLENBQUM7TUFDeEMsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDekIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFDMEIsTUFBTSxDQUFDLE1BQU0sQ0FBQztNQUN4QztNQUNBLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDZjtFQUFDO0lBQUF0QixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBc0IsUUFBUUEsQ0FBQSxFQUFHO01BQ1QsSUFBTUMsSUFBSSxHQUFHLElBQUksQ0FBQzNCLFdBQVcsQ0FBQzJCLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQztNQUMzQyxJQUFNQyxLQUFLLEdBQUcsSUFBSSxDQUFDNUIsV0FBVyxDQUFDNEIsS0FBSyxHQUFHLENBQUMsSUFBSSxHQUFHO01BQy9DLElBQU1DLElBQUksR0FBRyxDQUFDRixJQUFJLEdBQUcsQ0FBQyxJQUFJQyxLQUFLO01BRS9CLElBQUksQ0FBQzdCLEtBQUssR0FBRyxJQUFJLENBQUNBLEtBQUssQ0FBQzhCLElBQUksQ0FBQ0EsSUFBSSxDQUFDLENBQUNELEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BRS9DLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDZjtFQUFDO0FBQUE7QUFHSEUsTUFBTSxDQUFDQyxPQUFPLEdBQUdqQyxXQUFXIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["APIFeatures","query","queryString","_classCallCheck","_createClass","key","value","filter","queryObj","_objectSpread","excludedFields","forEach","el","queryStr","JSON","stringify","replace","match","concat","find","parse","sort","sortBy","split","join","limitFields","fields","select","paginate","page","limit","skip","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["apiFeatures.js"],"sourcesContent":["class APIFeatures {\n  // Query is an object that is a result of calling a method like .find()\n  // Query String is URL (req.query) part ?sort=price&limit=10\n  constructor(query, queryString) {\n    this.query = query;\n    this.queryString = queryString;\n  }\n\n  filter() {\n    // 1A) FILTERING\n    const queryObj = { ...this.queryString };\n    const excludedFields = ['page', 'sort', 'limit', 'fields'];\n    excludedFields.forEach((el) => delete queryObj[el]);\n\n    // 1B) ADVANCED FILTERING\n    let queryStr = JSON.stringify(queryObj);\n    queryStr = queryStr.replace(/\\b(gte|gt|lte|lt)\\b/g, (match) => `$${match}`);\n\n    this.query = this.query.find(JSON.parse(queryStr));\n\n    return this;\n  }\n\n  sort() {\n    if (this.queryString.sort) {\n      const sortBy = this.queryString.sort.split(',').join(' ');\n      this.query = this.query.sort(sortBy);\n    } else {\n      this.query = this.query.sort('-createdAt');\n    }\n\n    return this; // Crucial for chaining\n  }\n\n  limitFields() {\n    if (this.queryString.fields) {\n      const fields = this.queryString.fields.split(',').join(' ');\n      this.query = this.query.select(fields);\n    } else {\n      this.query = this.query.select('-__v');\n    }\n    return this; // Crucial for chaining\n  }\n\n  paginate() {\n    const page = this.queryString.page * 1 || 1;\n    const limit = this.queryString.limit * 1 || 100;\n    const skip = (page - 1) * limit;\n\n    this.query = this.query.skip(skip).limit(limit);\n\n    return this; // Crucial for chaining\n  }\n}\n\nmodule.exports = APIFeatures;\n"],"mappings":";;;;;;;;;;;IAAMA,WAAW;EACf;EACA;EACA,SAAAA,YAAYC,KAAK,EAAEC,WAAW,EAAE;IAAAC,eAAA,OAAAH,WAAA;IAC9B,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,WAAW,GAAGA,WAAW;EAChC;EAAC,OAAAE,YAAA,CAAAJ,WAAA;IAAAK,GAAA;IAAAC,KAAA,EAED,SAAAC,MAAMA,CAAA,EAAG;MACP;MACA,IAAMC,QAAQ,GAAAC,aAAA,KAAQ,IAAI,CAACP,WAAW,CAAE;MACxC,IAAMQ,cAAc,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;MAC1DA,cAAc,CAACC,OAAO,CAAC,UAACC,EAAE;QAAA,OAAK,OAAOJ,QAAQ,CAACI,EAAE,CAAC;MAAA,EAAC;;MAEnD;MACA,IAAIC,QAAQ,GAAGC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAAC;MACvCK,QAAQ,GAAGA,QAAQ,CAACG,OAAO,CAAC,sBAAsB,EAAE,UAACC,KAAK;QAAA,WAAAC,MAAA,CAASD,KAAK;MAAA,CAAE,CAAC;MAE3E,IAAI,CAAChB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACkB,IAAI,CAACL,IAAI,CAACM,KAAK,CAACP,QAAQ,CAAC,CAAC;MAElD,OAAO,IAAI;IACb;EAAC;IAAAR,GAAA;IAAAC,KAAA,EAED,SAAAe,IAAIA,CAAA,EAAG;MACL,IAAI,IAAI,CAACnB,WAAW,CAACmB,IAAI,EAAE;QACzB,IAAMC,MAAM,GAAG,IAAI,CAACpB,WAAW,CAACmB,IAAI,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;QACzD,IAAI,CAACvB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACoB,IAAI,CAACC,MAAM,CAAC;MACtC,CAAC,MAAM;QACL,IAAI,CAACrB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACoB,IAAI,CAAC,YAAY,CAAC;MAC5C;MAEA,OAAO,IAAI,CAAC,CAAC;IACf;EAAC;IAAAhB,GAAA;IAAAC,KAAA,EAED,SAAAmB,WAAWA,CAAA,EAAG;MACZ,IAAI,IAAI,CAACvB,WAAW,CAACwB,MAAM,EAAE;QAC3B,IAAMA,MAAM,GAAG,IAAI,CAACxB,WAAW,CAACwB,MAAM,CAACH,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;QAC3D,IAAI,CAACvB,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC0B,MAAM,CAACD,MAAM,CAAC;MACxC,CAAC,MAAM;QACL,IAAI,CAACzB,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC0B,MAAM,CAAC,MAAM,CAAC;MACxC;MACA,OAAO,IAAI,CAAC,CAAC;IACf;EAAC;IAAAtB,GAAA;IAAAC,KAAA,EAED,SAAAsB,QAAQA,CAAA,EAAG;MACT,IAAMC,IAAI,GAAG,IAAI,CAAC3B,WAAW,CAAC2B,IAAI,GAAG,CAAC,IAAI,CAAC;MAC3C,IAAMC,KAAK,GAAG,IAAI,CAAC5B,WAAW,CAAC4B,KAAK,GAAG,CAAC,IAAI,GAAG;MAC/C,IAAMC,IAAI,GAAG,CAACF,IAAI,GAAG,CAAC,IAAIC,KAAK;MAE/B,IAAI,CAAC7B,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC8B,IAAI,CAACA,IAAI,CAAC,CAACD,KAAK,CAACA,KAAK,CAAC;MAE/C,OAAO,IAAI,CAAC,CAAC;IACf;EAAC;AAAA;AAGHE,MAAM,CAACC,OAAO,GAAGjC,WAAW","ignoreList":[]}},"mtime":1762243431370},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/authController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar _require = require('util'),\n  promisify = _require.promisify;\nvar crypto = require('crypto');\nvar jwt = require('jsonwebtoken');\nvar User = require('../models/userModel');\nvar catchAsync = require('../utils/catchAsync');\nvar appError = require('../utils/appError');\nvar Email = require('../utils/email');\nvar signToken = function signToken(id) {\n  return jwt.sign({\n    id: id\n  }, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRES_IN\n  });\n};\nvar createSendToken = function createSendToken(user, statusCode, res) {\n  var token = signToken(user._id);\n  var isProduction = process.env.NODE_ENV === 'production';\n  var cookieOptions = {\n    expires: new Date(Date.now() + process.env.JWT_COOKIE_EXPIRES_IN * 24 * 60 * 60 * 1000),\n    httpOnly: true,\n    secure: isProduction,\n    sameSite: isProduction ? 'none' : 'lax'\n  };\n  res.cookie('jwt', token, cookieOptions);\n\n  // Remove password from output\n  user.password = undefined;\n  res.status(statusCode).json({\n    status: 'success',\n    token: token,\n    data: {\n      user: user\n    }\n  });\n};\nexports.signup = catchAsync(/*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next) {\n    var newUser, url;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          _context.n = 1;\n          return User.create({\n            name: req.body.name,\n            email: req.body.email,\n            role: req.body.role || 'user',\n            password: req.body.password,\n            photo: req.body.photo || 'default.jpg',\n            passwordConfirm: req.body.passwordConfirm\n          });\n        case 1:\n          newUser = _context.v;\n          url = \"\".concat(req.protocol, \"://\").concat(req.get('host'), \"/me\");\n          console.log(url);\n          _context.n = 2;\n          return new Email(newUser, url).sendWelcome();\n        case 2:\n          createSendToken(newUser, 201, res);\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nexports.login = catchAsync(/*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, email, password, user, _t;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _req$body = req.body, email = _req$body.email, password = _req$body.password; // 1) Check if email & password exists\n          if (!(!email || !password)) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, next(new appError('Please provide email and password!', 400)));\n        case 1:\n          _context2.n = 2;\n          return User.findOne({\n            email: email\n          }).select('+password');\n        case 2:\n          user = _context2.v;\n          _t = !user;\n          if (_t) {\n            _context2.n = 4;\n            break;\n          }\n          _context2.n = 3;\n          return user.correctPassword(password, user.password);\n        case 3:\n          _t = !_context2.v;\n        case 4:\n          if (!_t) {\n            _context2.n = 5;\n            break;\n          }\n          return _context2.a(2, next(new appError('Incorrect email or password', 401)));\n        case 5:\n          // 3) If everything is OK, send token back to a client\n          createSendToken(user, 200, res);\n        case 6:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexports.protect = catchAsync(/*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(req, res, next) {\n    var token, decoded, currentUser;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          // 1) Getting token & check if it exists\n\n          if (\n          // headers name MUST be Authorization and value MUST start with Bearer\n          req.headers.authorization && req.headers.authorization.startsWith('Bearer')) {\n            token = req.headers.authorization.split(' ')[1];\n          } else if (req.cookies.jwt) {\n            token = req.cookies.jwt;\n          }\n          if (token) {\n            _context3.n = 1;\n            break;\n          }\n          return _context3.a(2, next(new appError('You are not logged in! Please log in to get access', 401)));\n        case 1:\n          _context3.n = 2;\n          return promisify(jwt.verify)(token, process.env.JWT_SECRET);\n        case 2:\n          decoded = _context3.v;\n          _context3.n = 3;\n          return User.findById(decoded.id);\n        case 3:\n          currentUser = _context3.v;\n          if (currentUser) {\n            _context3.n = 4;\n            break;\n          }\n          return _context3.a(2, next(new appError('The user this token belonged to does no longer exist.', 401)));\n        case 4:\n          if (!currentUser.changedPasswordAfter(decoded.iat)) {\n            _context3.n = 5;\n            break;\n          }\n          return _context3.a(2, next(new appError('User recently changed password. Please log in again!', 401)));\n        case 5:\n          // Grant access to protected route\n          req.user = currentUser;\n          next();\n        case 6:\n          return _context3.a(2);\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexports.restrictTo = function () {\n  for (var _len = arguments.length, roles = new Array(_len), _key = 0; _key < _len; _key++) {\n    roles[_key] = arguments[_key];\n  }\n  return function (req, res, next) {\n    // roles is an array (closure)\n    // Since protect middleware runs first, we have access to req.user.role\n    console.log(req.user.role);\n    if (!roles.includes(req.user.role)) {\n      return next(new appError('You do not have permission to perform this action', 403));\n    }\n    next();\n  };\n};\n\n// I NEED TO GO THROUGH HOW EXACTLY THIS TRAPPING THINGY WORKS! MAILTRAP.IO\n\nexports.forgotPassword = catchAsync(/*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var user, resetToken, resetURL, _t2;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.p = _context4.n) {\n        case 0:\n          _context4.n = 1;\n          return User.findOne({\n            email: req.body.email\n          });\n        case 1:\n          user = _context4.v;\n          if (user) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, next(new appError('There is no user with that email address.', 404)));\n        case 2:\n          // 2) Generate the random reset\n          resetToken = user.createPasswordResetToken();\n          console.log(resetToken);\n          _context4.n = 3;\n          return user.save({\n            validateBeforeSave: false\n          });\n        case 3:\n          _context4.p = 3;\n          resetURL = \"\".concat(req.protocol, \"://\").concat(req.get('host'), \"/api/v1/users/resetPassword/\").concat(resetToken);\n          _context4.n = 4;\n          return new Email(user, resetURL).sendPasswordReset();\n        case 4:\n          _context4.n = 5;\n          return res.status(200).json({\n            status: 'success',\n            message: 'Token sent to email!'\n          });\n        case 5:\n          _context4.n = 8;\n          break;\n        case 6:\n          _context4.p = 6;\n          _t2 = _context4.v;\n          user.passwordResetToken = undefined;\n          user.passwordResetExpires = undefined;\n          _context4.n = 7;\n          return user.save({\n            validateBeforeSave: false\n          });\n        case 7:\n          return _context4.a(2, next(new appError('There was an error sending the email. Try again later', 500)));\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[3, 6]]);\n  }));\n  return function (_x0, _x1, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexports.resetPassword = catchAsync(/*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var hashedToken, user;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          // 1) Get user based on the token\n          hashedToken = crypto.createHash('sha256').update(req.params.token).digest('hex');\n          _context5.n = 1;\n          return User.findOne({\n            passwordResetToken: hashedToken,\n            passwordResetExpires: {\n              $gt: Date.now()\n            }\n          });\n        case 1:\n          user = _context5.v;\n          if (user) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, next(new appError('Token is invalid or has expired', 400)));\n        case 2:\n          // Saving is NEEDED, because this only modifies the document\n          user.password = req.body.password;\n          user.passwordConfirm = req.body.passwordConfirm;\n          user.passwordResetToken = undefined;\n          user.passwordResetExpires = undefined;\n          _context5.n = 3;\n          return user.save();\n        case 3:\n          // 3) Update changedPasswordAt property for the user\n          // 4) Log the user in, send JWT to a client\n          createSendToken(user, 200, res);\n        case 4:\n          return _context5.a(2);\n      }\n    }, _callee5);\n  }));\n  return function (_x11, _x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}());\n\n// MY SOLUTION\n\n/*\nexports.updatePassword = catchAsync(async (req, res, next) => {\n  // 1) Get user from the collection\n  const user = await User.findOne({ email: req.body.email }).select(\n    '+password',\n  ); // password won't show so we select it manually;\n\n  // 2) Check if POSTed current password is correct\n  if (\n    !user ||\n    !(await user.correctPassword(req.body.currentPassword, user.password))\n  ) {\n    return next(new appError('Your current password is wrong', 401));\n  }\n\n  // I NEEDED TO SAVE IT so I won't have to encrypt AGAIN like this\n  // 3) Update the password\n  user.password = await bcrypt.hash(req.body.currentPassword, 12);\n  console.log(user);\n\n  // 4) Log user in, send JWT\n  const token = signToken(user._id);\n\n  res.status(200).json({\n    status: 'success',\n    token,\n  });\n});\n*/\n\nexports.updatePassword = catchAsync(/*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(req, res, next) {\n    var user;\n    return _regenerator().w(function (_context6) {\n      while (1) switch (_context6.n) {\n        case 0:\n          _context6.n = 1;\n          return User.findById(req.user.id).select('+password');\n        case 1:\n          user = _context6.v;\n          _context6.n = 2;\n          return user.correctPassword(req.body.passwordCurrent, user.password);\n        case 2:\n          if (_context6.v) {\n            _context6.n = 3;\n            break;\n          }\n          return _context6.a(2, next(new appError('Your current password is wrong', 401)));\n        case 3:\n          user.password = req.body.password;\n          user.passwordConfirm = req.body.passwordConfirm;\n          _context6.n = 4;\n          return user.save();\n        case 4:\n          createSendToken(user, 200, res);\n        case 5:\n          return _context6.a(2);\n      }\n    }, _callee6);\n  }));\n  return function (_x14, _x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nexports.logout = catchAsync(/*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Clear the JWT cookie by setting it to expire immediately\n          res.cookie('jwt', 'loggedout', {\n            expires: new Date(Date.now() + 10 * 1000),\n            // Expires in 10 seconds\n            httpOnly: true\n          });\n          res.status(200).json({\n            status: 'success'\n          });\n        case 1:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref7.apply(this, arguments);\n  };\n}());\nexports.getMe = catchAsync(/*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var user;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          _context8.n = 1;\n          return User.findById(req.user.id);\n        case 1:\n          user = _context8.v;\n          if (user) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, next(new appError('User not found', 404)));\n        case 2:\n          res.status(200).json({\n            status: 'success',\n            data: {\n              user: user\n            }\n          });\n        case 3:\n          return _context8.a(2);\n      }\n    }, _callee8);\n  }));\n  return function (_x20, _x21, _x22) {\n    return _ref8.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIl9yZXF1aXJlIiwicmVxdWlyZSIsInByb21pc2lmeSIsImNyeXB0byIsImp3dCIsIlVzZXIiLCJjYXRjaEFzeW5jIiwiYXBwRXJyb3IiLCJFbWFpbCIsInNpZ25Ub2tlbiIsImlkIiwic2lnbiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwiSldUX0VYUElSRVNfSU4iLCJjcmVhdGVTZW5kVG9rZW4iLCJ1c2VyIiwic3RhdHVzQ29kZSIsInJlcyIsInRva2VuIiwiX2lkIiwiaXNQcm9kdWN0aW9uIiwiTk9ERV9FTlYiLCJjb29raWVPcHRpb25zIiwiZXhwaXJlcyIsIkRhdGUiLCJub3ciLCJKV1RfQ09PS0lFX0VYUElSRVNfSU4iLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwiY29va2llIiwicGFzc3dvcmQiLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsImV4cG9ydHMiLCJzaWdudXAiLCJfcmVmIiwiX2NhbGxlZSIsInJlcSIsIm5leHQiLCJuZXdVc2VyIiwidXJsIiwiX2NvbnRleHQiLCJuYW1lIiwiYm9keSIsImVtYWlsIiwicm9sZSIsInBob3RvIiwicGFzc3dvcmRDb25maXJtIiwiY29uY2F0IiwicHJvdG9jb2wiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwic2VuZFdlbGNvbWUiLCJfeCIsIl94MiIsIl94MyIsImxvZ2luIiwiX3JlZjIiLCJfY2FsbGVlMiIsIl9yZXEkYm9keSIsIl90IiwiX2NvbnRleHQyIiwiZmluZE9uZSIsInNlbGVjdCIsImNvcnJlY3RQYXNzd29yZCIsIl94NCIsIl94NSIsIl94NiIsInByb3RlY3QiLCJfcmVmMyIsIl9jYWxsZWUzIiwiZGVjb2RlZCIsImN1cnJlbnRVc2VyIiwiX2NvbnRleHQzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwic3BsaXQiLCJjb29raWVzIiwidmVyaWZ5IiwiZmluZEJ5SWQiLCJjaGFuZ2VkUGFzc3dvcmRBZnRlciIsImlhdCIsIl94NyIsIl94OCIsIl94OSIsInJlc3RyaWN0VG8iLCJfbGVuIiwicm9sZXMiLCJBcnJheSIsIl9rZXkiLCJpbmNsdWRlcyIsImZvcmdvdFBhc3N3b3JkIiwiX3JlZjQiLCJfY2FsbGVlNCIsInJlc2V0VG9rZW4iLCJyZXNldFVSTCIsIl90MiIsIl9jb250ZXh0NCIsImNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbiIsInNhdmUiLCJ2YWxpZGF0ZUJlZm9yZVNhdmUiLCJzZW5kUGFzc3dvcmRSZXNldCIsIm1lc3NhZ2UiLCJwYXNzd29yZFJlc2V0VG9rZW4iLCJwYXNzd29yZFJlc2V0RXhwaXJlcyIsIl94MCIsIl94MSIsIl94MTAiLCJyZXNldFBhc3N3b3JkIiwiX3JlZjUiLCJfY2FsbGVlNSIsImhhc2hlZFRva2VuIiwiX2NvbnRleHQ1IiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsInBhcmFtcyIsImRpZ2VzdCIsIiRndCIsIl94MTEiLCJfeDEyIiwiX3gxMyIsInVwZGF0ZVBhc3N3b3JkIiwiX3JlZjYiLCJfY2FsbGVlNiIsIl9jb250ZXh0NiIsInBhc3N3b3JkQ3VycmVudCIsIl94MTQiLCJfeDE1IiwiX3gxNiIsImxvZ291dCIsIl9yZWY3IiwiX2NhbGxlZTciLCJfY29udGV4dDciLCJfeDE3IiwiX3gxOCIsIl94MTkiLCJnZXRNZSIsIl9yZWY4IiwiX2NhbGxlZTgiLCJfY29udGV4dDgiLCJfeDIwIiwiX3gyMSIsIl94MjIiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJhdXRoQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHByb21pc2lmeSB9ID0gcmVxdWlyZSgndXRpbCcpO1xuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlck1vZGVsJyk7XG5jb25zdCBjYXRjaEFzeW5jID0gcmVxdWlyZSgnLi4vdXRpbHMvY2F0Y2hBc3luYycpO1xuY29uc3QgYXBwRXJyb3IgPSByZXF1aXJlKCcuLi91dGlscy9hcHBFcnJvcicpO1xuY29uc3QgRW1haWwgPSByZXF1aXJlKCcuLi91dGlscy9lbWFpbCcpO1xuXG5jb25zdCBzaWduVG9rZW4gPSAoaWQpID0+IHtcbiAgcmV0dXJuIGp3dC5zaWduKHsgaWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwge1xuICAgIGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4sXG4gIH0pO1xufTtcblxuY29uc3QgY3JlYXRlU2VuZFRva2VuID0gKHVzZXIsIHN0YXR1c0NvZGUsIHJlcykgPT4ge1xuICBjb25zdCB0b2tlbiA9IHNpZ25Ub2tlbih1c2VyLl9pZCk7XG5cbiAgY29uc3QgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbiAgY29uc3QgY29va2llT3B0aW9ucyA9IHtcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShcbiAgICAgIERhdGUubm93KCkgKyBwcm9jZXNzLmVudi5KV1RfQ09PS0lFX0VYUElSRVNfSU4gKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICksXG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2VjdXJlOiBpc1Byb2R1Y3Rpb24sXG4gICAgc2FtZVNpdGU6IGlzUHJvZHVjdGlvbiA/ICdub25lJyA6ICdsYXgnLFxuICB9O1xuXG4gIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCBjb29raWVPcHRpb25zKTtcblxuICAvLyBSZW1vdmUgcGFzc3dvcmQgZnJvbSBvdXRwdXRcbiAgdXNlci5wYXNzd29yZCA9IHVuZGVmaW5lZDtcblxuICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIHRva2VuLFxuICAgIGRhdGE6IHtcbiAgICAgIHVzZXIsXG4gICAgfSxcbiAgfSk7XG59O1xuXG5leHBvcnRzLnNpZ251cCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgbmFtZTogcmVxLmJvZHkubmFtZSxcbiAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgcm9sZTogcmVxLmJvZHkucm9sZSB8fCAndXNlcicsXG4gICAgcGFzc3dvcmQ6IHJlcS5ib2R5LnBhc3N3b3JkLFxuICAgIHBob3RvOiByZXEuYm9keS5waG90byB8fCAnZGVmYXVsdC5qcGcnLFxuICAgIHBhc3N3b3JkQ29uZmlybTogcmVxLmJvZHkucGFzc3dvcmRDb25maXJtLFxuICB9KTtcbiAgY29uc3QgdXJsID0gYCR7cmVxLnByb3RvY29sfTovLyR7cmVxLmdldCgnaG9zdCcpfS9tZWA7XG4gIGNvbnNvbGUubG9nKHVybCk7XG5cbiAgYXdhaXQgbmV3IEVtYWlsKG5ld1VzZXIsIHVybCkuc2VuZFdlbGNvbWUoKTtcblxuICBjcmVhdGVTZW5kVG9rZW4obmV3VXNlciwgMjAxLCByZXMpO1xufSk7XG5cbmV4cG9ydHMubG9naW4gPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgLy8gMSkgQ2hlY2sgaWYgZW1haWwgJiBwYXNzd29yZCBleGlzdHNcbiAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1BsZWFzZSBwcm92aWRlIGVtYWlsIGFuZCBwYXNzd29yZCEnLCA0MDApKTtcbiAgfVxuXG4gIC8vIDIpIENoZWNrIGlmIHRoZSB1c2VyIGV4aXN0cyAmIHBhc3N3b3JkIGlzIGNvcnJlY3RcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pLnNlbGVjdCgnK3Bhc3N3b3JkJyk7IC8vIHBhc3N3b3JkIHdvbid0IHNob3cgc28gd2Ugc2VsZWN0IGl0IG1hbnVhbGx5XG5cbiAgaWYgKCF1c2VyIHx8ICEoYXdhaXQgdXNlci5jb3JyZWN0UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSkge1xuICAgIHJldHVybiBuZXh0KG5ldyBhcHBFcnJvcignSW5jb3JyZWN0IGVtYWlsIG9yIHBhc3N3b3JkJywgNDAxKSk7XG4gIH1cbiAgLy8gMykgSWYgZXZlcnl0aGluZyBpcyBPSywgc2VuZCB0b2tlbiBiYWNrIHRvIGEgY2xpZW50XG4gIGNyZWF0ZVNlbmRUb2tlbih1c2VyLCAyMDAsIHJlcyk7XG59KTtcblxuZXhwb3J0cy5wcm90ZWN0ID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gMSkgR2V0dGluZyB0b2tlbiAmIGNoZWNrIGlmIGl0IGV4aXN0c1xuICBsZXQgdG9rZW47XG4gIGlmIChcbiAgICAvLyBoZWFkZXJzIG5hbWUgTVVTVCBiZSBBdXRob3JpemF0aW9uIGFuZCB2YWx1ZSBNVVNUIHN0YXJ0IHdpdGggQmVhcmVyXG4gICAgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiAmJlxuICAgIHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3RhcnRzV2l0aCgnQmVhcmVyJylcbiAgKSB7XG4gICAgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV07XG4gIH0gZWxzZSBpZiAocmVxLmNvb2tpZXMuand0KSB7XG4gICAgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gIH1cblxuICBpZiAoIXRva2VuKSB7XG4gICAgcmV0dXJuIG5leHQoXG4gICAgICBuZXcgYXBwRXJyb3IoJ1lvdSBhcmUgbm90IGxvZ2dlZCBpbiEgUGxlYXNlIGxvZyBpbiB0byBnZXQgYWNjZXNzJywgNDAxKSxcbiAgICApO1xuICB9XG5cbiAgLy8gMikgVmVyaWZpY2F0aW9uIHRva2VuIChzaWduaXR1cmUgdmFsaWRhdGlvbi92ZXJpZmljYXRpb24pXG4gIGNvbnN0IGRlY29kZWQgPSBhd2FpdCBwcm9taXNpZnkoand0LnZlcmlmeSkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuXG4gIC8vIDMpIENoZWNrIGlmIHVzZXIgc3RpbGwgZXhpc3RzXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChkZWNvZGVkLmlkKTtcblxuICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgcmV0dXJuIG5leHQoXG4gICAgICBuZXcgYXBwRXJyb3IoXG4gICAgICAgICdUaGUgdXNlciB0aGlzIHRva2VuIGJlbG9uZ2VkIHRvIGRvZXMgbm8gbG9uZ2VyIGV4aXN0LicsXG4gICAgICAgIDQwMSxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuICAvLyA0KSBDaGVjayBpZiB1c2VyIGNoYW5nZWQgcGFzc3dvcmQgYWZ0ZXIgdG9rZW4gd2FzIGlzc3VlZFxuICBpZiAoY3VycmVudFVzZXIuY2hhbmdlZFBhc3N3b3JkQWZ0ZXIoZGVjb2RlZC5pYXQpKSB7XG4gICAgcmV0dXJuIG5leHQoXG4gICAgICBuZXcgYXBwRXJyb3IoJ1VzZXIgcmVjZW50bHkgY2hhbmdlZCBwYXNzd29yZC4gUGxlYXNlIGxvZyBpbiBhZ2FpbiEnLCA0MDEpLFxuICAgICk7XG4gIH1cblxuICAvLyBHcmFudCBhY2Nlc3MgdG8gcHJvdGVjdGVkIHJvdXRlXG4gIHJlcS51c2VyID0gY3VycmVudFVzZXI7XG4gIG5leHQoKTtcbn0pO1xuXG5leHBvcnRzLnJlc3RyaWN0VG8gPSAoLi4ucm9sZXMpID0+IHtcbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIC8vIHJvbGVzIGlzIGFuIGFycmF5IChjbG9zdXJlKVxuICAgIC8vIFNpbmNlIHByb3RlY3QgbWlkZGxld2FyZSBydW5zIGZpcnN0LCB3ZSBoYXZlIGFjY2VzcyB0byByZXEudXNlci5yb2xlXG4gICAgY29uc29sZS5sb2cocmVxLnVzZXIucm9sZSk7XG5cbiAgICBpZiAoIXJvbGVzLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XG4gICAgICByZXR1cm4gbmV4dChcbiAgICAgICAgbmV3IGFwcEVycm9yKCdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBwZXJmb3JtIHRoaXMgYWN0aW9uJywgNDAzKSxcbiAgICAgICk7XG4gICAgfVxuICAgIG5leHQoKTtcbiAgfTtcbn07XG5cbi8vIEkgTkVFRCBUTyBHTyBUSFJPVUdIIEhPVyBFWEFDVExZIFRISVMgVFJBUFBJTkcgVEhJTkdZIFdPUktTISBNQUlMVFJBUC5JT1xuXG5leHBvcnRzLmZvcmdvdFBhc3N3b3JkID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB9KTtcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1RoZXJlIGlzIG5vIHVzZXIgd2l0aCB0aGF0IGVtYWlsIGFkZHJlc3MuJywgNDA0KSk7XG4gIH1cbiAgLy8gMikgR2VuZXJhdGUgdGhlIHJhbmRvbSByZXNldFxuICBjb25zdCByZXNldFRva2VuID0gdXNlci5jcmVhdGVQYXNzd29yZFJlc2V0VG9rZW4oKTtcblxuICBjb25zb2xlLmxvZyhyZXNldFRva2VuKTtcblxuICBhd2FpdCB1c2VyLnNhdmUoeyB2YWxpZGF0ZUJlZm9yZVNhdmU6IGZhbHNlIH0pO1xuXG4gIC8vIDMpIFNlbmQgaXQgdG8gdXNlcidzIGVtYWlsXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzZXRVUkwgPSBgJHtyZXEucHJvdG9jb2x9Oi8vJHtyZXEuZ2V0KCdob3N0Jyl9L2FwaS92MS91c2Vycy9yZXNldFBhc3N3b3JkLyR7cmVzZXRUb2tlbn1gO1xuICAgIGF3YWl0IG5ldyBFbWFpbCh1c2VyLCByZXNldFVSTCkuc2VuZFBhc3N3b3JkUmVzZXQoKTtcbiAgICBhd2FpdCByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgIG1lc3NhZ2U6ICdUb2tlbiBzZW50IHRvIGVtYWlsIScsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdXNlci5wYXNzd29yZFJlc2V0VG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgdXNlci5wYXNzd29yZFJlc2V0RXhwaXJlcyA9IHVuZGVmaW5lZDtcblxuICAgIGF3YWl0IHVzZXIuc2F2ZSh7IHZhbGlkYXRlQmVmb3JlU2F2ZTogZmFsc2UgfSk7XG5cbiAgICByZXR1cm4gbmV4dChcbiAgICAgIG5ldyBhcHBFcnJvcihcbiAgICAgICAgJ1RoZXJlIHdhcyBhbiBlcnJvciBzZW5kaW5nIHRoZSBlbWFpbC4gVHJ5IGFnYWluIGxhdGVyJyxcbiAgICAgICAgNTAwLFxuICAgICAgKSxcbiAgICApO1xuICB9XG59KTtcblxuZXhwb3J0cy5yZXNldFBhc3N3b3JkID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gMSkgR2V0IHVzZXIgYmFzZWQgb24gdGhlIHRva2VuXG4gIGNvbnN0IGhhc2hlZFRva2VuID0gY3J5cHRvXG4gICAgLmNyZWF0ZUhhc2goJ3NoYTI1NicpXG4gICAgLnVwZGF0ZShyZXEucGFyYW1zLnRva2VuKVxuICAgIC5kaWdlc3QoJ2hleCcpO1xuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgIHBhc3N3b3JkUmVzZXRUb2tlbjogaGFzaGVkVG9rZW4sXG4gICAgcGFzc3dvcmRSZXNldEV4cGlyZXM6IHsgJGd0OiBEYXRlLm5vdygpIH0sXG4gIH0pO1xuXG4gIC8vIDIpIElmIHRva2VuIGhhcyBub3QgZXhwaXJlZCBhbmQgdGhlcmUgaXMgYSB1c2VyLCBzZXQgdGhlIG5ldyBwYXNzd29yZFxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1Rva2VuIGlzIGludmFsaWQgb3IgaGFzIGV4cGlyZWQnLCA0MDApKTtcbiAgfVxuXG4gIC8vIFNhdmluZyBpcyBORUVERUQsIGJlY2F1c2UgdGhpcyBvbmx5IG1vZGlmaWVzIHRoZSBkb2N1bWVudFxuICB1c2VyLnBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQ7XG4gIHVzZXIucGFzc3dvcmRDb25maXJtID0gcmVxLmJvZHkucGFzc3dvcmRDb25maXJtO1xuICB1c2VyLnBhc3N3b3JkUmVzZXRUb2tlbiA9IHVuZGVmaW5lZDtcbiAgdXNlci5wYXNzd29yZFJlc2V0RXhwaXJlcyA9IHVuZGVmaW5lZDtcblxuICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAvLyAzKSBVcGRhdGUgY2hhbmdlZFBhc3N3b3JkQXQgcHJvcGVydHkgZm9yIHRoZSB1c2VyXG4gIC8vIDQpIExvZyB0aGUgdXNlciBpbiwgc2VuZCBKV1QgdG8gYSBjbGllbnRcbiAgY3JlYXRlU2VuZFRva2VuKHVzZXIsIDIwMCwgcmVzKTtcbn0pO1xuXG4vLyBNWSBTT0xVVElPTlxuXG4vKlxuZXhwb3J0cy51cGRhdGVQYXNzd29yZCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIDEpIEdldCB1c2VyIGZyb20gdGhlIGNvbGxlY3Rpb25cbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB9KS5zZWxlY3QoXG4gICAgJytwYXNzd29yZCcsXG4gICk7IC8vIHBhc3N3b3JkIHdvbid0IHNob3cgc28gd2Ugc2VsZWN0IGl0IG1hbnVhbGx5O1xuXG4gIC8vIDIpIENoZWNrIGlmIFBPU1RlZCBjdXJyZW50IHBhc3N3b3JkIGlzIGNvcnJlY3RcbiAgaWYgKFxuICAgICF1c2VyIHx8XG4gICAgIShhd2FpdCB1c2VyLmNvcnJlY3RQYXNzd29yZChyZXEuYm9keS5jdXJyZW50UGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKVxuICApIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1lvdXIgY3VycmVudCBwYXNzd29yZCBpcyB3cm9uZycsIDQwMSkpO1xuICB9XG5cbiAgLy8gSSBORUVERUQgVE8gU0FWRSBJVCBzbyBJIHdvbid0IGhhdmUgdG8gZW5jcnlwdCBBR0FJTiBsaWtlIHRoaXNcbiAgLy8gMykgVXBkYXRlIHRoZSBwYXNzd29yZFxuICB1c2VyLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocmVxLmJvZHkuY3VycmVudFBhc3N3b3JkLCAxMik7XG4gIGNvbnNvbGUubG9nKHVzZXIpO1xuXG4gIC8vIDQpIExvZyB1c2VyIGluLCBzZW5kIEpXVFxuICBjb25zdCB0b2tlbiA9IHNpZ25Ub2tlbih1c2VyLl9pZCk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIHRva2VuLFxuICB9KTtcbn0pO1xuKi9cblxuZXhwb3J0cy51cGRhdGVQYXNzd29yZCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLmlkKS5zZWxlY3QoJytwYXNzd29yZCcpO1xuXG4gIGlmICghKGF3YWl0IHVzZXIuY29ycmVjdFBhc3N3b3JkKHJlcS5ib2R5LnBhc3N3b3JkQ3VycmVudCwgdXNlci5wYXNzd29yZCkpKSB7XG4gICAgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdZb3VyIGN1cnJlbnQgcGFzc3dvcmQgaXMgd3JvbmcnLCA0MDEpKTtcbiAgfVxuXG4gIHVzZXIucGFzc3dvcmQgPSByZXEuYm9keS5wYXNzd29yZDtcbiAgdXNlci5wYXNzd29yZENvbmZpcm0gPSByZXEuYm9keS5wYXNzd29yZENvbmZpcm07XG4gIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICBjcmVhdGVTZW5kVG9rZW4odXNlciwgMjAwLCByZXMpO1xufSk7XG5cbmV4cG9ydHMubG9nb3V0ID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gQ2xlYXIgdGhlIEpXVCBjb29raWUgYnkgc2V0dGluZyBpdCB0byBleHBpcmUgaW1tZWRpYXRlbHlcbiAgcmVzLmNvb2tpZSgnand0JywgJ2xvZ2dlZG91dCcsIHtcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMTAgKiAxMDAwKSwgLy8gRXhwaXJlcyBpbiAxMCBzZWNvbmRzXG4gICAgaHR0cE9ubHk6IHRydWUsXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRNZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIFRoZSBwcm90ZWN0IG1pZGRsZXdhcmUgc2V0cyByZXEudXNlciwgc28gd2UganVzdCByZXR1cm4gaXRcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuaWQpO1xuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBuZXh0KG5ldyBhcHBFcnJvcignVXNlciBub3QgZm91bmQnLCA0MDQpKTtcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICBkYXRhOiB7XG4gICAgICB1c2VyLFxuICAgIH0sXG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7OzBCQUNBLHVLQUFBQSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSx3QkFBQUMsTUFBQSxHQUFBQSxNQUFBLE9BQUFDLENBQUEsR0FBQUYsQ0FBQSxDQUFBRyxRQUFBLGtCQUFBQyxDQUFBLEdBQUFKLENBQUEsQ0FBQUssV0FBQSw4QkFBQUMsRUFBQU4sQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBQyxDQUFBLEdBQUFMLENBQUEsSUFBQUEsQ0FBQSxDQUFBTSxTQUFBLFlBQUFDLFNBQUEsR0FBQVAsQ0FBQSxHQUFBTyxTQUFBLEVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLENBQUFMLENBQUEsQ0FBQUMsU0FBQSxVQUFBSyxtQkFBQSxDQUFBSCxDQUFBLHVCQUFBVixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBRSxDQUFBLEVBQUFDLENBQUEsRUFBQUcsQ0FBQSxFQUFBSSxDQUFBLE1BQUFDLENBQUEsR0FBQVgsQ0FBQSxRQUFBWSxDQUFBLE9BQUFDLENBQUEsS0FBQUYsQ0FBQSxLQUFBYixDQUFBLEtBQUFnQixDQUFBLEVBQUFwQixDQUFBLEVBQUFxQixDQUFBLEVBQUFDLENBQUEsRUFBQU4sQ0FBQSxFQUFBTSxDQUFBLENBQUFDLElBQUEsQ0FBQXZCLENBQUEsTUFBQXNCLENBQUEsV0FBQUEsRUFBQXJCLENBQUEsRUFBQUMsQ0FBQSxXQUFBTSxDQUFBLEdBQUFQLENBQUEsRUFBQVEsQ0FBQSxNQUFBRyxDQUFBLEdBQUFaLENBQUEs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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_require","require","promisify","crypto","jwt","User","catchAsync","appError","Email","signToken","id","sign","process","env","JWT_SECRET","expiresIn","JWT_EXPIRES_IN","createSendToken","user","statusCode","res","token","_id","isProduction","NODE_ENV","cookieOptions","expires","Date","now","JWT_COOKIE_EXPIRES_IN","httpOnly","secure","sameSite","cookie","password","undefined","status","json","data","exports","signup","_ref","_callee","req","next","newUser","url","_context","name","body","email","role","photo","passwordConfirm","concat","protocol","get","console","log","sendWelcome","_x","_x2","_x3","login","_ref2","_callee2","_req$body","_t","_context2","findOne","select","correctPassword","_x4","_x5","_x6","protect","_ref3","_callee3","decoded","currentUser","_context3","headers","authorization","startsWith","split","cookies","verify","findById","changedPasswordAfter","iat","_x7","_x8","_x9","restrictTo","_len","roles","Array","_key","includes","forgotPassword","_ref4","_callee4","resetToken","resetURL","_t2","_context4","createPasswordResetToken","save","validateBeforeSave","sendPasswordReset","message","passwordResetToken","passwordResetExpires","_x0","_x1","_x10","resetPassword","_ref5","_callee5","hashedToken","_context5","createHash","update","params","digest","$gt","_x11","_x12","_x13","updatePassword","_ref6","_callee6","_context6","passwordCurrent","_x14","_x15","_x16","logout","_ref7","_callee7","_context7","_x17","_x18","_x19","getMe","_ref8","_callee8","_context8","_x20","_x21","_x22"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["authController.js"],"sourcesContent":["const { promisify } = require('util');\nconst crypto = require('crypto');\nconst jwt = require('jsonwebtoken');\nconst User = require('../models/userModel');\nconst catchAsync = require('../utils/catchAsync');\nconst appError = require('../utils/appError');\nconst Email = require('../utils/email');\n\nconst signToken = (id) => {\n  return jwt.sign({ id }, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRES_IN,\n  });\n};\n\nconst createSendToken = (user, statusCode, res) => {\n  const token = signToken(user._id);\n\n  const isProduction = process.env.NODE_ENV === 'production';\n  const cookieOptions = {\n    expires: new Date(\n      Date.now() + process.env.JWT_COOKIE_EXPIRES_IN * 24 * 60 * 60 * 1000,\n    ),\n    httpOnly: true,\n    secure: isProduction,\n    sameSite: isProduction ? 'none' : 'lax',\n  };\n\n  res.cookie('jwt', token, cookieOptions);\n\n  // Remove password from output\n  user.password = undefined;\n\n  res.status(statusCode).json({\n    status: 'success',\n    token,\n    data: {\n      user,\n    },\n  });\n};\n\nexports.signup = catchAsync(async (req, res, next) => {\n  const newUser = await User.create({\n    name: req.body.name,\n    email: req.body.email,\n    role: req.body.role || 'user',\n    password: req.body.password,\n    photo: req.body.photo || 'default.jpg',\n    passwordConfirm: req.body.passwordConfirm,\n  });\n  const url = `${req.protocol}://${req.get('host')}/me`;\n  console.log(url);\n\n  await new Email(newUser, url).sendWelcome();\n\n  createSendToken(newUser, 201, res);\n});\n\nexports.login = catchAsync(async (req, res, next) => {\n  const { email, password } = req.body;\n\n  // 1) Check if email & password exists\n  if (!email || !password) {\n    return next(new appError('Please provide email and password!', 400));\n  }\n\n  // 2) Check if the user exists & password is correct\n  const user = await User.findOne({ email }).select('+password'); // password won't show so we select it manually\n\n  if (!user || !(await user.correctPassword(password, user.password))) {\n    return next(new appError('Incorrect email or password', 401));\n  }\n  // 3) If everything is OK, send token back to a client\n  createSendToken(user, 200, res);\n});\n\nexports.protect = catchAsync(async (req, res, next) => {\n  // 1) Getting token & check if it exists\n  let token;\n  if (\n    // headers name MUST be Authorization and value MUST start with Bearer\n    req.headers.authorization &&\n    req.headers.authorization.startsWith('Bearer')\n  ) {\n    token = req.headers.authorization.split(' ')[1];\n  } else if (req.cookies.jwt) {\n    token = req.cookies.jwt;\n  }\n\n  if (!token) {\n    return next(\n      new appError('You are not logged in! Please log in to get access', 401),\n    );\n  }\n\n  // 2) Verification token (signiture validation/verification)\n  const decoded = await promisify(jwt.verify)(token, process.env.JWT_SECRET);\n\n  // 3) Check if user still exists\n  const currentUser = await User.findById(decoded.id);\n\n  if (!currentUser) {\n    return next(\n      new appError(\n        'The user this token belonged to does no longer exist.',\n        401,\n      ),\n    );\n  }\n  // 4) Check if user changed password after token was issued\n  if (currentUser.changedPasswordAfter(decoded.iat)) {\n    return next(\n      new appError('User recently changed password. Please log in again!', 401),\n    );\n  }\n\n  // Grant access to protected route\n  req.user = currentUser;\n  next();\n});\n\nexports.restrictTo = (...roles) => {\n  return (req, res, next) => {\n    // roles is an array (closure)\n    // Since protect middleware runs first, we have access to req.user.role\n    console.log(req.user.role);\n\n    if (!roles.includes(req.user.role)) {\n      return next(\n        new appError('You do not have permission to perform this action', 403),\n      );\n    }\n    next();\n  };\n};\n\n// I NEED TO GO THROUGH HOW EXACTLY THIS TRAPPING THINGY WORKS! MAILTRAP.IO\n\nexports.forgotPassword = catchAsync(async (req, res, next) => {\n  const user = await User.findOne({ email: req.body.email });\n\n  if (!user) {\n    return next(new appError('There is no user with that email address.', 404));\n  }\n  // 2) Generate the random reset\n  const resetToken = user.createPasswordResetToken();\n\n  console.log(resetToken);\n\n  await user.save({ validateBeforeSave: false });\n\n  // 3) Send it to user's email\n  try {\n    const resetURL = `${req.protocol}://${req.get('host')}/api/v1/users/resetPassword/${resetToken}`;\n    await new Email(user, resetURL).sendPasswordReset();\n    await res.status(200).json({\n      status: 'success',\n      message: 'Token sent to email!',\n    });\n  } catch (error) {\n    user.passwordResetToken = undefined;\n    user.passwordResetExpires = undefined;\n\n    await user.save({ validateBeforeSave: false });\n\n    return next(\n      new appError(\n        'There was an error sending the email. Try again later',\n        500,\n      ),\n    );\n  }\n});\n\nexports.resetPassword = catchAsync(async (req, res, next) => {\n  // 1) Get user based on the token\n  const hashedToken = crypto\n    .createHash('sha256')\n    .update(req.params.token)\n    .digest('hex');\n\n  const user = await User.findOne({\n    passwordResetToken: hashedToken,\n    passwordResetExpires: { $gt: Date.now() },\n  });\n\n  // 2) If token has not expired and there is a user, set the new password\n  if (!user) {\n    return next(new appError('Token is invalid or has expired', 400));\n  }\n\n  // Saving is NEEDED, because this only modifies the document\n  user.password = req.body.password;\n  user.passwordConfirm = req.body.passwordConfirm;\n  user.passwordResetToken = undefined;\n  user.passwordResetExpires = undefined;\n\n  await user.save();\n\n  // 3) Update changedPasswordAt property for the user\n  // 4) Log the user in, send JWT to a client\n  createSendToken(user, 200, res);\n});\n\n// MY SOLUTION\n\n/*\nexports.updatePassword = catchAsync(async (req, res, next) => {\n  // 1) Get user from the collection\n  const user = await User.findOne({ email: req.body.email }).select(\n    '+password',\n  ); // password won't show so we select it manually;\n\n  // 2) Check if POSTed current password is correct\n  if (\n    !user ||\n    !(await user.correctPassword(req.body.currentPassword, user.password))\n  ) {\n    return next(new appError('Your current password is wrong', 401));\n  }\n\n  // I NEEDED TO SAVE IT so I won't have to encrypt AGAIN like this\n  // 3) Update the password\n  user.password = await bcrypt.hash(req.body.currentPassword, 12);\n  console.log(user);\n\n  // 4) Log user in, send JWT\n  const token = signToken(user._id);\n\n  res.status(200).json({\n    status: 'success',\n    token,\n  });\n});\n*/\n\nexports.updatePassword = catchAsync(async (req, res, next) => {\n  const user = await User.findById(req.user.id).select('+password');\n\n  if (!(await user.correctPassword(req.body.passwordCurrent, user.password))) {\n    return next(new appError('Your current password is wrong', 401));\n  }\n\n  user.password = req.body.password;\n  user.passwordConfirm = req.body.passwordConfirm;\n  await user.save();\n  createSendToken(user, 200, res);\n});\n\nexports.logout = catchAsync(async (req, res, next) => {\n  // Clear the JWT cookie by setting it to expire immediately\n  res.cookie('jwt', 'loggedout', {\n    expires: new Date(Date.now() + 10 * 1000), // Expires in 10 seconds\n    httpOnly: true,\n  });\n\n  res.status(200).json({\n    status: 'success',\n  });\n});\n\nexports.getMe = catchAsync(async (req, res, next) => {\n  // The protect middleware sets req.user, so we just return it\n  const user = await User.findById(req.user.id);\n\n  if (!user) {\n    return next(new appError('User not found', 404));\n  }\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      user,\n    },\n  });\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1765352670505},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/models/userModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar mongoose = require('mongoose');\nvar validator = require('validator');\nvar bcrypt = require('bcryptjs');\nvar crypto = require('crypto');\nvar userSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'Please, tell us your name']\n  },\n  email: {\n    type: String,\n    required: [true, 'Please provide email'],\n    unique: true,\n    lowercase: true,\n    validate: [validator.isEmail, 'Please provide a valid email']\n  },\n  photo: String,\n  role: {\n    type: String,\n    \"enum\": ['user', 'guide', 'lead-guide', 'admin'],\n    \"default\": 'user'\n  },\n  password: {\n    type: String,\n    required: [true, 'Please, provide a password'],\n    minlength: 8,\n    select: false // Doesn't get send to a client doesn't work with CREATE!\n  },\n  passwordConfirm: {\n    type: String,\n    required: [true, 'Please, confirm a password'],\n    validate: {\n      validator: function validator(el) {\n        // This only works on CREATE and SAVE\n        return el === this.password;\n      },\n      message: 'Passwords are not the same'\n    }\n  },\n  passwordChangedAt: Date,\n  passwordResetToken: String,\n  passwordResetExpires: Date,\n  active: {\n    type: Boolean,\n    \"default\": true,\n    select: false\n  }\n});\n\n// pre => Something that will happen before query - in this case filtering out active status so\n// We don't show inactive (\"deleted\") users\n// This query middleware function is responsible for showing ONLY users that have active status\nuserSchema.pre(/^find/, function (next) {\n  // Points to CURRENT QUERY\n  this.find({\n    active: {\n      $ne: false\n    }\n  });\n  next();\n});\n\n// PASSWORD ENCRYPTION (hashing)\nuserSchema.pre('save', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(next) {\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          if (this.isModified('password')) {\n            _context.n = 1;\n            break;\n          }\n          return _context.a(2, next());\n        case 1:\n          _context.n = 2;\n          return bcrypt.hash(this.password, 12);\n        case 2:\n          this.password = _context.v;\n          //   After user created there password this field isn't really needed anymore in a DB\n          //   Delete the passwordConfirm field\n          this.passwordConfirm = undefined;\n          next();\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee, this);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\nuserSchema.pre('save', function (next) {\n  if (!this.isModified('password') || this.isNew) return next();\n  this.passwordChangedAt = Date.now() - 1000;\n  next();\n});\nuserSchema.methods.correctPassword = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(candidatePassword, userPassword) {\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _context2.n = 1;\n          return bcrypt.compare(candidatePassword, userPassword);\n        case 1:\n          return _context2.a(2, _context2.v);\n      }\n    }, _callee2);\n  }));\n  return function (_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nuserSchema.methods.changedPasswordAfter = function (JWTTimestamp) {\n  console.log(JWTTimestamp);\n  if (this.passwordChangedAt) {\n    var changedTimestamp = parseInt(this.passwordChangedAt.getTime() / 1000, 10);\n    return JWTTimestamp < changedTimestamp;\n  }\n\n  // Not Changed\n  return false;\n};\nuserSchema.methods.createPasswordResetToken = function () {\n  var resetToken = crypto.randomBytes(32).toString('hex');\n  this.passwordResetToken = crypto.createHash('sha256').update(resetToken).digest('hex');\n  this.passwordResetExpires = Date.now() + 10 * 60 * 1000;\n  return resetToken;\n};\nvar User = mongoose.model('User', userSchema);\nmodule.exports = User;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIm1vbmdvb3NlIiwicmVxdWlyZSIsInZhbGlkYXRvciIsImJjcnlwdCIsImNyeXB0byIsInVzZXJTY2hlbWEiLCJTY2hlbWEiLCJuYW1lIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW1haWwiLCJ1bmlxdWUiLCJsb3dlcmNhc2UiLCJ2YWxpZGF0ZSIsImlzRW1haWwiLCJwaG90byIsInJvbGUiLCJwYXNzd29yZCIsIm1pbmxlbmd0aCIsInNlbGVjdCIsInBhc3N3b3JkQ29uZmlybSIsImVsIiwibWVzc2FnZSIsInBhc3N3b3JkQ2hhbmdlZEF0IiwiRGF0ZSIsInBhc3N3b3JkUmVzZXRUb2tlbiIsInBhc3N3b3JkUmVzZXRFeHBpcmVzIiwiYWN0aXZlIiwiQm9vbGVhbiIsInByZSIsIm5leHQiLCJmaW5kIiwiJG5lIiwiX3JlZiIsIl9jYWxsZWUiLCJfY29udGV4dCIsImlzTW9kaWZpZWQiLCJoYXNoIiwidW5kZWZpbmVkIiwiX3giLCJpc05ldyIsIm5vdyIsIm1ldGhvZHMiLCJjb3JyZWN0UGFzc3dvcmQiLCJfcmVmMiIsIl9jYWxsZWUyIiwiY2FuZGlkYXRlUGFzc3dvcmQiLCJ1c2VyUGFzc3dvcmQiLCJfY29udGV4dDIiLCJjb21wYXJlIiwiX3gyIiwiX3gzIiwiY2hhbmdlZFBhc3N3b3JkQWZ0ZXIiLCJKV1RUaW1lc3RhbXAiLCJjb25zb2xlIiwibG9nIiwiY2hhbmdlZFRpbWVzdGFtcCIsInBhcnNlSW50IiwiZ2V0VGltZSIsImNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbiIsInJlc2V0VG9rZW4iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsIlVzZXIiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsidXNlck1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHZhbGlkYXRvciA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpO1xuY29uc3QgYmNyeXB0ID0gcmVxdWlyZSgnYmNyeXB0anMnKTtcbmNvbnN0IGNyeXB0byA9IHJlcXVpcmUoJ2NyeXB0bycpO1xuXG5jb25zdCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIG5hbWU6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogW3RydWUsICdQbGVhc2UsIHRlbGwgdXMgeW91ciBuYW1lJ10gfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlIHByb3ZpZGUgZW1haWwnXSxcbiAgICB1bmlxdWU6IHRydWUsXG4gICAgbG93ZXJjYXNlOiB0cnVlLFxuICAgIHZhbGlkYXRlOiBbdmFsaWRhdG9yLmlzRW1haWwsICdQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIGVtYWlsJ10sXG4gIH0sXG4gIHBob3RvOiBTdHJpbmcsXG4gIHJvbGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZW51bTogWyd1c2VyJywgJ2d1aWRlJywgJ2xlYWQtZ3VpZGUnLCAnYWRtaW4nXSxcbiAgICBkZWZhdWx0OiAndXNlcicsXG4gIH0sXG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1BsZWFzZSwgcHJvdmlkZSBhIHBhc3N3b3JkJ10sXG4gICAgbWlubGVuZ3RoOiA4LFxuICAgIHNlbGVjdDogZmFsc2UsIC8vIERvZXNuJ3QgZ2V0IHNlbmQgdG8gYSBjbGllbnQgZG9lc24ndCB3b3JrIHdpdGggQ1JFQVRFIVxuICB9LFxuICBwYXNzd29yZENvbmZpcm06IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IFt0cnVlLCAnUGxlYXNlLCBjb25maXJtIGEgcGFzc3dvcmQnXSxcbiAgICB2YWxpZGF0ZToge1xuICAgICAgdmFsaWRhdG9yOiBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgLy8gVGhpcyBvbmx5IHdvcmtzIG9uIENSRUFURSBhbmQgU0FWRVxuICAgICAgICByZXR1cm4gZWwgPT09IHRoaXMucGFzc3dvcmQ7XG4gICAgICB9LFxuICAgICAgbWVzc2FnZTogJ1Bhc3N3b3JkcyBhcmUgbm90IHRoZSBzYW1lJyxcbiAgICB9LFxuICB9LFxuICBwYXNzd29yZENoYW5nZWRBdDogRGF0ZSxcbiAgcGFzc3dvcmRSZXNldFRva2VuOiBTdHJpbmcsXG4gIHBhc3N3b3JkUmVzZXRFeHBpcmVzOiBEYXRlLFxuICBhY3RpdmU6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgc2VsZWN0OiBmYWxzZSxcbiAgfSxcbn0pO1xuXG4vLyBwcmUgPT4gU29tZXRoaW5nIHRoYXQgd2lsbCBoYXBwZW4gYmVmb3JlIHF1ZXJ5IC0gaW4gdGhpcyBjYXNlIGZpbHRlcmluZyBvdXQgYWN0aXZlIHN0YXR1cyBzb1xuLy8gV2UgZG9uJ3Qgc2hvdyBpbmFjdGl2ZSAoXCJkZWxldGVkXCIpIHVzZXJzXG4vLyBUaGlzIHF1ZXJ5IG1pZGRsZXdhcmUgZnVuY3Rpb24gaXMgcmVzcG9uc2libGUgZm9yIHNob3dpbmcgT05MWSB1c2VycyB0aGF0IGhhdmUgYWN0aXZlIHN0YXR1c1xudXNlclNjaGVtYS5wcmUoL15maW5kLywgZnVuY3Rpb24gKG5leHQpIHtcbiAgLy8gUG9pbnRzIHRvIENVUlJFTlQgUVVFUllcbiAgdGhpcy5maW5kKHsgYWN0aXZlOiB7ICRuZTogZmFsc2UgfSB9KTtcbiAgbmV4dCgpO1xufSk7XG5cbi8vIFBBU1NXT1JEIEVOQ1JZUFRJT04gKGhhc2hpbmcpXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGFzeW5jIGZ1bmN0aW9uIChuZXh0KSB7XG4gIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpKSByZXR1cm4gbmV4dCgpO1xuXG4gIC8vICAgSGFzaCB0aGUgcGFzc3dvcmQgd2l0aCBjb3N0IG9mIDEyXG4gIHRoaXMucGFzc3dvcmQgPSBhd2FpdCBiY3J5cHQuaGFzaCh0aGlzLnBhc3N3b3JkLCAxMik7XG5cbiAgLy8gICBBZnRlciB1c2VyIGNyZWF0ZWQgdGhlcmUgcGFzc3dvcmQgdGhpcyBmaWVsZCBpc24ndCByZWFsbHkgbmVlZGVkIGFueW1vcmUgaW4gYSBEQlxuICAvLyAgIERlbGV0ZSB0aGUgcGFzc3dvcmRDb25maXJtIGZpZWxkXG4gIHRoaXMucGFzc3dvcmRDb25maXJtID0gdW5kZWZpbmVkO1xuXG4gIG5leHQoKTtcbn0pO1xuXG51c2VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIGlmICghdGhpcy5pc01vZGlmaWVkKCdwYXNzd29yZCcpIHx8IHRoaXMuaXNOZXcpIHJldHVybiBuZXh0KCk7XG5cbiAgdGhpcy5wYXNzd29yZENoYW5nZWRBdCA9IERhdGUubm93KCkgLSAxMDAwO1xuICBuZXh0KCk7XG59KTtcblxudXNlclNjaGVtYS5tZXRob2RzLmNvcnJlY3RQYXNzd29yZCA9IGFzeW5jIGZ1bmN0aW9uIChcbiAgY2FuZGlkYXRlUGFzc3dvcmQsXG4gIHVzZXJQYXNzd29yZCxcbikge1xuICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUoY2FuZGlkYXRlUGFzc3dvcmQsIHVzZXJQYXNzd29yZCk7XG59O1xuXG51c2VyU2NoZW1hLm1ldGhvZHMuY2hhbmdlZFBhc3N3b3JkQWZ0ZXIgPSBmdW5jdGlvbiAoSldUVGltZXN0YW1wKSB7XG4gIGNvbnNvbGUubG9nKEpXVFRpbWVzdGFtcCk7XG5cbiAgaWYgKHRoaXMucGFzc3dvcmRDaGFuZ2VkQXQpIHtcbiAgICBjb25zdCBjaGFuZ2VkVGltZXN0YW1wID0gcGFyc2VJbnQoXG4gICAgICB0aGlzLnBhc3N3b3JkQ2hhbmdlZEF0LmdldFRpbWUoKSAvIDEwMDAsXG4gICAgICAxMCxcbiAgICApO1xuICAgIHJldHVybiBKV1RUaW1lc3RhbXAgPCBjaGFuZ2VkVGltZXN0YW1wO1xuICB9XG5cbiAgLy8gTm90IENoYW5nZWRcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxudXNlclNjaGVtYS5tZXRob2RzLmNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbiA9IGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcmVzZXRUb2tlbiA9IGNyeXB0by5yYW5kb21CeXRlcygzMikudG9TdHJpbmcoJ2hleCcpO1xuXG4gIHRoaXMucGFzc3dvcmRSZXNldFRva2VuID0gY3J5cHRvXG4gICAgLmNyZWF0ZUhhc2goJ3NoYTI1NicpXG4gICAgLnVwZGF0ZShyZXNldFRva2VuKVxuICAgIC5kaWdlc3QoJ2hleCcpO1xuXG4gIHRoaXMucGFzc3dvcmRSZXNldEV4cGlyZXMgPSBEYXRlLm5vdygpICsgMTAgKiA2MCAqIDEwMDA7XG5cbiAgcmV0dXJuIHJlc2V0VG9rZW47XG59O1xuXG5jb25zdCBVc2VyID0gbW9uZ29vc2UubW9kZWwoJ1VzZXInLCB1c2VyU2NoZW1hKTtcblxubW9kdWxlLmV4cG9ydHMgPSBVc2VyO1xuIl0sIm1hcHBpbmdzIjoiOzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNBQUEsVUFBQUssbUJBQUEsQ0FBQUgsQ0FBQSx1QkFBQVYsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUUsQ0FBQSxFQUFBQyxDQUFBLEVBQUFHLENBQUEsRUFBQUksQ0FBQSxNQUFBQyxDQUFBLEdBQUFYLENBQUEsUUFBQVksQ0FBQSxPQUFBQyxDQUFBLEtBQUFGLENBQUEsS0FBQWIsQ0FBQSxLQUFBZ0IsQ0FBQSxFQUFBcEIsQ0FBQSxFQUFBcUIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFOLENBQUEsRUFBQU0sQ0FBQSxDQUFBQyxJQUFBLENBQUF2QixDQUFBLE1BQUFzQixDQUFBLFdBQUFBLEVBQUFyQixDQUFBLEVBQUFDLENBQUEsV0FBQU0sQ0FBQSxHQUFBUCxDQUFBLEVBQUFRLENBQUEsTUFBQUcsQ0FBQSxHQUFBWixDQUFBLEVBQUFtQixDQUFBLENBQUFmLENBQUEsR0FBQUYsQ0FBQSxFQUFBbUIsQ0FBQSxnQkFBQUMsRUFBQXBCLENBQUEsRUFBQUUsQ0FBQSxTQUFBSyxDQUFBLEdBQUFQLENBQUEsRUFBQVUsQ0FBQSxHQUFBUixDQUFBLEVBQUFILENBQUEsT0FB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QSxHQUFBQyxDQUFBLFdBQUFrRSxTQUFBO01BQUEsa0JBQUFBLFNBQUEsQ0FBQW5HLENBQUE7UUFBQTtVQUFBbUcsU0FBQSxDQUFBbkcsQ0FBQTtVQUFBLE9BRUNxRCxNQUFNLENBQUMrQyxPQUFPLENBQUNILGlCQUFpQixFQUFFQyxZQUFZLENBQUM7UUFBQTtVQUFBLE9BQUFDLFNBQUEsQ0FBQWxGLENBQUEsSUFBQWtGLFNBQUEsQ0FBQW5GLENBQUE7TUFBQTtJQUFBLEdBQUFnRixRQUFBO0VBQUEsQ0FDN0Q7RUFBQSxpQkFBQUssR0FBQSxFQUFBQyxHQUFBO0lBQUEsT0FBQVAsS0FBQSxDQUFBaEQsS0FBQSxPQUFBRCxTQUFBO0VBQUE7QUFBQTtBQUVEUyxVQUFVLENBQUNzQyxPQUFPLENBQUNVLG9CQUFvQixHQUFHLFVBQVVDLFlBQVksRUFBRTtFQUNoRUMsT0FBTyxDQUFDQyxHQUFHLENBQUNGLFlBQVksQ0FBQztFQUV6QixJQUFJLElBQUksQ0FBQzlCLGlCQUFpQixFQUFFO0lBQzFCLElBQU1pQyxnQkFBZ0IsR0FBR0MsUUFBUSxDQUMvQixJQUFJLENBQUNsQyxpQkFBaUIsQ0FBQ21DLE9BQU8sQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUN2QyxFQUNGLENBQUM7SUFDRCxPQUFPTCxZQUFZLEdBQUdHLGdCQUFnQjtFQUN4Qzs7RUFFQTtFQUNBLE9BQU8sS0FBSztBQUNkLENBQUM7QUFFRHBELFVBQVUsQ0FBQ3NDLE9BQU8sQ0FBQ2lCLHdCQUF3QixHQUFHLFlBQVk7RUFDeEQsSUFBTUMsVUFBVSxHQUFHekQsTUFBTSxDQUFDMEQsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDQyxRQUFRLENBQUMsS0FBSyxDQUFDO0VBRXpELElBQUksQ0FBQ3JDLGtCQUFrQixHQUFHdEIsTUFBTSxDQUM3QjRELFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FDcEJDLE1BQU0sQ0FBQ0osVUFBVSxDQUFDLENBQ2xCSyxNQUFNLENBQUMsS0FBSyxDQUFDO0VBRWhCLElBQUksQ0FBQ3ZDLG9CQUFvQixHQUFHRixJQUFJLENBQUNpQixHQUFHLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsSUFBSTtFQUV2RCxPQUFPbUIsVUFBVTtBQUNuQixDQUFDO0FBRUQsSUFBTU0sSUFBSSxHQUFHbkUsUUFBUSxDQUFDb0UsS0FBSyxDQUFDLE1BQU0sRUFBRS9ELFVBQVUsQ0FBQztBQUUvQ2dFLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHSCxJQUFJIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","mongoose","require","validator","bcrypt","crypto","userSchema","Schema","name","type","String","required","email","unique","lowercase","validate","isEmail","photo","role","password","minlength","select","passwordConfirm","el","message","passwordChangedAt","Date","passwordResetToken","passwordResetExpires","active","Boolean","pre","next","find","$ne","_ref","_callee","_context","isModified","hash","undefined","_x","isNew","now","methods","correctPassword","_ref2","_callee2","candidatePassword","userPassword","_context2","compare","_x2","_x3","changedPasswordAfter","JWTTimestamp","console","log","changedTimestamp","parseInt","getTime","createPasswordResetToken","resetToken","randomBytes","toString","createHash","update","digest","User","model","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/models/","sources":["userModel.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst validator = require('validator');\nconst bcrypt = require('bcryptjs');\nconst crypto = require('crypto');\n\nconst userSchema = new mongoose.Schema({\n  name: { type: String, required: [true, 'Please, tell us your name'] },\n  email: {\n    type: String,\n    required: [true, 'Please provide email'],\n    unique: true,\n    lowercase: true,\n    validate: [validator.isEmail, 'Please provide a valid email'],\n  },\n  photo: String,\n  role: {\n    type: String,\n    enum: ['user', 'guide', 'lead-guide', 'admin'],\n    default: 'user',\n  },\n  password: {\n    type: String,\n    required: [true, 'Please, provide a password'],\n    minlength: 8,\n    select: false, // Doesn't get send to a client doesn't work with CREATE!\n  },\n  passwordConfirm: {\n    type: String,\n    required: [true, 'Please, confirm a password'],\n    validate: {\n      validator: function (el) {\n        // This only works on CREATE and SAVE\n        return el === this.password;\n      },\n      message: 'Passwords are not the same',\n    },\n  },\n  passwordChangedAt: Date,\n  passwordResetToken: String,\n  passwordResetExpires: Date,\n  active: {\n    type: Boolean,\n    default: true,\n    select: false,\n  },\n});\n\n// pre => Something that will happen before query - in this case filtering out active status so\n// We don't show inactive (\"deleted\") users\n// This query middleware function is responsible for showing ONLY users that have active status\nuserSchema.pre(/^find/, function (next) {\n  // Points to CURRENT QUERY\n  this.find({ active: { $ne: false } });\n  next();\n});\n\n// PASSWORD ENCRYPTION (hashing)\nuserSchema.pre('save', async function (next) {\n  if (!this.isModified('password')) return next();\n\n  //   Hash the password with cost of 12\n  this.password = await bcrypt.hash(this.password, 12);\n\n  //   After user created there password this field isn't really needed anymore in a DB\n  //   Delete the passwordConfirm field\n  this.passwordConfirm = undefined;\n\n  next();\n});\n\nuserSchema.pre('save', function (next) {\n  if (!this.isModified('password') || this.isNew) return next();\n\n  this.passwordChangedAt = Date.now() - 1000;\n  next();\n});\n\nuserSchema.methods.correctPassword = async function (\n  candidatePassword,\n  userPassword,\n) {\n  return await bcrypt.compare(candidatePassword, userPassword);\n};\n\nuserSchema.methods.changedPasswordAfter = function (JWTTimestamp) {\n  console.log(JWTTimestamp);\n\n  if (this.passwordChangedAt) {\n    const changedTimestamp = parseInt(\n      this.passwordChangedAt.getTime() / 1000,\n      10,\n    );\n    return JWTTimestamp < changedTimestamp;\n  }\n\n  // Not Changed\n  return false;\n};\n\nuserSchema.methods.createPasswordResetToken = function () {\n  const resetToken = crypto.randomBytes(32).toString('hex');\n\n  this.passwordResetToken = crypto\n    .createHash('sha256')\n    .update(resetToken)\n    .digest('hex');\n\n  this.passwordResetExpires = Date.now() + 10 * 60 * 1000;\n\n  return resetToken;\n};\n\nconst User = mongoose.model('User', userSchema);\n\nmodule.exports = User;\n"],"mappings":"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","ignoreList":[]}},"mtime":1764935228415},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/email.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar nodemailer = require('nodemailer');\nvar _require = require('html-to-text'),\n  convert = _require.convert;\nvar ReactDOMServer = require('react-dom/server');\nvar React = require('react');\n\n// Specific email templates MUST be imported here\n\nvar WelcomeEmail = require('../templates/WelcomeEmail')[\"default\"];\nvar _require2 = require('../templates/PasswordResetEmail'),\n  PasswordResetEmail = _require2[\"default\"];\nvar getTemplateComponent = function getTemplateComponent(templateName) {\n  switch (templateName) {\n    case 'WELCOME':\n      return WelcomeEmail;\n    case 'PASSWORD_RESET':\n      return PasswordResetEmail;\n    default:\n      throw new Error(\"Template component for '\".concat(templateName, \"' not found.\"));\n  }\n};\nmodule.exports = /*#__PURE__*/function () {\n  function Email(user, url) {\n    _classCallCheck(this, Email);\n    this.to = user.email;\n    this.firstName = user.name.split(' ')[0];\n    this.url = url;\n    this.from = \"Ana Arevadze <\".concat(process.env.EMAIL_FROM, \">\");\n  }\n  // 1. Create a transporter\n  return _createClass(Email, [{\n    key: \"newTransport\",\n    value: function newTransport() {\n      if (process.env.NODE_ENV === 'production') {\n        // Sendgrid\n        return 1;\n      }\n      return nodemailer.createTransport({\n        host: process.env.EMAIL_HOST,\n        port: process.env.EMAIL_PORT,\n        auth: {\n          user: process.env.EMAIL_USERNAME,\n          pass: process.env.EMAIL_PASSWORD\n        }\n      });\n    }\n  }, {\n    key: \"send\",\n    value: function () {\n      var _send = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(template, subject) {\n        var TemplateComponent, templateProps, html, text, mailOptions;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              TemplateComponent = getTemplateComponent(template);\n              templateProps = {\n                firstName: this.firstName,\n                url: this.url\n              }; // Send the actual email\n              // 1. Render React component to HTML string\n              html = ReactDOMServer.renderToString(React.createElement(TemplateComponent, templateProps)); // 2. Convert HTML to plain text\n              text = convert(html, {\n                wordwrap: 130\n              }); // If I'm using gmail I'll need to activate 'less secure app' in gmail option\n              mailOptions = {\n                from: this.from,\n                to: this.to,\n                subject: subject,\n                html: html,\n                text: text\n              }; // 3. Create a transport and send email\n              _context.n = 1;\n              return this.newTransport().sendMail(mailOptions);\n            case 1:\n              return _context.a(2);\n          }\n        }, _callee, this);\n      }));\n      function send(_x, _x2) {\n        return _send.apply(this, arguments);\n      }\n      return send;\n    }()\n  }, {\n    key: \"sendWelcome\",\n    value: function () {\n      var _sendWelcome = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.n = 1;\n              return this.send('WELCOME', 'Welcome to the Natours Family!');\n            case 1:\n              return _context2.a(2);\n          }\n        }, _callee2, this);\n      }));\n      function sendWelcome() {\n        return _sendWelcome.apply(this, arguments);\n      }\n      return sendWelcome;\n    }()\n  }, {\n    key: \"sendPasswordReset\",\n    value: function () {\n      var _sendPasswordReset = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3() {\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.n = 1;\n              return this.send('PASSWORD_RESET', 'Your password reset token (valid for only 10 minutes)');\n            case 1:\n              return _context3.a(2);\n          }\n        }, _callee3, this);\n      }));\n      function sendPasswordReset() {\n        return _sendPasswordReset.apply(this, arguments);\n      }\n      return sendPasswordReset;\n    }()\n  }]);\n}();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIl9jbGFzc0NhbGxDaGVjayIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwiX3RvUHJvcGVydHlLZXkiLCJrZXkiLCJfY3JlYXRlQ2xhc3MiLCJfdG9QcmltaXRpdmUiLCJfdHlwZW9mIiwidG9QcmltaXRpdmUiLCJTdHJpbmciLCJOdW1iZXIiLCJub2RlbWFpbGVyIiwicmVxdWlyZSIsIl9yZXF1aXJlIiwiY29udmVydCIsIlJlYWN0RE9NU2VydmVyIiwiUmVhY3QiLCJXZWxjb21lRW1haWwiLCJfcmVxdWlyZTIiLCJQYXNzd29yZFJlc2V0RW1haWwiLCJnZXRUZW1wbGF0ZUNvbXBvbmVudCIsInRlbXBsYXRlTmFtZSIsIkVycm9yIiwiY29uY2F0IiwibW9kdWxlIiwiZXhwb3J0cyIsIkVtYWlsIiwidXNlciIsInVybCIsInRvIiwiZW1haWwiLCJmaXJzdE5hbWUiLCJuYW1lIiwic3BsaXQiLCJmcm9tIiwicHJvY2VzcyIsImVudiIsIkVNQUlMX0ZST00iLCJuZXdUcmFuc3BvcnQiLCJOT0RFX0VOViIsImNyZWF0ZVRyYW5zcG9ydCIsImhvc3QiLCJFTUFJTF9IT1NUIiwicG9ydCIsIkVNQUlMX1BPUlQiLCJhdXRoIiwiRU1BSUxfVVNFUk5BTUUiLCJwYXNzIiwiRU1BSUxfUEFTU1dPUkQiLCJfc2VuZCIsIl9jYWxsZWUiLCJ0ZW1wbGF0ZSIsInN1YmplY3QiLCJUZW1wbGF0ZUNvbXBvbmVudCIsInRlbXBsYXRlUHJvcHMiLCJodG1sIiwidGV4dCIsIm1haWxPcHRpb25zIiwiX2NvbnRleHQiLCJyZW5kZXJUb1N0cmluZyIsImNyZWF0ZUVsZW1lbnQiLCJ3b3Jkd3JhcCIsInNlbmRNYWlsIiwic2VuZCIsIl94IiwiX3gyIiwiX3NlbmRXZWxjb21lIiwiX2NhbGxlZTIiLCJfY29udGV4dDIiLCJzZW5kV2VsY29tZSIsIl9zZW5kUGFzc3dvcmRSZXNldCIsIl9jYWxsZWUzIiwiX2NvbnRleHQzIiwic2VuZFBhc3N3b3JkUmVzZXQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvdXRpbHMvIiwic291cmNlcyI6WyJlbWFpbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBub2RlbWFpbGVyID0gcmVxdWlyZSgnbm9kZW1haWxlcicpO1xuY29uc3QgeyBjb252ZXJ0IH0gPSByZXF1aXJlKCdodG1sLXRvLXRleHQnKTtcbmNvbnN0IFJlYWN0RE9NU2VydmVyID0gcmVxdWlyZSgncmVhY3QtZG9tL3NlcnZlcicpO1xuY29uc3QgUmVhY3QgPSByZXF1aXJlKCdyZWFjdCcpO1xuXG4vLyBTcGVjaWZpYyBlbWFpbCB0ZW1wbGF0ZXMgTVVTVCBiZSBpbXBvcnRlZCBoZXJlXG5cbmNvbnN0IFdlbGNvbWVFbWFpbCA9IHJlcXVpcmUoJy4uL3RlbXBsYXRlcy9XZWxjb21lRW1haWwnKS5kZWZhdWx0O1xuY29uc3Qge1xuICBkZWZhdWx0OiBQYXNzd29yZFJlc2V0RW1haWwsXG59ID0gcmVxdWlyZSgnLi4vdGVtcGxhdGVzL1Bhc3N3b3JkUmVzZXRFbWFpbCcpO1xuXG5jb25zdCBnZXRUZW1wbGF0ZUNvbXBvbmVudCA9ICh0ZW1wbGF0ZU5hbWUpID0+IHtcbiAgc3dpdGNoICh0ZW1wbGF0ZU5hbWUpIHtcbiAgICBjYXNlICdXRUxDT01FJzpcbiAgICAgIHJldHVybiBXZWxjb21lRW1haWw7XG4gICAgY2FzZSAnUEFTU1dPUkRfUkVTRVQnOlxuICAgICAgcmV0dXJuIFBhc3N3b3JkUmVzZXRFbWFpbDtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBUZW1wbGF0ZSBjb21wb25lbnQgZm9yICcke3RlbXBsYXRlTmFtZX0nIG5vdCBmb3VuZC5gKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBFbWFpbCB7XG4gIGNvbnN0cnVjdG9yKHVzZXIsIHVybCkge1xuICAgIHRoaXMudG8gPSB1c2VyLmVtYWlsO1xuICAgIHRoaXMuZmlyc3ROYW1lID0gdXNlci5uYW1lLnNwbGl0KCcgJylbMF07XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5mcm9tID0gYEFuYSBBcmV2YWR6ZSA8JHtwcm9jZXNzLmVudi5FTUFJTF9GUk9NfT5gO1xuICB9XG4gIC8vIDEuIENyZWF0ZSBhIHRyYW5zcG9ydGVyXG4gIG5ld1RyYW5zcG9ydCgpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gU2VuZGdyaWRcbiAgICAgIHJldHVybiAxO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlbWFpbGVyLmNyZWF0ZVRyYW5zcG9ydCh7XG4gICAgICBob3N0OiBwcm9jZXNzLmVudi5FTUFJTF9IT1NULFxuICAgICAgcG9ydDogcHJvY2Vzcy5lbnYuRU1BSUxfUE9SVCxcbiAgICAgIGF1dGg6IHtcbiAgICAgICAgdXNlcjogcHJvY2Vzcy5lbnYuRU1BSUxfVVNFUk5BTUUsXG4gICAgICAgIHBhc3M6IHByb2Nlc3MuZW52LkVNQUlMX1BBU1NXT1JELFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIHNlbmQodGVtcGxhdGUsIHN1YmplY3QpIHtcbiAgICBjb25zdCBUZW1wbGF0ZUNvbXBvbmVudCA9IGdldFRlbXBsYXRlQ29tcG9uZW50KHRlbXBsYXRlKTtcblxuICAgIGNvbnN0IHRlbXBsYXRlUHJvcHMgPSB7XG4gICAgICBmaXJzdE5hbWU6IHRoaXMuZmlyc3ROYW1lLFxuICAgICAgdXJsOiB0aGlzLnVybCxcbiAgICB9O1xuICAgIC8vIFNlbmQgdGhlIGFjdHVhbCBlbWFpbFxuICAgIC8vIDEuIFJlbmRlciBSZWFjdCBjb21wb25lbnQgdG8gSFRNTCBzdHJpbmdcbiAgICBjb25zdCBodG1sID0gUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRlbXBsYXRlQ29tcG9uZW50LCB0ZW1wbGF0ZVByb3BzKSxcbiAgICApO1xuXG4gICAgLy8gMi4gQ29udmVydCBIVE1MIHRvIHBsYWluIHRleHRcbiAgICBjb25zdCB0ZXh0ID0gY29udmVydChodG1sLCB7XG4gICAgICB3b3Jkd3JhcDogMTMwLFxuICAgIH0pO1xuICAgIC8vIElmIEknbSB1c2luZyBnbWFpbCBJJ2xsIG5lZWQgdG8gYWN0aXZhdGUgJ2xlc3Mgc2VjdXJlIGFwcCcgaW4gZ21haWwgb3B0aW9uXG4gICAgY29uc3QgbWFpbE9wdGlvbnMgPSB7XG4gICAgICBmcm9tOiB0aGlzLmZyb20sXG4gICAgICB0bzogdGhpcy50byxcbiAgICAgIHN1YmplY3QsXG4gICAgICBodG1sLFxuICAgICAgdGV4dCxcbiAgICB9O1xuXG4gICAgLy8gMy4gQ3JlYXRlIGEgdHJhbnNwb3J0IGFuZCBzZW5kIGVtYWlsXG5cbiAgICBhd2FpdCB0aGlzLm5ld1RyYW5zcG9ydCgpLnNlbmRNYWlsKG1haWxPcHRpb25zKTsgLy9SZXR1cm5zIHByb21pc2VcbiAgfVxuXG4gIGFzeW5jIHNlbmRXZWxjb21lKCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZCgnV0VMQ09NRScsICdXZWxjb21lIHRvIHRoZSBOYXRvdXJzIEZhbWlseSEnKTtcbiAgfVxuXG4gIGFzeW5jIHNlbmRQYXNzd29yZFJlc2V0KCkge1xuICAgIGF3YWl0IHRoaXMuc2VuZChcbiAgICAgICdQQVNTV09SRF9SRVNFVCcsXG4gICAgICAnWW91ciBwYXNzd29yZCByZXNldCB0b2tlbiAodmFsaWQgZm9yIG9ubHkgMTAgbWludXRlcyknLFxuICAgICk7XG4gIH1cbn07XG4iXSwibWFwcGluZ3MiOiI7OzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNBQUEsVUFBQUssbUJBQUEsQ0FBQUgsQ0FBQSx1QkFBQVYsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUUsQ0FBQSxFQUFBQyxDQUFBLEVBQUFHLENBQUEsRUFBQUksQ0FBQSxNQUFBQyxDQUFBLEdBQUFYLENBQUEsUUFBQVksQ0FBQSxPQUFBQyxDQUFBLEtBQUFGLENBQUEsS0FBQWIsQ0FBQSxLQUFBZ0IsQ0FBQSxFQUFBcEIsQ0FBQSxFQUFBcUIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFOLENBQUEsRUFBQU0sQ0FBQSxDQUFBQyxJQUFBLENBQUF2QixDQUFBLE1BQUFzQixDQUFB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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_classCallCheck","_defineProperties","_toPropertyKey","key","_createClass","_toPrimitive","_typeof","toPrimitive","String","Number","nodemailer","require","_require","convert","ReactDOMServer","React","WelcomeEmail","_require2","PasswordResetEmail","getTemplateComponent","templateName","Error","concat","module","exports","Email","user","url","to","email","firstName","name","split","from","process","env","EMAIL_FROM","newTransport","NODE_ENV","createTransport","host","EMAIL_HOST","port","EMAIL_PORT","auth","EMAIL_USERNAME","pass","EMAIL_PASSWORD","_send","_callee","template","subject","TemplateComponent","templateProps","html","text","mailOptions","_context","renderToString","createElement","wordwrap","sendMail","send","_x","_x2","_sendWelcome","_callee2","_context2","sendWelcome","_sendPasswordReset","_callee3","_context3","sendPasswordReset"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["email.js"],"sourcesContent":["const nodemailer = require('nodemailer');\nconst { convert } = require('html-to-text');\nconst ReactDOMServer = require('react-dom/server');\nconst React = require('react');\n\n// Specific email templates MUST be imported here\n\nconst WelcomeEmail = require('../templates/WelcomeEmail').default;\nconst {\n  default: PasswordResetEmail,\n} = require('../templates/PasswordResetEmail');\n\nconst getTemplateComponent = (templateName) => {\n  switch (templateName) {\n    case 'WELCOME':\n      return WelcomeEmail;\n    case 'PASSWORD_RESET':\n      return PasswordResetEmail;\n    default:\n      throw new Error(`Template component for '${templateName}' not found.`);\n  }\n};\n\nmodule.exports = class Email {\n  constructor(user, url) {\n    this.to = user.email;\n    this.firstName = user.name.split(' ')[0];\n    this.url = url;\n    this.from = `Ana Arevadze <${process.env.EMAIL_FROM}>`;\n  }\n  // 1. Create a transporter\n  newTransport() {\n    if (process.env.NODE_ENV === 'production') {\n      // Sendgrid\n      return 1;\n    }\n\n    return nodemailer.createTransport({\n      host: process.env.EMAIL_HOST,\n      port: process.env.EMAIL_PORT,\n      auth: {\n        user: process.env.EMAIL_USERNAME,\n        pass: process.env.EMAIL_PASSWORD,\n      },\n    });\n  }\n\n  async send(template, subject) {\n    const TemplateComponent = getTemplateComponent(template);\n\n    const templateProps = {\n      firstName: this.firstName,\n      url: this.url,\n    };\n    // Send the actual email\n    // 1. Render React component to HTML string\n    const html = ReactDOMServer.renderToString(\n      React.createElement(TemplateComponent, templateProps),\n    );\n\n    // 2. Convert HTML to plain text\n    const text = convert(html, {\n      wordwrap: 130,\n    });\n    // If I'm using gmail I'll need to activate 'less secure app' in gmail option\n    const mailOptions = {\n      from: this.from,\n      to: this.to,\n      subject,\n      html,\n      text,\n    };\n\n    // 3. Create a transport and send email\n\n    await this.newTransport().sendMail(mailOptions); //Returns promise\n  }\n\n  async sendWelcome() {\n    await this.send('WELCOME', 'Welcome to the Natours Family!');\n  }\n\n  async sendPasswordReset() {\n    await this.send(\n      'PASSWORD_RESET',\n      'Your password reset token (valid for only 10 minutes)',\n    );\n  }\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1765353260503},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/templates/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/templates/WelcomeEmail.jsx\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _BaseEmailTemplate = _interopRequireDefault(require(\"./BaseEmailTemplate\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\nvar WelcomeEmail = function WelcomeEmail(_ref) {\n  var firstName = _ref.firstName,\n    url = _ref.url;\n  var welcomeContent = /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"Hi \", firstName, \", Welcome to Natours, we're glad to have you \\uD83C\\uDF89\\uD83D\\uDE4F\"), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"We're all a big family here, so make sure to upload your user photo so we get to know you a bit better!\"), /*#__PURE__*/_react[\"default\"].createElement(\"p\", {\n    className: \"last\"\n  }, \"- Ana A\"));\n  return /*#__PURE__*/_react[\"default\"].createElement(_BaseEmailTemplate[\"default\"], {\n    subject: \"Welcome to the Natours Family!\",\n    firstName: firstName,\n    content: welcomeContent,\n    buttonLink: url,\n    buttonText: \"Upload user photo\"\n  });\n};\nvar _default = exports[\"default\"] = WelcomeEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQmFzZUVtYWlsVGVtcGxhdGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdCIsImUiLCJfX2VzTW9kdWxlIiwiV2VsY29tZUVtYWlsIiwiX3JlZiIsImZpcnN0TmFtZSIsInVybCIsIndlbGNvbWVDb250ZW50IiwiY3JlYXRlRWxlbWVudCIsIkZyYWdtZW50IiwiY2xhc3NOYW1lIiwic3ViamVjdCIsImNvbnRlbnQiLCJidXR0b25MaW5rIiwiYnV0dG9uVGV4dCIsIl9kZWZhdWx0IiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC90ZW1wbGF0ZXMvIiwic291cmNlcyI6WyJXZWxjb21lRW1haWwuanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlRW1haWxUZW1wbGF0ZSBmcm9tICcuL0Jhc2VFbWFpbFRlbXBsYXRlJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IFdlbGNvbWVFbWFpbCA9ICh7IGZpcnN0TmFtZSwgdXJsIH0pID0+IHtcbiAgY29uc3Qgd2VsY29tZUNvbnRlbnQgPSAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPHA+SGkge2ZpcnN0TmFtZX0sIFdlbGNvbWUgdG8gTmF0b3Vycywgd2UncmUgZ2xhZCB0byBoYXZlIHlvdSDwn46J8J+ZjzwvcD5cbiAgICAgIDxwPlxuICAgICAgICBXZSdyZSBhbGwgYSBiaWcgZmFtaWx5IGhlcmUsIHNvIG1ha2Ugc3VyZSB0byB1cGxvYWQgeW91ciB1c2VyIHBob3RvIHNvXG4gICAgICAgIHdlIGdldCB0byBrbm93IHlvdSBhIGJpdCBiZXR0ZXIhXG4gICAgICA8L3A+XG4gICAgICA8cCBjbGFzc05hbWU9XCJsYXN0XCI+LSBBbmEgQTwvcD5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPEJhc2VFbWFpbFRlbXBsYXRlXG4gICAgICBzdWJqZWN0PVwiV2VsY29tZSB0byB0aGUgTmF0b3VycyBGYW1pbHkhXCJcbiAgICAgIGZpcnN0TmFtZT17Zmlyc3ROYW1lfVxuICAgICAgY29udGVudD17d2VsY29tZUNvbnRlbnR9XG4gICAgICBidXR0b25MaW5rPXt1cmx9XG4gICAgICBidXR0b25UZXh0PVwiVXBsb2FkIHVzZXIgcGhvdG9cIlxuICAgIC8+XG4gICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBXZWxjb21lRW1haWw7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLGtCQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFGLHNCQUFBLENBQUFDLE9BQUE7QUFBMEIsU0FBQUQsdUJBQUFHLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxnQkFBQUEsQ0FBQTtBQUUxQixJQUFNRSxZQUFZLEdBQUcsU0FBZkEsWUFBWUEsQ0FBQUMsSUFBQSxFQUEyQjtFQUFBLElBQXJCQyxTQUFTLEdBQUFELElBQUEsQ0FBVEMsU0FBUztJQUFFQyxHQUFHLEdBQUFGLElBQUEsQ0FBSEUsR0FBRztFQUNwQyxJQUFNQyxjQUFjLGdCQUNsQlAsTUFBQSxZQUFBUSxhQUFBLENBQUNSLE1BQUEsV0FBSyxDQUFDUyxRQUFRLHFCQUNiVCxNQUFBLFlBQUFRLGFBQUEsWUFBRyxLQUFHLEVBQUNILFNBQVMsRUFBQyx1RUFBb0QsQ0FBQyxlQUN0RUwsTUFBQSxZQUFBUSxhQUFBLFlBQUcseUdBR0EsQ0FBQyxlQUNKUixNQUFBLFlBQUFRLGFBQUE7SUFBR0UsU0FBUyxFQUFDO0VBQU0sR0FBQyxTQUFVLENBQ2hCLENBQ2pCO0VBRUQsb0JBQ0VWLE1BQUEsWUFBQVEsYUFBQSxDQUFDWCxrQkFBQSxXQUFpQjtJQUNoQmMsT0FBTyxFQUFDLGdDQUFnQztJQUN4Q04sU0FBUyxFQUFFQSxTQUFVO0lBQ3JCTyxPQUFPLEVBQUVMLGNBQWU7SUFDeEJNLFVBQVUsRUFBRVAsR0FBSTtJQUNoQlEsVUFBVSxFQUFDO0VBQW1CLENBQy9CLENBQUM7QUFFTixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLGNBRWFiLFlBQVkiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["_BaseEmailTemplate","_interopRequireDefault","require","_react","e","__esModule","WelcomeEmail","_ref","firstName","url","welcomeContent","createElement","Fragment","className","subject","content","buttonLink","buttonText","_default","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/templates/","sources":["WelcomeEmail.jsx"],"sourcesContent":["import BaseEmailTemplate from './BaseEmailTemplate';\nimport React from 'react';\n\nconst WelcomeEmail = ({ firstName, url }) => {\n  const welcomeContent = (\n    <React.Fragment>\n      <p>Hi {firstName}, Welcome to Natours, we're glad to have you </p>\n      <p>\n        We're all a big family here, so make sure to upload your user photo so\n        we get to know you a bit better!\n      </p>\n      <p className=\"last\">- Ana A</p>\n    </React.Fragment>\n  );\n\n  return (\n    <BaseEmailTemplate\n      subject=\"Welcome to the Natours Family!\"\n      firstName={firstName}\n      content={welcomeContent}\n      buttonLink={url}\n      buttonText=\"Upload user photo\"\n    />\n  );\n};\n\nexport default WelcomeEmail;\n"],"mappings":";;;;;;AAAA,IAAAA,kBAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA0B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE1B,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAAC,IAAA,EAA2B;EAAA,IAArBC,SAAS,GAAAD,IAAA,CAATC,SAAS;IAAEC,GAAG,GAAAF,IAAA,CAAHE,GAAG;EACpC,IAAMC,cAAc,gBAClBP,MAAA,YAAAQ,aAAA,CAACR,MAAA,WAAK,CAACS,QAAQ,qBACbT,MAAA,YAAAQ,aAAA,YAAG,KAAG,EAACH,SAAS,EAAC,uEAAoD,CAAC,eACtEL,MAAA,YAAAQ,aAAA,YAAG,yGAGA,CAAC,eACJR,MAAA,YAAAQ,aAAA;IAAGE,SAAS,EAAC;EAAM,GAAC,SAAU,CAChB,CACjB;EAED,oBACEV,MAAA,YAAAQ,aAAA,CAACX,kBAAA,WAAiB;IAChBc,OAAO,EAAC,gCAAgC;IACxCN,SAAS,EAAEA,SAAU;IACrBO,OAAO,EAAEL,cAAe;IACxBM,UAAU,EAAEP,GAAI;IAChBQ,UAAU,EAAC;EAAmB,CAC/B,CAAC;AAEN,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,cAEab,YAAY","ignoreList":[]}},"mtime":1765352860609},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/appError.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(t, e) { if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e; if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\"); return _assertThisInitialized(t); }\nfunction _assertThisInitialized(e) { if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); return e; }\nfunction _inherits(t, e) { if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\"); t.prototype = Object.create(e && e.prototype, { constructor: { value: t, writable: !0, configurable: !0 } }), Object.defineProperty(t, \"prototype\", { writable: !1 }), e && _setPrototypeOf(t, e); }\nfunction _wrapNativeSuper(t) { var r = \"function\" == typeof Map ? new Map() : void 0; return _wrapNativeSuper = function _wrapNativeSuper(t) { if (null === t || !_isNativeFunction(t)) return t; if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\"); if (void 0 !== r) { if (r.has(t)) return r.get(t); r.set(t, Wrapper); } function Wrapper() { return _construct(t, arguments, _getPrototypeOf(this).constructor); } return Wrapper.prototype = Object.create(t.prototype, { constructor: { value: Wrapper, enumerable: !1, writable: !0, configurable: !0 } }), _setPrototypeOf(Wrapper, t); }, _wrapNativeSuper(t); }\nfunction _construct(t, e, r) { if (_isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments); var o = [null]; o.push.apply(o, e); var p = new (t.bind.apply(t, o))(); return r && _setPrototypeOf(p, r.prototype), p; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _isNativeFunction(t) { try { return -1 !== Function.toString.call(t).indexOf(\"[native code]\"); } catch (n) { return \"function\" == typeof t; } }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\nfunction _getPrototypeOf(t) { return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) { return t.__proto__ || Object.getPrototypeOf(t); }, _getPrototypeOf(t); }\nvar appError = /*#__PURE__*/function (_Error) {\n  function appError(message, statusCode) {\n    var _this;\n    _classCallCheck(this, appError);\n    _this = _callSuper(this, appError, [message]);\n    _this.statusCode = statusCode;\n    _this.status = \"\".concat(statusCode).startsWith('4') ? 'fail' : 'error';\n    _this.isOperational = true;\n    Error.captureStackTrace(_this, _this.constructor);\n    return _this;\n  }\n  _inherits(appError, _Error);\n  return _createClass(appError);\n}(/*#__PURE__*/_wrapNativeSuper(Error));\nmodule.exports = appError;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBFcnJvciIsIl9FcnJvciIsIm1lc3NhZ2UiLCJzdGF0dXNDb2RlIiwiX3RoaXMiLCJfY2xhc3NDYWxsQ2hlY2siLCJfY2FsbFN1cGVyIiwic3RhdHVzIiwiY29uY2F0Iiwic3RhcnRzV2l0aCIsImlzT3BlcmF0aW9uYWwiLCJFcnJvciIsImNhcHR1cmVTdGFja1RyYWNlIiwiY29uc3RydWN0b3IiLCJfaW5oZXJpdHMiLCJfY3JlYXRlQ2xhc3MiLCJfd3JhcE5hdGl2ZVN1cGVyIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC91dGlscy8iLCJzb3VyY2VzIjpbImFwcEVycm9yLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIGFwcEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlLCBzdGF0dXNDb2RlKSB7XG4gICAgc3VwZXIobWVzc2FnZSk7XG4gICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcbiAgICB0aGlzLnN0YXR1cyA9IGAke3N0YXR1c0NvZGV9YC5zdGFydHNXaXRoKCc0JykgPyAnZmFpbCcgOiAnZXJyb3InO1xuICAgIHRoaXMuaXNPcGVyYXRpb25hbCA9IHRydWU7XG5cbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcEVycm9yO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFBTUEsUUFBUSwwQkFBQUMsTUFBQTtFQUNaLFNBQUFELFNBQVlFLE9BQU8sRUFBRUMsVUFBVSxFQUFFO0lBQUEsSUFBQUMsS0FBQTtJQUFBQyxlQUFBLE9BQUFMLFFBQUE7SUFDL0JJLEtBQUEsR0FBQUUsVUFBQSxPQUFBTixRQUFBLEdBQU1FLE9BQU87SUFDYkUsS0FBQSxDQUFLRCxVQUFVLEdBQUdBLFVBQVU7SUFDNUJDLEtBQUEsQ0FBS0csTUFBTSxHQUFHLEdBQUFDLE1BQUEsQ0FBR0wsVUFBVSxFQUFHTSxVQUFVLENBQUMsR0FBRyxDQUFDLEdBQUcsTUFBTSxHQUFHLE9BQU87SUFDaEVMLEtBQUEsQ0FBS00sYUFBYSxHQUFHLElBQUk7SUFFekJDLEtBQUssQ0FBQ0MsaUJBQWlCLENBQUFSLEtBQUEsRUFBT0EsS0FBQSxDQUFLUyxXQUFXLENBQUM7SUFBQyxPQUFBVCxLQUFBO0VBQ2xEO0VBQUNVLFNBQUEsQ0FBQWQsUUFBQSxFQUFBQyxNQUFBO0VBQUEsT0FBQWMsWUFBQSxDQUFBZixRQUFBO0FBQUEsZUFBQWdCLGdCQUFBLENBUm9CTCxLQUFLO0FBVzVCTSxNQUFNLENBQUNDLE9BQU8sR0FBR2xCLFFBQVEiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["appError","_Error","message","statusCode","_this","_classCallCheck","_callSuper","status","concat","startsWith","isOperational","Error","captureStackTrace","constructor","_inherits","_createClass","_wrapNativeSuper","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["appError.js"],"sourcesContent":["class appError extends Error {\n  constructor(message, statusCode) {\n    super(message);\n    this.statusCode = statusCode;\n    this.status = `${statusCode}`.startsWith('4') ? 'fail' : 'error';\n    this.isOperational = true;\n\n    Error.captureStackTrace(this, this.constructor);\n  }\n}\n\nmodule.exports = appError;\n"],"mappings":";;;;;;;;;;;;;;;;;;IAAMA,QAAQ,0BAAAC,MAAA;EACZ,SAAAD,SAAYE,OAAO,EAAEC,UAAU,EAAE;IAAA,IAAAC,KAAA;IAAAC,eAAA,OAAAL,QAAA;IAC/BI,KAAA,GAAAE,UAAA,OAAAN,QAAA,GAAME,OAAO;IACbE,KAAA,CAAKD,UAAU,GAAGA,UAAU;IAC5BC,KAAA,CAAKG,MAAM,GAAG,GAAAC,MAAA,CAAGL,UAAU,EAAGM,UAAU,CAAC,GAAG,CAAC,GAAG,MAAM,GAAG,OAAO;IAChEL,KAAA,CAAKM,aAAa,GAAG,IAAI;IAEzBC,KAAK,CAACC,iBAAiB,CAAAR,KAAA,EAAOA,KAAA,CAAKS,WAAW,CAAC;IAAC,OAAAT,KAAA;EAClD;EAACU,SAAA,CAAAd,QAAA,EAAAC,MAAA;EAAA,OAAAc,YAAA,CAAAf,QAAA;AAAA,eAAAgB,gBAAA,CARoBL,KAAK;AAW5BM,MAAM,CAACC,OAAO,GAAGlB,QAAQ","ignoreList":[]}},"mtime":1762243431370},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/errorController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar appError = require('../utils/appError');\nvar handleCastErrorDB = function handleCastErrorDB(err) {\n  var message = \"Invalid \".concat(err.path, \": \").concat(err.value);\n  return new appError(message, 400);\n};\nvar handleDuplicateFieldsDB = function handleDuplicateFieldsDB(err) {\n  var value = err.errmsg.match(/([\"'])(?:(?=(\\\\?))\\2.)*?\\1/)[0];\n  var message = \"Duplicate fields value: \".concat(value, \". Please use another value!\");\n  return new appError(message, 400);\n};\nvar handleValidationErrorDB = function handleValidationErrorDB(err) {\n  var errors = Object.values(err.errors).map(function (el) {\n    return el.message;\n  });\n  var message = \"Invalid input data. \".concat(errors.join('. '));\n  return new appError(message, 400);\n};\nvar handleJWTError = function handleJWTError() {\n  return new appError('Invalid token. Please log in again!', 401);\n};\nvar handleJWTExpiredError = function handleJWTExpiredError() {\n  return new appError('Your token has expired, please log in again!', 401);\n};\nvar sendErrorDev = function sendErrorDev(err, res) {\n  res.status(err.statusCode).json({\n    status: err.status,\n    error: err,\n    message: err.message,\n    stack: err.stack\n  });\n};\nvar sendErrorProd = function sendErrorProd(err, res) {\n  // Operational, trusted error: send message to client\n  if (err.isOperational) {\n    res.status(err.statusCode).json({\n      status: err.status,\n      message: err.message\n    });\n\n    // Programming or other unknown error: don't leak error details\n  } else {\n    // 1) Log error\n    console.error('ERROR ', err);\n\n    // 2) Send generic message\n    res.status(500).json({\n      status: 'error',\n      message: 'Something went wrong'\n    });\n  }\n};\nmodule.exports = function (err, req, res, next) {\n  err.statusCode = err.statusCode || 500;\n  err.status = err.status || 'error';\n  if (process.env.NODE_ENV === 'development') {\n    sendErrorDev(err, res);\n  } else if (process.env.NODE_ENV === 'production') {\n    var error = err;\n    if (error.name === 'CastError') error = handleCastErrorDB(error);\n    if (error.code === 11000) error = handleDuplicateFieldsDB(error);\n    if (error.name === 'ValidationError') error = handleValidationErrorDB(error);\n    if (error.name === 'JsonWebTokenError') error = handleJWTError();\n    if (error.name === 'TokenExpiredError') error = handleJWTExpiredError();\n    sendErrorProd(error, res);\n  }\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcHBFcnJvciIsInJlcXVpcmUiLCJoYW5kbGVDYXN0RXJyb3JEQiIsImVyciIsIm1lc3NhZ2UiLCJjb25jYXQiLCJwYXRoIiwidmFsdWUiLCJoYW5kbGVEdXBsaWNhdGVGaWVsZHNEQiIsImVycm1zZyIsIm1hdGNoIiwiaGFuZGxlVmFsaWRhdGlvbkVycm9yREIiLCJlcnJvcnMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJlbCIsImpvaW4iLCJoYW5kbGVKV1RFcnJvciIsImhhbmRsZUpXVEV4cGlyZWRFcnJvciIsInNlbmRFcnJvckRldiIsInJlcyIsInN0YXR1cyIsInN0YXR1c0NvZGUiLCJqc29uIiwiZXJyb3IiLCJzdGFjayIsInNlbmRFcnJvclByb2QiLCJpc09wZXJhdGlvbmFsIiwiY29uc29sZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZXEiLCJuZXh0IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibmFtZSIsImNvZGUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJlcnJvckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYXBwRXJyb3IgPSByZXF1aXJlKCcuLi91dGlscy9hcHBFcnJvcicpO1xuXG5jb25zdCBoYW5kbGVDYXN0RXJyb3JEQiA9IChlcnIpID0+IHtcbiAgY29uc3QgbWVzc2FnZSA9IGBJbnZhbGlkICR7ZXJyLnBhdGh9OiAke2Vyci52YWx1ZX1gO1xuXG4gIHJldHVybiBuZXcgYXBwRXJyb3IobWVzc2FnZSwgNDAwKTtcbn07XG5cbmNvbnN0IGhhbmRsZUR1cGxpY2F0ZUZpZWxkc0RCID0gKGVycikgPT4ge1xuICBjb25zdCB2YWx1ZSA9IGVyci5lcnJtc2cubWF0Y2goLyhbXCInXSkoPzooPz0oXFxcXD8pKVxcMi4pKj9cXDEvKVswXTtcblxuICBjb25zdCBtZXNzYWdlID0gYER1cGxpY2F0ZSBmaWVsZHMgdmFsdWU6ICR7dmFsdWV9LiBQbGVhc2UgdXNlIGFub3RoZXIgdmFsdWUhYDtcblxuICByZXR1cm4gbmV3IGFwcEVycm9yKG1lc3NhZ2UsIDQwMCk7XG59O1xuXG5jb25zdCBoYW5kbGVWYWxpZGF0aW9uRXJyb3JEQiA9IChlcnIpID0+IHtcbiAgY29uc3QgZXJyb3JzID0gT2JqZWN0LnZhbHVlcyhlcnIuZXJyb3JzKS5tYXAoKGVsKSA9PiBlbC5tZXNzYWdlKTtcbiAgY29uc3QgbWVzc2FnZSA9IGBJbnZhbGlkIGlucHV0IGRhdGEuICR7ZXJyb3JzLmpvaW4oJy4gJyl9YDtcblxuICByZXR1cm4gbmV3IGFwcEVycm9yKG1lc3NhZ2UsIDQwMCk7XG59O1xuXG5jb25zdCBoYW5kbGVKV1RFcnJvciA9ICgpID0+XG4gIG5ldyBhcHBFcnJvcignSW52YWxpZCB0b2tlbi4gUGxlYXNlIGxvZyBpbiBhZ2FpbiEnLCA0MDEpO1xuXG5jb25zdCBoYW5kbGVKV1RFeHBpcmVkRXJyb3IgPSAoKSA9PlxuICBuZXcgYXBwRXJyb3IoJ1lvdXIgdG9rZW4gaGFzIGV4cGlyZWQsIHBsZWFzZSBsb2cgaW4gYWdhaW4hJywgNDAxKTtcblxuY29uc3Qgc2VuZEVycm9yRGV2ID0gKGVyciwgcmVzKSA9PiB7XG4gIHJlcy5zdGF0dXMoZXJyLnN0YXR1c0NvZGUpLmpzb24oe1xuICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICBlcnJvcjogZXJyLFxuICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIHN0YWNrOiBlcnIuc3RhY2ssXG4gIH0pO1xufTtcblxuY29uc3Qgc2VuZEVycm9yUHJvZCA9IChlcnIsIHJlcykgPT4ge1xuICAvLyBPcGVyYXRpb25hbCwgdHJ1c3RlZCBlcnJvcjogc2VuZCBtZXNzYWdlIHRvIGNsaWVudFxuICBpZiAoZXJyLmlzT3BlcmF0aW9uYWwpIHtcbiAgICByZXMuc3RhdHVzKGVyci5zdGF0dXNDb2RlKS5qc29uKHtcbiAgICAgIHN0YXR1czogZXJyLnN0YXR1cyxcbiAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlLFxuICAgIH0pO1xuXG4gICAgLy8gUHJvZ3JhbW1pbmcgb3Igb3RoZXIgdW5rbm93biBlcnJvcjogZG9uJ3QgbGVhayBlcnJvciBkZXRhaWxzXG4gIH0gZWxzZSB7XG4gICAgLy8gMSkgTG9nIGVycm9yXG4gICAgY29uc29sZS5lcnJvcignRVJST1Ig8J+krycsIGVycik7XG5cbiAgICAvLyAyKSBTZW5kIGdlbmVyaWMgbWVzc2FnZVxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHtcbiAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gICAgfSk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gKGVyciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgZXJyLnN0YXR1c0NvZGUgPSBlcnIuc3RhdHVzQ29kZSB8fCA1MDA7XG4gIGVyci5zdGF0dXMgPSBlcnIuc3RhdHVzIHx8ICdlcnJvcic7XG5cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgc2VuZEVycm9yRGV2KGVyciwgcmVzKTtcbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgbGV0IGVycm9yID0gZXJyO1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnQ2FzdEVycm9yJykgZXJyb3IgPSBoYW5kbGVDYXN0RXJyb3JEQihlcnJvcik7XG4gICAgaWYgKGVycm9yLmNvZGUgPT09IDExMDAwKSBlcnJvciA9IGhhbmRsZUR1cGxpY2F0ZUZpZWxkc0RCKGVycm9yKTtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ1ZhbGlkYXRpb25FcnJvcicpXG4gICAgICBlcnJvciA9IGhhbmRsZVZhbGlkYXRpb25FcnJvckRCKGVycm9yKTtcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0pzb25XZWJUb2tlbkVycm9yJykgZXJyb3IgPSBoYW5kbGVKV1RFcnJvcigpO1xuICAgIGlmIChlcnJvci5uYW1lID09PSAnVG9rZW5FeHBpcmVkRXJyb3InKSBlcnJvciA9IGhhbmRsZUpXVEV4cGlyZWRFcnJvcigpO1xuXG4gICAgc2VuZEVycm9yUHJvZChlcnJvciwgcmVzKTtcbiAgfVxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxRQUFRLEdBQUdDLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQztBQUU3QyxJQUFNQyxpQkFBaUIsR0FBRyxTQUFwQkEsaUJBQWlCQSxDQUFJQyxHQUFHLEVBQUs7RUFDakMsSUFBTUMsT0FBTyxjQUFBQyxNQUFBLENBQWNGLEdBQUcsQ0FBQ0csSUFBSSxRQUFBRCxNQUFBLENBQUtGLEdBQUcsQ0FBQ0ksS0FBSyxDQUFFO0VBRW5ELE9BQU8sSUFBSVAsUUFBUSxDQUFDSSxPQUFPLEVBQUUsR0FBRyxDQUFDO0FBQ25DLENBQUM7QUFFRCxJQUFNSSx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQXVCQSxDQUFJTCxHQUFHLEVBQUs7RUFDdkMsSUFBTUksS0FBSyxHQUFHSixHQUFHLENBQUNNLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDLDRCQUE0QixDQUFDLENBQUMsQ0FBQyxDQUFDO0VBRS9ELElBQU1OLE9BQU8sOEJBQUFDLE1BQUEsQ0FBOEJFLEtBQUssZ0NBQTZCO0VBRTdFLE9BQU8sSUFBSVAsUUFBUSxDQUFDSSxPQUFPLEVBQUUsR0FBRyxDQUFDO0FBQ25DLENBQUM7QUFFRCxJQUFNTyx1QkFBdUIsR0FBRyxTQUExQkEsdUJBQXVCQSxDQUFJUixHQUFHLEVBQUs7RUFDdkMsSUFBTVMsTUFBTSxHQUFHQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ1gsR0FBRyxDQUFDUyxNQUFNLENBQUMsQ0FBQ0csR0FBRyxDQUFDLFVBQUNDLEVBQUU7SUFBQSxPQUFLQSxFQUFFLENBQUNaLE9BQU87RUFBQSxFQUFDO0VBQ2hFLElBQU1BLE9BQU8sMEJBQUFDLE1BQUEsQ0FBMEJPLE1BQU0sQ0FBQ0ssSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFFO0VBRTFELE9B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","map":{"version":3,"names":["appError","require","handleCastErrorDB","err","message","concat","path","value","handleDuplicateFieldsDB","errmsg","match","handleValidationErrorDB","errors","Object","values","map","el","join","handleJWTError","handleJWTExpiredError","sendErrorDev","res","status","statusCode","json","error","stack","sendErrorProd","isOperational","console","module","exports","req","next","process","env","NODE_ENV","name","code"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["errorController.js"],"sourcesContent":["const appError = require('../utils/appError');\n\nconst handleCastErrorDB = (err) => {\n  const message = `Invalid ${err.path}: ${err.value}`;\n\n  return new appError(message, 400);\n};\n\nconst handleDuplicateFieldsDB = (err) => {\n  const value = err.errmsg.match(/([\"'])(?:(?=(\\\\?))\\2.)*?\\1/)[0];\n\n  const message = `Duplicate fields value: ${value}. Please use another value!`;\n\n  return new appError(message, 400);\n};\n\nconst handleValidationErrorDB = (err) => {\n  const errors = Object.values(err.errors).map((el) => el.message);\n  const message = `Invalid input data. ${errors.join('. ')}`;\n\n  return new appError(message, 400);\n};\n\nconst handleJWTError = () =>\n  new appError('Invalid token. Please log in again!', 401);\n\nconst handleJWTExpiredError = () =>\n  new appError('Your token has expired, please log in again!', 401);\n\nconst sendErrorDev = (err, res) => {\n  res.status(err.statusCode).json({\n    status: err.status,\n    error: err,\n    message: err.message,\n    stack: err.stack,\n  });\n};\n\nconst sendErrorProd = (err, res) => {\n  // Operational, trusted error: send message to client\n  if (err.isOperational) {\n    res.status(err.statusCode).json({\n      status: err.status,\n      message: err.message,\n    });\n\n    // Programming or other unknown error: don't leak error details\n  } else {\n    // 1) Log error\n    console.error('ERROR ', err);\n\n    // 2) Send generic message\n    res.status(500).json({\n      status: 'error',\n      message: 'Something went wrong',\n    });\n  }\n};\n\nmodule.exports = (err, req, res, next) => {\n  err.statusCode = err.statusCode || 500;\n  err.status = err.status || 'error';\n\n  if (process.env.NODE_ENV === 'development') {\n    sendErrorDev(err, res);\n  } else if (process.env.NODE_ENV === 'production') {\n    let error = err;\n    if (error.name === 'CastError') error = handleCastErrorDB(error);\n    if (error.code === 11000) error = handleDuplicateFieldsDB(error);\n    if (error.name === 'ValidationError')\n      error = handleValidationErrorDB(error);\n    if (error.name === 'JsonWebTokenError') error = handleJWTError();\n    if (error.name === 'TokenExpiredError') error = handleJWTExpiredError();\n\n    sendErrorProd(error, res);\n  }\n};\n"],"mappings":"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","ignoreList":[]}},"mtime":1764231491532},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/templates/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/templates/BaseEmailTemplate.jsx\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _react = _interopRequireDefault(require(\"react\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\n// NOTE: For best email compatibility, the CSS should ideally be inlined into the HTML\n// elements using a tool like juice after rendering, but keeping it in the <style>\n// block is the standard first step for conversion.\n\nvar EMAIL_STYLES = \"\\n  img {\\n    border: none;\\n    -ms-interpolation-mode: bicubic;\\n    max-width: 100%; \\n  }\\n  body {\\n    background-color: #f6f6f6;\\n    font-family: sans-serif;\\n    -webkit-font-smoothing: antialiased;\\n    font-size: 14px;\\n    line-height: 1.4;\\n    margin: 0;\\n    padding: 0;\\n    -ms-text-size-adjust: 100%;\\n    -webkit-text-size-adjust: 100%; \\n  }\\n  table {\\n    border-collapse: separate;\\n    mso-table-lspace: 0pt;\\n    mso-table-rspace: 0pt;\\n    width: 100%; \\n  }\\n  table td {\\n    font-family: sans-serif;\\n    font-size: 14px;\\n    vertical-align: top; \\n  }\\n  /* ... (Rest of your extensive CSS here) ... */\\n  /* --- IMPORTANT: Include ALL the CSS from your PUG file here --- */\\n  \\n  .body { background-color: #f6f6f6; width: 100%; }\\n  .container { display: block; margin: 0 auto !important; max-width: 580px; padding: 10px; width: 580px; }\\n  .content { box-sizing: border-box; display: block; margin: 0 auto; max-width: 580px; padding: 10px; }\\n  .main { background: #ffffff; border-radius: 3px; width: 100%; }\\n  .wrapper { box-sizing: border-box; padding: 20px; }\\n  .content-block { padding-bottom: 10px; padding-top: 10px; }\\n  .footer { clear: both; margin-top: 10px; text-align: center; width: 100%; }\\n  .footer td, .footer p, .footer span, .footer a { color: #999999; font-size: 12px; text-align: center; }\\n  \\n  h1, h2, h3, h4 {\\n    color: #000000;\\n    font-family: sans-serif;\\n    font-weight: 400;\\n    line-height: 1.4;\\n    margin: 0;\\n    margin-bottom: 30px; \\n  }\\n  h1 { font-size: 35px; font-weight: 300; text-align: center; text-transform: capitalize; }\\n  p, ul, ol {\\n    font-family: sans-serif;\\n    font-size: 14px;\\n    font-weight: normal;\\n    margin: 0;\\n    margin-bottom: 15px; \\n  }\\n  p li, ul li, ol li { list-style-position: inside; margin-left: 5px; }\\n  a { color: #55c57a; text-decoration: underline; }\\n  \\n  .btn { box-sizing: border-box; width: 100%; }\\n  .btn > tbody > tr > td { padding-bottom: 15px; }\\n  .btn table { width: auto; }\\n  .btn table td { background-color: #ffffff; border-radius: 5px; text-align: center; }\\n  .btn a {\\n    background-color: #ffffff;\\n    border: solid 1px #55c57a;\\n    border-radius: 5px;\\n    box-sizing: border-box;\\n    color: #55c57a;\\n    cursor: pointer;\\n    display: inline-block;\\n    font-size: 14px;\\n    font-weight: bold;\\n    margin: 0;\\n    padding: 12px 25px;\\n    text-decoration: none;\\n    text-transform: capitalize; \\n  }\\n  .btn-primary table td { background-color: #55c57a; }\\n  .btn-primary a {\\n    background-color: #55c57a;\\n    border-color: #55c57a;\\n    color: #ffffff; \\n  }\\n  \\n  .last { margin-bottom: 0; }\\n  .first { margin-top: 0; }\\n  .align-center { text-align: center; }\\n  .align-right { text-align: right; }\\n  .align-left { text-align: left; }\\n  .clear { clear: both; }\\n  .mt0 { margin-top: 0; }\\n  .mb0 { margin-bottom: 0; }\\n  \\n  .preheader {\\n    color: transparent;\\n    display: none;\\n    height: 0;\\n    max-height: 0;\\n    max-width: 0;\\n    opacity: 0;\\n    overflow: hidden;\\n    mso-hide: all;\\n    visibility: hidden;\\n    width: 0; \\n  }\\n  .powered-by a { text-decoration: none; }\\n  hr { border: 0; border-bottom: 1px solid #f6f6f6; margin: 20px 0; }\\n  \\n  @media only screen and (max-width: 620px) {\\n    table[class=body] h1 { font-size: 28px !important; margin-bottom: 10px !important; }\\n    table[class=body] p, table[class=body] ul, table[class=body] ol, table[class=body] td, table[class=body] span, table[class=body] a { font-size: 16px !important; }\\n    table[class=body] .wrapper, table[class=body] .article { padding: 10px !important; }\\n    table[class=body] .content { padding: 0 !important; }\\n    table[class=body] .container { padding: 0 !important; width: 100% !important; }\\n    table[class=body] .main { border-left-width: 0 !important; border-radius: 0 !important; border-right-width: 0 !important; }\\n    table[class=body] .btn table { width: 100% !important; }\\n    table[class=body] .btn a { width: 100% !important; }\\n    table[class=body] .img-responsive { height: auto !important; max-width: 100% !important; width: auto !important; }\\n  }\\n  @media all {\\n    .ExternalClass { width: 100%; }\\n    .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div { line-height: 100%; }\\n    .apple-link a {\\n      color: inherit !important;\\n      font-family: inherit !important;\\n      font-size: inherit !important;\\n      font-weight: inherit !important;\\n      line-height: inherit !important;\\n      text-decoration: none !important; \\n    }\\n    .btn-primary table td:hover { background-color: #2e864b !important; }\\n    .btn-primary a:hover {\\n      background-color: #2e864b !important;\\n      border-color: #2e864b !important; \\n    } \\n  }\\n\";\nvar BaseEmailTemplate = function BaseEmailTemplate(_ref) {\n  var subject = _ref.subject,\n    firstName = _ref.firstName,\n    content = _ref.content,\n    buttonLink = _ref.buttonLink,\n    buttonText = _ref.buttonText;\n  return /*#__PURE__*/_react[\"default\"].createElement(\"html\", {\n    lang: \"en\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"head\", null, /*#__PURE__*/_react[\"default\"].createElement(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"meta\", {\n    httpEquiv: \"Content-Type\",\n    content: \"text/html; charset=UTF-8\"\n  }), /*#__PURE__*/_react[\"default\"].createElement(\"title\", null, subject), /*#__PURE__*/_react[\"default\"].createElement(\"style\", {\n    dangerouslySetInnerHTML: {\n      __html: EMAIL_STYLES\n    }\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"body\", {\n    className: \"body\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    role: \"presentation\",\n    border: \"0\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    className: \"body\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", null), /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"container\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"content\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    role: \"presentation\",\n    className: \"main\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"wrapper\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    role: \"presentation\",\n    border: \"0\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", null, /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"Hi \", firstName, \",\"), content, buttonLink && buttonText && /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    role: \"presentation\",\n    border: \"0\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\",\n    className: \"btn btn-primary\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    align: \"left\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    role: \"presentation\",\n    border: \"0\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", null, /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    href: buttonLink,\n    target: \"_blank\",\n    rel: \"noopener noreferrer\"\n  }, buttonText))))))))))))))))), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"footer\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"table\", {\n    role: \"presentation\",\n    border: \"0\",\n    cellPadding: \"0\",\n    cellSpacing: \"0\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"tbody\", null, /*#__PURE__*/_react[\"default\"].createElement(\"tr\", null, /*#__PURE__*/_react[\"default\"].createElement(\"td\", {\n    className: \"content-block\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"span\", {\n    className: \"apple-link\"\n  }, \"Natours Inc, 123 Nowhere Road, San Francisco CA 99999\"), /*#__PURE__*/_react[\"default\"].createElement(\"br\", null), \"Don't like these emails?\", /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    href: \"#\"\n  }, \"Unsubscribe\")))))))), /*#__PURE__*/_react[\"default\"].createElement(\"td\", null))))));\n};\nvar _default = exports[\"default\"] = BaseEmailTemplate;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImUiLCJfX2VzTW9kdWxlIiwiRU1BSUxfU1RZTEVTIiwiQmFzZUVtYWlsVGVtcGxhdGUiLCJfcmVmIiwic3ViamVjdCIsImZpcnN0TmFtZSIsImNvbnRlbnQiLCJidXR0b25MaW5rIiwiYnV0dG9uVGV4dCIsImNyZWF0ZUVsZW1lbnQiLCJsYW5nIiwibmFtZSIsImh0dHBFcXVpdiIsImRhbmdlcm91c2x5U2V0SW5uZXJIVE1MIiwiX19odG1sIiwiY2xhc3NOYW1lIiwicm9sZSIsImJvcmRlciIsImNlbGxQYWRkaW5nIiwiY2VsbFNwYWNpbmciLCJhbGlnbiIsImhyZWYiLCJ0YXJnZXQiLCJyZWwiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvdGVtcGxhdGVzLyIsInNvdXJjZXMiOlsiQmFzZUVtYWlsVGVtcGxhdGUuanN4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIE5PVEU6IEZvciBiZXN0IGVtYWlsIGNvbXBhdGliaWxpdHksIHRoZSBDU1Mgc2hvdWxkIGlkZWFsbHkgYmUgaW5saW5lZCBpbnRvIHRoZSBIVE1MXG4vLyBlbGVtZW50cyB1c2luZyBhIHRvb2wgbGlrZSBqdWljZSBhZnRlciByZW5kZXJpbmcsIGJ1dCBrZWVwaW5nIGl0IGluIHRoZSA8c3R5bGU+XG4vLyBibG9jayBpcyB0aGUgc3RhbmRhcmQgZmlyc3Qgc3RlcCBmb3IgY29udmVyc2lvbi5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmNvbnN0IEVNQUlMX1NUWUxFUyA9IGBcbiAgaW1nIHtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgLW1zLWludGVycG9sYXRpb24tbW9kZTogYmljdWJpYztcbiAgICBtYXgtd2lkdGg6IDEwMCU7IFxuICB9XG4gIGJvZHkge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmNmY2ZjY7XG4gICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDA7XG4gICAgLW1zLXRleHQtc2l6ZS1hZGp1c3Q6IDEwMCU7XG4gICAgLXdlYmtpdC10ZXh0LXNpemUtYWRqdXN0OiAxMDAlOyBcbiAgfVxuICB0YWJsZSB7XG4gICAgYm9yZGVyLWNvbGxhcHNlOiBzZXBhcmF0ZTtcbiAgICBtc28tdGFibGUtbHNwYWNlOiAwcHQ7XG4gICAgbXNvLXRhYmxlLXJzcGFjZTogMHB0O1xuICAgIHdpZHRoOiAxMDAlOyBcbiAgfVxuICB0YWJsZSB0ZCB7XG4gICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIHZlcnRpY2FsLWFsaWduOiB0b3A7IFxuICB9XG4gIC8qIC4uLiAoUmVzdCBvZiB5b3VyIGV4dGVuc2l2ZSBDU1MgaGVyZSkgLi4uICovXG4gIC8qIC0tLSBJTVBPUlRBTlQ6IEluY2x1ZGUgQUxMIHRoZSBDU1MgZnJvbSB5b3VyIFBVRyBmaWxlIGhlcmUgLS0tICovXG4gIFxuICAuYm9keSB7IGJhY2tncm91bmQtY29sb3I6ICNmNmY2ZjY7IHdpZHRoOiAxMDAlOyB9XG4gIC5jb250YWluZXIgeyBkaXNwbGF5OiBibG9jazsgbWFyZ2luOiAwIGF1dG8gIWltcG9ydGFudDsgbWF4LXdpZHRoOiA1ODBweDsgcGFkZGluZzogMTBweDsgd2lkdGg6IDU4MHB4OyB9XG4gIC5jb250ZW50IHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgZGlzcGxheTogYmxvY2s7IG1hcmdpbjogMCBhdXRvOyBtYXgtd2lkdGg6IDU4MHB4OyBwYWRkaW5nOiAxMHB4OyB9XG4gIC5tYWluIHsgYmFja2dyb3VuZDogI2ZmZmZmZjsgYm9yZGVyLXJhZGl1czogM3B4OyB3aWR0aDogMTAwJTsgfVxuICAud3JhcHBlciB7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7IHBhZGRpbmc6IDIwcHg7IH1cbiAgLmNvbnRlbnQtYmxvY2sgeyBwYWRkaW5nLWJvdHRvbTogMTBweDsgcGFkZGluZy10b3A6IDEwcHg7IH1cbiAgLmZvb3RlciB7IGNsZWFyOiBib3RoOyBtYXJnaW4tdG9wOiAxMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IHdpZHRoOiAxMDAlOyB9XG4gIC5mb290ZXIgdGQsIC5mb290ZXIgcCwgLmZvb3RlciBzcGFuLCAuZm9vdGVyIGEgeyBjb2xvcjogIzk5OTk5OTsgZm9udC1zaXplOiAxMnB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbiAgXG4gIGgxLCBoMiwgaDMsIGg0IHtcbiAgICBjb2xvcjogIzAwMDAwMDtcbiAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgICBmb250LXdlaWdodDogNDAwO1xuICAgIGxpbmUtaGVpZ2h0OiAxLjQ7XG4gICAgbWFyZ2luOiAwO1xuICAgIG1hcmdpbi1ib3R0b206IDMwcHg7IFxuICB9XG4gIGgxIHsgZm9udC1zaXplOiAzNXB4OyBmb250LXdlaWdodDogMzAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplOyB9XG4gIHAsIHVsLCBvbCB7XG4gICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XG4gICAgZm9udC1zaXplOiAxNHB4O1xuICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7XG4gICAgbWFyZ2luOiAwO1xuICAgIG1hcmdpbi1ib3R0b206IDE1cHg7IFxuICB9XG4gIHAgbGksIHVsIGxpLCBvbCBsaSB7IGxpc3Qtc3R5bGUtcG9zaXRpb246IGluc2lkZTsgbWFyZ2luLWxlZnQ6IDVweDsgfVxuICBhIHsgY29sb3I6ICM1NWM1N2E7IHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyB9XG4gIFxuICAuYnRuIHsgYm94LXNpemluZzogYm9yZGVyLWJveDsgd2lkdGg6IDEwMCU7IH1cbiAgLmJ0biA+IHRib2R5ID4gdHIgPiB0ZCB7IHBhZGRpbmctYm90dG9tOiAxNXB4OyB9XG4gIC5idG4gdGFibGUgeyB3aWR0aDogYXV0bzsgfVxuICAuYnRuIHRhYmxlIHRkIHsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgYm9yZGVyLXJhZGl1czogNXB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IH1cbiAgLmJ0biBhIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICAgIGJvcmRlcjogc29saWQgMXB4ICM1NWM1N2E7XG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgY29sb3I6ICM1NWM1N2E7XG4gICAgY3Vyc29yOiBwb2ludGVyO1xuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgbWFyZ2luOiAwO1xuICAgIHBhZGRpbmc6IDEycHggMjVweDtcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gICAgdGV4dC10cmFuc2Zvcm06IGNhcGl0YWxpemU7IFxuICB9XG4gIC5idG4tcHJpbWFyeSB0YWJsZSB0ZCB7IGJhY2tncm91bmQtY29sb3I6ICM1NWM1N2E7IH1cbiAgLmJ0bi1wcmltYXJ5IGEge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICM1NWM1N2E7XG4gICAgYm9yZGVyLWNvbG9yOiAjNTVjNTdhO1xuICAgIGNvbG9yOiAjZmZmZmZmOyBcbiAgfVxuICBcbiAgLmxhc3QgeyBtYXJnaW4tYm90dG9tOiAwOyB9XG4gIC5maXJzdCB7IG1hcmdpbi10b3A6IDA7IH1cbiAgLmFsaWduLWNlbnRlciB7IHRleHQtYWxpZ246IGNlbnRlcjsgfVxuICAuYWxpZ24tcmlnaHQgeyB0ZXh0LWFsaWduOiByaWdodDsgfVxuICAuYWxpZ24tbGVmdCB7IHRleHQtYWxpZ246IGxlZnQ7IH1cbiAgLmNsZWFyIHsgY2xlYXI6IGJvdGg7IH1cbiAgLm10MCB7IG1hcmdpbi10b3A6IDA7IH1cbiAgLm1iMCB7IG1hcmdpbi1ib3R0b206IDA7IH1cbiAgXG4gIC5wcmVoZWFkZXIge1xuICAgIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgICBkaXNwbGF5OiBub25lO1xuICAgIGhlaWdodDogMDtcbiAgICBtYXgtaGVpZ2h0OiAwO1xuICAgIG1heC13aWR0aDogMDtcbiAgICBvcGFjaXR5OiAwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbXNvLWhpZGU6IGFsbDtcbiAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgd2lkdGg6IDA7IFxuICB9XG4gIC5wb3dlcmVkLWJ5IGEgeyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IH1cbiAgaHIgeyBib3JkZXI6IDA7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjZmNmY2OyBtYXJnaW46IDIwcHggMDsgfVxuICBcbiAgQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA2MjBweCkge1xuICAgIHRhYmxlW2NsYXNzPWJvZHldIGgxIHsgZm9udC1zaXplOiAyOHB4ICFpbXBvcnRhbnQ7IG1hcmdpbi1ib3R0b206IDEwcHggIWltcG9ydGFudDsgfVxuICAgIHRhYmxlW2NsYXNzPWJvZHldIHAsIHRhYmxlW2NsYXNzPWJvZHldIHVsLCB0YWJsZVtjbGFzcz1ib2R5XSBvbCwgdGFibGVbY2xhc3M9Ym9keV0gdGQsIHRhYmxlW2NsYXNzPWJvZHldIHNwYW4sIHRhYmxlW2NsYXNzPWJvZHldIGEgeyBmb250LXNpemU6IDE2cHggIWltcG9ydGFudDsgfVxuICAgIHRhYmxlW2NsYXNzPWJvZHldIC53cmFwcGVyLCB0YWJsZVtjbGFzcz1ib2R5XSAuYXJ0aWNsZSB7IHBhZGRpbmc6IDEwcHggIWltcG9ydGFudDsgfVxuICAgIHRhYmxlW2NsYXNzPWJvZHldIC5jb250ZW50IHsgcGFkZGluZzogMCAhaW1wb3J0YW50OyB9XG4gICAgdGFibGVbY2xhc3M9Ym9keV0gLmNvbnRhaW5lciB7IHBhZGRpbmc6IDAgIWltcG9ydGFudDsgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgfVxuICAgIHRhYmxlW2NsYXNzPWJvZHldIC5tYWluIHsgYm9yZGVyLWxlZnQtd2lkdGg6IDAgIWltcG9ydGFudDsgYm9yZGVyLXJhZGl1czogMCAhaW1wb3J0YW50OyBib3JkZXItcmlnaHQtd2lkdGg6IDAgIWltcG9ydGFudDsgfVxuICAgIHRhYmxlW2NsYXNzPWJvZHldIC5idG4gdGFibGUgeyB3aWR0aDogMTAwJSAhaW1wb3J0YW50OyB9XG4gICAgdGFibGVbY2xhc3M9Ym9keV0gLmJ0biBhIHsgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgfVxuICAgIHRhYmxlW2NsYXNzPWJvZHldIC5pbWctcmVzcG9uc2l2ZSB7IGhlaWdodDogYXV0byAhaW1wb3J0YW50OyBtYXgtd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgd2lkdGg6IGF1dG8gIWltcG9ydGFudDsgfVxuICB9XG4gIEBtZWRpYSBhbGwge1xuICAgIC5FeHRlcm5hbENsYXNzIHsgd2lkdGg6IDEwMCU7IH1cbiAgICAuRXh0ZXJuYWxDbGFzcywgLkV4dGVybmFsQ2xhc3MgcCwgLkV4dGVybmFsQ2xhc3Mgc3BhbiwgLkV4dGVybmFsQ2xhc3MgZm9udCwgLkV4dGVybmFsQ2xhc3MgdGQsIC5FeHRlcm5hbENsYXNzIGRpdiB7IGxpbmUtaGVpZ2h0OiAxMDAlOyB9XG4gICAgLmFwcGxlLWxpbmsgYSB7XG4gICAgICBjb2xvcjogaW5oZXJpdCAhaW1wb3J0YW50O1xuICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQgIWltcG9ydGFudDtcbiAgICAgIGZvbnQtc2l6ZTogaW5oZXJpdCAhaW1wb3J0YW50O1xuICAgICAgZm9udC13ZWlnaHQ6IGluaGVyaXQgIWltcG9ydGFudDtcbiAgICAgIGxpbmUtaGVpZ2h0OiBpbmhlcml0ICFpbXBvcnRhbnQ7XG4gICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmUgIWltcG9ydGFudDsgXG4gICAgfVxuICAgIC5idG4tcHJpbWFyeSB0YWJsZSB0ZDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6ICMyZTg2NGIgIWltcG9ydGFudDsgfVxuICAgIC5idG4tcHJpbWFyeSBhOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyZTg2NGIgIWltcG9ydGFudDtcbiAgICAgIGJvcmRlci1jb2xvcjogIzJlODY0YiAhaW1wb3J0YW50OyBcbiAgICB9IFxuICB9XG5gO1xuXG5jb25zdCBCYXNlRW1haWxUZW1wbGF0ZSA9ICh7XG4gIHN1YmplY3QsXG4gIGZpcnN0TmFtZSxcbiAgY29udGVudCxcbiAgYnV0dG9uTGluayxcbiAgYnV0dG9uVGV4dCxcbn0pID0+IHtcbiAgcmV0dXJuIChcbiAgICA8aHRtbCBsYW5nPVwiZW5cIj5cbiAgICAgIDxoZWFkPlxuICAgICAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoXCIgLz5cbiAgICAgICAgPG1ldGEgaHR0cEVxdWl2PVwiQ29udGVudC1UeXBlXCIgY29udGVudD1cInRleHQvaHRtbDsgY2hhcnNldD1VVEYtOFwiIC8+XG4gICAgICAgIDx0aXRsZT57c3ViamVjdH08L3RpdGxlPlxuXG4gICAgICAgIDxzdHlsZSBkYW5nZXJvdXNseVNldElubmVySFRNTD17eyBfX2h0bWw6IEVNQUlMX1NUWUxFUyB9fSAvPlxuICAgICAgPC9oZWFkPlxuICAgICAgPGJvZHkgY2xhc3NOYW1lPVwiYm9keVwiPlxuICAgICAgICA8dGFibGVcbiAgICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgICAgICBib3JkZXI9XCIwXCJcbiAgICAgICAgICBjZWxsUGFkZGluZz1cIjBcIlxuICAgICAgICAgIGNlbGxTcGFjaW5nPVwiMFwiXG4gICAgICAgICAgY2xhc3NOYW1lPVwiYm9keVwiXG4gICAgICAgID5cbiAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgIDx0ZD57LyogU3BhY2VyICovfTwvdGQ+XG4gICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNvbnRlbnRcIj5cbiAgICAgICAgICAgICAgICAgIHsvKiBTVEFSVCBDRU5URVJFRCBXSElURSBDT05UQUlORVIgKi99XG4gICAgICAgICAgICAgICAgICA8dGFibGUgcm9sZT1cInByZXNlbnRhdGlvblwiIGNsYXNzTmFtZT1cIm1haW5cIj5cbiAgICAgICAgICAgICAgICAgICAgey8qIFNUQVJUIE1BSU4gQVJFQSAqL31cbiAgICAgICAgICAgICAgICAgICAgPHRib2R5PlxuICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJ3cmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJwcmVzZW50YXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcj1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFNwYWNpbmc9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBDT05URU5UIEJMT0NLIC0gVGhpcyBpcyB3aGVyZSB5b3UgaW5zZXJ0IHRoZSBzcGVjaWZpYyBlbWFpbCBjb250ZW50ICovfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPkhpIHtmaXJzdE5hbWV9LDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsvKiBQcmltYXJ5IEJ1dHRvbiAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7YnV0dG9uTGluayAmJiBidXR0b25UZXh0ICYmIChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxTcGFjaW5nPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGQgYWxpZ249XCJsZWZ0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0YWJsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU9XCJwcmVzZW50YXRpb25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcj1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxQYWRkaW5nPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbFNwYWNpbmc9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmPXtidXR0b25MaW5rfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0PVwiX2JsYW5rXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbD1cIm5vb3BlbmVyIG5vcmVmZXJyZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtidXR0b25UZXh0fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG5cbiAgICAgICAgICAgICAgICAgIHsvKiBTVEFSVCBGT09URVIgKi99XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICA8dGFibGVcbiAgICAgICAgICAgICAgICAgICAgICByb2xlPVwicHJlc2VudGF0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICBib3JkZXI9XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICBjZWxsUGFkZGluZz1cIjBcIlxuICAgICAgICAgICAgICAgICAgICAgIGNlbGxTcGFjaW5nPVwiMFwiXG4gICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICA8dGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzc05hbWU9XCJjb250ZW50LWJsb2NrXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiYXBwbGUtbGlua1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmF0b3VycyBJbmMsIDEyMyBOb3doZXJlIFJvYWQsIFNhbiBGcmFuY2lzY28gQ0FcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDk5OTk5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxiciAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIERvbid0IGxpa2UgdGhlc2UgZW1haWxzP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCI+VW5zdWJzY3JpYmU8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgICAgIDwvdGJvZHk+XG4gICAgICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIHsvKiBFTkQgRk9PVEVSICovfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICA8dGQ+ey8qIFNwYWNlciAqL308L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICA8L3RhYmxlPlxuICAgICAgPC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJhc2VFbWFpbFRlbXBsYXRlO1xuIl0sIm1hcHBp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","map":{"version":3,"names":["_react","_interopRequireDefault","require","e","__esModule","EMAIL_STYLES","BaseEmailTemplate","_ref","subject","firstName","content","buttonLink","buttonText","createElement","lang","name","httpEquiv","dangerouslySetInnerHTML","__html","className","role","border","cellPadding","cellSpacing","align","href","target","rel","_default","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/templates/","sources":["BaseEmailTemplate.jsx"],"sourcesContent":["// NOTE: For best email compatibility, the CSS should ideally be inlined into the HTML\n// elements using a tool like juice after rendering, but keeping it in the <style>\n// block is the standard first step for conversion.\nimport React from 'react';\n\nconst EMAIL_STYLES = `\n  img {\n    border: none;\n    -ms-interpolation-mode: bicubic;\n    max-width: 100%; \n  }\n  body {\n    background-color: #f6f6f6;\n    font-family: sans-serif;\n    -webkit-font-smoothing: antialiased;\n    font-size: 14px;\n    line-height: 1.4;\n    margin: 0;\n    padding: 0;\n    -ms-text-size-adjust: 100%;\n    -webkit-text-size-adjust: 100%; \n  }\n  table {\n    border-collapse: separate;\n    mso-table-lspace: 0pt;\n    mso-table-rspace: 0pt;\n    width: 100%; \n  }\n  table td {\n    font-family: sans-serif;\n    font-size: 14px;\n    vertical-align: top; \n  }\n  /* ... (Rest of your extensive CSS here) ... */\n  /* --- IMPORTANT: Include ALL the CSS from your PUG file here --- */\n  \n  .body { background-color: #f6f6f6; width: 100%; }\n  .container { display: block; margin: 0 auto !important; max-width: 580px; padding: 10px; width: 580px; }\n  .content { box-sizing: border-box; display: block; margin: 0 auto; max-width: 580px; padding: 10px; }\n  .main { background: #ffffff; border-radius: 3px; width: 100%; }\n  .wrapper { box-sizing: border-box; padding: 20px; }\n  .content-block { padding-bottom: 10px; padding-top: 10px; }\n  .footer { clear: both; margin-top: 10px; text-align: center; width: 100%; }\n  .footer td, .footer p, .footer span, .footer a { color: #999999; font-size: 12px; text-align: center; }\n  \n  h1, h2, h3, h4 {\n    color: #000000;\n    font-family: sans-serif;\n    font-weight: 400;\n    line-height: 1.4;\n    margin: 0;\n    margin-bottom: 30px; \n  }\n  h1 { font-size: 35px; font-weight: 300; text-align: center; text-transform: capitalize; }\n  p, ul, ol {\n    font-family: sans-serif;\n    font-size: 14px;\n    font-weight: normal;\n    margin: 0;\n    margin-bottom: 15px; \n  }\n  p li, ul li, ol li { list-style-position: inside; margin-left: 5px; }\n  a { color: #55c57a; text-decoration: underline; }\n  \n  .btn { box-sizing: border-box; width: 100%; }\n  .btn > tbody > tr > td { padding-bottom: 15px; }\n  .btn table { width: auto; }\n  .btn table td { background-color: #ffffff; border-radius: 5px; text-align: center; }\n  .btn a {\n    background-color: #ffffff;\n    border: solid 1px #55c57a;\n    border-radius: 5px;\n    box-sizing: border-box;\n    color: #55c57a;\n    cursor: pointer;\n    display: inline-block;\n    font-size: 14px;\n    font-weight: bold;\n    margin: 0;\n    padding: 12px 25px;\n    text-decoration: none;\n    text-transform: capitalize; \n  }\n  .btn-primary table td { background-color: #55c57a; }\n  .btn-primary a {\n    background-color: #55c57a;\n    border-color: #55c57a;\n    color: #ffffff; \n  }\n  \n  .last { margin-bottom: 0; }\n  .first { margin-top: 0; }\n  .align-center { text-align: center; }\n  .align-right { text-align: right; }\n  .align-left { text-align: left; }\n  .clear { clear: both; }\n  .mt0 { margin-top: 0; }\n  .mb0 { margin-bottom: 0; }\n  \n  .preheader {\n    color: transparent;\n    display: none;\n    height: 0;\n    max-height: 0;\n    max-width: 0;\n    opacity: 0;\n    overflow: hidden;\n    mso-hide: all;\n    visibility: hidden;\n    width: 0; \n  }\n  .powered-by a { text-decoration: none; }\n  hr { border: 0; border-bottom: 1px solid #f6f6f6; margin: 20px 0; }\n  \n  @media only screen and (max-width: 620px) {\n    table[class=body] h1 { font-size: 28px !important; margin-bottom: 10px !important; }\n    table[class=body] p, table[class=body] ul, table[class=body] ol, table[class=body] td, table[class=body] span, table[class=body] a { font-size: 16px !important; }\n    table[class=body] .wrapper, table[class=body] .article { padding: 10px !important; }\n    table[class=body] .content { padding: 0 !important; }\n    table[class=body] .container { padding: 0 !important; width: 100% !important; }\n    table[class=body] .main { border-left-width: 0 !important; border-radius: 0 !important; border-right-width: 0 !important; }\n    table[class=body] .btn table { width: 100% !important; }\n    table[class=body] .btn a { width: 100% !important; }\n    table[class=body] .img-responsive { height: auto !important; max-width: 100% !important; width: auto !important; }\n  }\n  @media all {\n    .ExternalClass { width: 100%; }\n    .ExternalClass, .ExternalClass p, .ExternalClass span, .ExternalClass font, .ExternalClass td, .ExternalClass div { line-height: 100%; }\n    .apple-link a {\n      color: inherit !important;\n      font-family: inherit !important;\n      font-size: inherit !important;\n      font-weight: inherit !important;\n      line-height: inherit !important;\n      text-decoration: none !important; \n    }\n    .btn-primary table td:hover { background-color: #2e864b !important; }\n    .btn-primary a:hover {\n      background-color: #2e864b !important;\n      border-color: #2e864b !important; \n    } \n  }\n`;\n\nconst BaseEmailTemplate = ({\n  subject,\n  firstName,\n  content,\n  buttonLink,\n  buttonText,\n}) => {\n  return (\n    <html lang=\"en\">\n      <head>\n        <meta name=\"viewport\" content=\"width=device-width\" />\n        <meta httpEquiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n        <title>{subject}</title>\n\n        <style dangerouslySetInnerHTML={{ __html: EMAIL_STYLES }} />\n      </head>\n      <body className=\"body\">\n        <table\n          role=\"presentation\"\n          border=\"0\"\n          cellPadding=\"0\"\n          cellSpacing=\"0\"\n          className=\"body\"\n        >\n          <tbody>\n            <tr>\n              <td>{/* Spacer */}</td>\n              <td className=\"container\">\n                <div className=\"content\">\n                  {/* START CENTERED WHITE CONTAINER */}\n                  <table role=\"presentation\" className=\"main\">\n                    {/* START MAIN AREA */}\n                    <tbody>\n                      <tr>\n                        <td className=\"wrapper\">\n                          <table\n                            role=\"presentation\"\n                            border=\"0\"\n                            cellPadding=\"0\"\n                            cellSpacing=\"0\"\n                          >\n                            <tbody>\n                              <tr>\n                                <td>\n                                  {/* CONTENT BLOCK - This is where you insert the specific email content */}\n                                  <p>Hi {firstName},</p>\n                                  {content}\n\n                                  {/* Primary Button */}\n                                  {buttonLink && buttonText && (\n                                    <table\n                                      role=\"presentation\"\n                                      border=\"0\"\n                                      cellPadding=\"0\"\n                                      cellSpacing=\"0\"\n                                      className=\"btn btn-primary\"\n                                    >\n                                      <tbody>\n                                        <tr>\n                                          <td align=\"left\">\n                                            <table\n                                              role=\"presentation\"\n                                              border=\"0\"\n                                              cellPadding=\"0\"\n                                              cellSpacing=\"0\"\n                                            >\n                                              <tbody>\n                                                <tr>\n                                                  <td>\n                                                    <a\n                                                      href={buttonLink}\n                                                      target=\"_blank\"\n                                                      rel=\"noopener noreferrer\"\n                                                    >\n                                                      {buttonText}\n                                                    </a>\n                                                  </td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </td>\n                                        </tr>\n                                      </tbody>\n                                    </table>\n                                  )}\n                                </td>\n                              </tr>\n                            </tbody>\n                          </table>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n\n                  {/* START FOOTER */}\n                  <div className=\"footer\">\n                    <table\n                      role=\"presentation\"\n                      border=\"0\"\n                      cellPadding=\"0\"\n                      cellSpacing=\"0\"\n                    >\n                      <tbody>\n                        <tr>\n                          <td className=\"content-block\">\n                            <span className=\"apple-link\">\n                              Natours Inc, 123 Nowhere Road, San Francisco CA\n                              99999\n                            </span>\n                            <br />\n                            Don't like these emails?\n                            <a href=\"#\">Unsubscribe</a>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                  {/* END FOOTER */}\n                </div>\n              </td>\n              <td>{/* Spacer */}</td>\n            </tr>\n          </tbody>\n        </table>\n      </body>\n    </html>\n  );\n};\n\nexport default BaseEmailTemplate;\n"],"mappings":"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","ignoreList":[]}},"mtime":1765351329790},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/routes/reviewRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar express = require('express');\nvar reviewController = require('../controllers/reviewController');\nvar authController = require('../controllers/authController');\n\n// By default each router only has access to it's own route's params.\n// In order to get access to params like tourId etc we need mergeParams set to true\nvar router = express.Router({\n  mergeParams: true\n});\nrouter.route('/').get(reviewController.getAllReviews).post(authController.restrictTo('user'), reviewController.setTourUserIds, reviewController.createReview);\nrouter.use(authController.protect);\nrouter.route('/:id').get(reviewController.getReview).patch(authController.restrictTo('user', 'admin'), reviewController.updateReview)[\"delete\"](authController.restrictTo('user', 'admin'), reviewController.deleteReview);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInJldmlld0NvbnRyb2xsZXIiLCJhdXRoQ29udHJvbGxlciIsInJvdXRlciIsIlJvdXRlciIsIm1lcmdlUGFyYW1zIiwicm91dGUiLCJnZXQiLCJnZXRBbGxSZXZpZXdzIiwicG9zdCIsInJlc3RyaWN0VG8iLCJzZXRUb3VyVXNlcklkcyIsImNyZWF0ZVJldmlldyIsInVzZSIsInByb3RlY3QiLCJnZXRSZXZpZXciLCJwYXRjaCIsInVwZGF0ZVJldmlldyIsImRlbGV0ZVJldmlldyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvcm91dGVzLyIsInNvdXJjZXMiOlsicmV2aWV3Um91dGVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJyk7XG5jb25zdCByZXZpZXdDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvcmV2aWV3Q29udHJvbGxlcicpO1xuY29uc3QgYXV0aENvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcicpO1xuXG4vLyBCeSBkZWZhdWx0IGVhY2ggcm91dGVyIG9ubHkgaGFzIGFjY2VzcyB0byBpdCdzIG93biByb3V0ZSdzIHBhcmFtcy5cbi8vIEluIG9yZGVyIHRvIGdldCBhY2Nlc3MgdG8gcGFyYW1zIGxpa2UgdG91cklkIGV0YyB3ZSBuZWVkIG1lcmdlUGFyYW1zIHNldCB0byB0cnVlXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcih7IG1lcmdlUGFyYW1zOiB0cnVlIH0pO1xuXG5yb3V0ZXJcbiAgLnJvdXRlKCcvJylcbiAgLmdldChyZXZpZXdDb250cm9sbGVyLmdldEFsbFJldmlld3MpXG4gIC5wb3N0KFxuICAgIGF1dGhDb250cm9sbGVyLnJlc3RyaWN0VG8oJ3VzZXInKSxcbiAgICByZXZpZXdDb250cm9sbGVyLnNldFRvdXJVc2VySWRzLFxuICAgIHJldmlld0NvbnRyb2xsZXIuY3JlYXRlUmV2aWV3LFxuICApO1xuXG5yb3V0ZXIudXNlKGF1dGhDb250cm9sbGVyLnByb3RlY3QpO1xuXG5yb3V0ZXJcbiAgLnJvdXRlKCcvOmlkJylcbiAgLmdldChyZXZpZXdDb250cm9sbGVyLmdldFJldmlldylcbiAgLnBhdGNoKFxuICAgIGF1dGhDb250cm9sbGVyLnJlc3RyaWN0VG8oJ3VzZXInLCAnYWRtaW4nKSxcbiAgICByZXZpZXdDb250cm9sbGVyLnVwZGF0ZVJldmlldyxcbiAgKVxuICAuZGVsZXRlKFxuICAgIGF1dGhDb250cm9sbGVyLnJlc3RyaWN0VG8oJ3VzZXInLCAnYWRtaW4nKSxcbiAgICByZXZpZXdDb250cm9sbGVyLmRlbGV0ZVJldmlldyxcbiAgKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLElBQU1DLGdCQUFnQixHQUFHRCxPQUFPLENBQUMsaUNBQWlDLENBQUM7QUFDbkUsSUFBTUUsY0FBYyxHQUFHRixPQUFPLENBQUMsK0JBQStCLENBQUM7O0FBRS9EO0FBQ0E7QUFDQSxJQUFNRyxNQUFNLEdBQUdKLE9BQU8sQ0FBQ0ssTUFBTSxDQUFDO0VBQUVDLFdBQVcsRUFBRTtBQUFLLENBQUMsQ0FBQztBQUVwREYsTUFBTSxDQUNIRyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQ1ZDLEdBQUcsQ0FBQ04sZ0JBQWdCLENBQUNPLGFBQWEsQ0FBQyxDQUNuQ0MsSUFBSSxDQUNIUCxjQUFjLENBQUNRLFVBQVUsQ0FBQyxNQUFNLENBQUMsRUFDakNULGdCQUFnQixDQUFDVSxjQUFjLEVBQy9CVixnQkFBZ0IsQ0FBQ1csWUFDbkIsQ0FBQztBQUVIVCxNQUFNLENBQUNVLEdBQUcsQ0FBQ1gsY0FBYyxDQUFDWSxPQUFPLENBQUM7QUFFbENYLE1BQU0sQ0FDSEcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUNiQyxHQUFHLENBQUNOLGdCQUFnQixDQUFDYyxTQUFTLENBQUMsQ0FDL0JDLEtBQUssQ0FDSmQsY0FBYyxDQUFDUSxVQUFVLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUMxQ1QsZ0JBQWdCLENBQUNnQixZQUNuQixDQUFDLFVBQ00sQ0FDTGYsY0FBYyxDQUFDUSxVQUFVLENBQUMsTUFBTSxFQUFFLE9BQU8sQ0FBQyxFQUMxQ1QsZ0JBQWdCLENBQUNpQixZQUNuQixDQUFDO0FBRUhDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHakIsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","reviewController","authController","router","Router","mergeParams","route","get","getAllReviews","post","restrictTo","setTourUserIds","createReview","use","protect","getReview","patch","updateReview","deleteReview","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/routes/","sources":["reviewRoutes.js"],"sourcesContent":["const express = require('express');\nconst reviewController = require('../controllers/reviewController');\nconst authController = require('../controllers/authController');\n\n// By default each router only has access to it's own route's params.\n// In order to get access to params like tourId etc we need mergeParams set to true\nconst router = express.Router({ mergeParams: true });\n\nrouter\n  .route('/')\n  .get(reviewController.getAllReviews)\n  .post(\n    authController.restrictTo('user'),\n    reviewController.setTourUserIds,\n    reviewController.createReview,\n  );\n\nrouter.use(authController.protect);\n\nrouter\n  .route('/:id')\n  .get(reviewController.getReview)\n  .patch(\n    authController.restrictTo('user', 'admin'),\n    reviewController.updateReview,\n  )\n  .delete(\n    authController.restrictTo('user', 'admin'),\n    reviewController.deleteReview,\n  );\n\nmodule.exports = router;\n"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMC,gBAAgB,GAAGD,OAAO,CAAC,iCAAiC,CAAC;AACnE,IAAME,cAAc,GAAGF,OAAO,CAAC,+BAA+B,CAAC;;AAE/D;AACA;AACA,IAAMG,MAAM,GAAGJ,OAAO,CAACK,MAAM,CAAC;EAAEC,WAAW,EAAE;AAAK,CAAC,CAAC;AAEpDF,MAAM,CACHG,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAACN,gBAAgB,CAACO,aAAa,CAAC,CACnCC,IAAI,CACHP,cAAc,CAACQ,UAAU,CAAC,MAAM,CAAC,EACjCT,gBAAgB,CAACU,cAAc,EAC/BV,gBAAgB,CAACW,YACnB,CAAC;AAEHT,MAAM,CAACU,GAAG,CAACX,cAAc,CAACY,OAAO,CAAC;AAElCX,MAAM,CACHG,KAAK,CAAC,MAAM,CAAC,CACbC,GAAG,CAACN,gBAAgB,CAACc,SAAS,CAAC,CAC/BC,KAAK,CACJd,cAAc,CAACQ,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,EAC1CT,gBAAgB,CAACgB,YACnB,CAAC,UACM,CACLf,cAAc,CAACQ,UAAU,CAAC,MAAM,EAAE,OAAO,CAAC,EAC1CT,gBAAgB,CAACiB,YACnB,CAAC;AAEHC,MAAM,CAACC,OAAO,GAAGjB,MAAM","ignoreList":[]}},"mtime":1763972711854},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/reviewController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar Review = require('../models/reviewModel');\nvar factory = require('./handlerFactory');\nexports.setTourUserIds = function (req, res, next) {\n  if (!req.body.tour) req.body.tour = req.params.tourId;\n  if (!req.body.user) req.body.user = req.user.id;\n  next();\n};\nexports.getReview = factory.getOne(Review);\nexports.getAllReviews = factory.getAll(Review);\nexports.createReview = factory.createOne(Review);\nexports.deleteReview = factory.deleteOne(Review);\nexports.updateReview = factory.updateOne(Review);\n\n// exports.createReview = catchAsync(async (req, res) => {\n//   // Allowing nested routes (if it is NOT specified)\n//   if (!req.body.tour) req.body.tour = req.params.tourId;\n//   if (!req.body.user) req.body.user = req.user.id;\n\n//   const newReview = await Review.create(req.body);\n\n//   res.status(201).json({\n//     status: 'success',\n//     data: {\n//       review: newReview,\n//     },\n//   });\n// });\n\n// exports.getAllReviews = catchAsync(async (req, res) => {\n//   let filter = {};\n//   if (req.params.tourId) filter = { tour: req.params.tourId };\n//   const reviews = await Review.find(filter);\n\n//   res.status(200).json({\n//     status: 'success',\n//     results: reviews.length,\n//     data: {\n//       reviews,\n//     },\n//   });\n// });\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZXZpZXciLCJyZXF1aXJlIiwiZmFjdG9yeSIsImV4cG9ydHMiLCJzZXRUb3VyVXNlcklkcyIsInJlcSIsInJlcyIsIm5leHQiLCJib2R5IiwidG91ciIsInBhcmFtcyIsInRvdXJJZCIsInVzZXIiLCJpZCIsImdldFJldmlldyIsImdldE9uZSIsImdldEFsbFJldmlld3MiLCJnZXRBbGwiLCJjcmVhdGVSZXZpZXciLCJjcmVhdGVPbmUiLCJkZWxldGVSZXZpZXciLCJkZWxldGVPbmUiLCJ1cGRhdGVSZXZpZXciLCJ1cGRhdGVPbmUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJyZXZpZXdDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFJldmlldyA9IHJlcXVpcmUoJy4uL21vZGVscy9yZXZpZXdNb2RlbCcpO1xuY29uc3QgZmFjdG9yeSA9IHJlcXVpcmUoJy4vaGFuZGxlckZhY3RvcnknKTtcblxuZXhwb3J0cy5zZXRUb3VyVXNlcklkcyA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBpZiAoIXJlcS5ib2R5LnRvdXIpIHJlcS5ib2R5LnRvdXIgPSByZXEucGFyYW1zLnRvdXJJZDtcbiAgaWYgKCFyZXEuYm9keS51c2VyKSByZXEuYm9keS51c2VyID0gcmVxLnVzZXIuaWQ7XG4gIG5leHQoKTtcbn07XG5cbmV4cG9ydHMuZ2V0UmV2aWV3ID0gZmFjdG9yeS5nZXRPbmUoUmV2aWV3KTtcbmV4cG9ydHMuZ2V0QWxsUmV2aWV3cyA9IGZhY3RvcnkuZ2V0QWxsKFJldmlldyk7XG5leHBvcnRzLmNyZWF0ZVJldmlldyA9IGZhY3RvcnkuY3JlYXRlT25lKFJldmlldyk7XG5leHBvcnRzLmRlbGV0ZVJldmlldyA9IGZhY3RvcnkuZGVsZXRlT25lKFJldmlldyk7XG5leHBvcnRzLnVwZGF0ZVJldmlldyA9IGZhY3RvcnkudXBkYXRlT25lKFJldmlldyk7XG5cbi8vIGV4cG9ydHMuY3JlYXRlUmV2aWV3ID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMpID0+IHtcbi8vICAgLy8gQWxsb3dpbmcgbmVzdGVkIHJvdXRlcyAoaWYgaXQgaXMgTk9UIHNwZWNpZmllZClcbi8vICAgaWYgKCFyZXEuYm9keS50b3VyKSByZXEuYm9keS50b3VyID0gcmVxLnBhcmFtcy50b3VySWQ7XG4vLyAgIGlmICghcmVxLmJvZHkudXNlcikgcmVxLmJvZHkudXNlciA9IHJlcS51c2VyLmlkO1xuXG4vLyAgIGNvbnN0IG5ld1JldmlldyA9IGF3YWl0IFJldmlldy5jcmVhdGUocmVxLmJvZHkpO1xuXG4vLyAgIHJlcy5zdGF0dXMoMjAxKS5qc29uKHtcbi8vICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbi8vICAgICBkYXRhOiB7XG4vLyAgICAgICByZXZpZXc6IG5ld1Jldmlldyxcbi8vICAgICB9LFxuLy8gICB9KTtcbi8vIH0pO1xuXG4vLyBleHBvcnRzLmdldEFsbFJldmlld3MgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcykgPT4ge1xuLy8gICBsZXQgZmlsdGVyID0ge307XG4vLyAgIGlmIChyZXEucGFyYW1zLnRvdXJJZCkgZmlsdGVyID0geyB0b3VyOiByZXEucGFyYW1zLnRvdXJJZCB9O1xuLy8gICBjb25zdCByZXZpZXdzID0gYXdhaXQgUmV2aWV3LmZpbmQoZmlsdGVyKTtcblxuLy8gICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4vLyAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4vLyAgICAgcmVzdWx0czogcmV2aWV3cy5sZW5ndGgsXG4vLyAgICAgZGF0YToge1xuLy8gICAgICAgcmV2aWV3cyxcbi8vICAgICB9LFxuLy8gICB9KTtcbi8vIH0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLHVCQUF1QixDQUFDO0FBQy9DLElBQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLGtCQUFrQixDQUFDO0FBRTNDRSxPQUFPLENBQUNDLGNBQWMsR0FBRyxVQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFLO0VBQzNDLElBQUksQ0FBQ0YsR0FBRyxDQUFDRyxJQUFJLENBQUNDLElBQUksRUFBRUosR0FBRyxDQUFDRyxJQUFJLENBQUNDLElBQUksR0FBR0osR0FBRyxDQUFDSyxNQUFNLENBQUNDLE1BQU07RUFDckQsSUFBSSxDQUFDTixHQUFHLENBQUNHLElBQUksQ0FBQ0ksSUFBSSxFQUFFUCxHQUFHLENBQUNHLElBQUksQ0FBQ0ksSUFBSSxHQUFHUCxHQUFHLENBQUNPLElBQUksQ0FBQ0MsRUFBRTtFQUMvQ04sSUFBSSxDQUFDLENBQUM7QUFDUixDQUFDO0FBRURKLE9BQU8sQ0FBQ1csU0FBUyxHQUFHWixPQUFPLENBQUNhLE1BQU0sQ0FBQ2YsTUFBTSxDQUFDO0FBQzFDRyxPQUFPLENBQUNhLGFBQWEsR0FBR2QsT0FBTyxDQUFDZSxNQUFNLENBQUNqQixNQUFNLENBQUM7QUFDOUNHLE9BQU8sQ0FBQ2UsWUFBWSxHQUFHaEIsT0FBTyxDQUFDaUIsU0FBUyxDQUFDbkIsTUFBTSxDQUFDO0FBQ2hERyxPQUFPLENBQUNpQixZQUFZLEdBQUdsQixPQUFPLENBQUNtQixTQUFTLENBQUNyQixNQUFNLENBQUM7QUFDaERHLE9BQU8sQ0FBQ21CLFlBQVksR0FBR3BCLE9BQU8sQ0FBQ3FCLFNBQVMsQ0FBQ3ZCLE1BQU0sQ0FBQzs7QUFFaEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["Review","require","factory","exports","setTourUserIds","req","res","next","body","tour","params","tourId","user","id","getReview","getOne","getAllReviews","getAll","createReview","createOne","deleteReview","deleteOne","updateReview","updateOne"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["reviewController.js"],"sourcesContent":["const Review = require('../models/reviewModel');\nconst factory = require('./handlerFactory');\n\nexports.setTourUserIds = (req, res, next) => {\n  if (!req.body.tour) req.body.tour = req.params.tourId;\n  if (!req.body.user) req.body.user = req.user.id;\n  next();\n};\n\nexports.getReview = factory.getOne(Review);\nexports.getAllReviews = factory.getAll(Review);\nexports.createReview = factory.createOne(Review);\nexports.deleteReview = factory.deleteOne(Review);\nexports.updateReview = factory.updateOne(Review);\n\n// exports.createReview = catchAsync(async (req, res) => {\n//   // Allowing nested routes (if it is NOT specified)\n//   if (!req.body.tour) req.body.tour = req.params.tourId;\n//   if (!req.body.user) req.body.user = req.user.id;\n\n//   const newReview = await Review.create(req.body);\n\n//   res.status(201).json({\n//     status: 'success',\n//     data: {\n//       review: newReview,\n//     },\n//   });\n// });\n\n// exports.getAllReviews = catchAsync(async (req, res) => {\n//   let filter = {};\n//   if (req.params.tourId) filter = { tour: req.params.tourId };\n//   const reviews = await Review.find(filter);\n\n//   res.status(200).json({\n//     status: 'success',\n//     results: reviews.length,\n//     data: {\n//       reviews,\n//     },\n//   });\n// });\n"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,uBAAuB,CAAC;AAC/C,IAAMC,OAAO,GAAGD,OAAO,CAAC,kBAAkB,CAAC;AAE3CE,OAAO,CAACC,cAAc,GAAG,UAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;EAC3C,IAAI,CAACF,GAAG,CAACG,IAAI,CAACC,IAAI,EAAEJ,GAAG,CAACG,IAAI,CAACC,IAAI,GAAGJ,GAAG,CAACK,MAAM,CAACC,MAAM;EACrD,IAAI,CAACN,GAAG,CAACG,IAAI,CAACI,IAAI,EAAEP,GAAG,CAACG,IAAI,CAACI,IAAI,GAAGP,GAAG,CAACO,IAAI,CAACC,EAAE;EAC/CN,IAAI,CAAC,CAAC;AACR,CAAC;AAEDJ,OAAO,CAACW,SAAS,GAAGZ,OAAO,CAACa,MAAM,CAACf,MAAM,CAAC;AAC1CG,OAAO,CAACa,aAAa,GAAGd,OAAO,CAACe,MAAM,CAACjB,MAAM,CAAC;AAC9CG,OAAO,CAACe,YAAY,GAAGhB,OAAO,CAACiB,SAAS,CAACnB,MAAM,CAAC;AAChDG,OAAO,CAACiB,YAAY,GAAGlB,OAAO,CAACmB,SAAS,CAACrB,MAAM,CAAC;AAChDG,OAAO,CAACmB,YAAY,GAAGpB,OAAO,CAACqB,SAAS,CAACvB,MAAM,CAAC;;AAEhD;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","ignoreList":[]}},"mtime":1762243430742},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/models/reviewModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\n// review / rating / createdAt / ref to tour / ref to user\n\nvar mongoose = require('mongoose');\nvar Tour = require('./tourModel');\nvar reviewSchema = new mongoose.Schema({\n  review: {\n    type: String,\n    required: [true, 'Review can not be empty!']\n  },\n  rating: {\n    type: Number,\n    min: 1,\n    max: 5\n  },\n  createdAt: {\n    type: Date,\n    \"default\": Date.now()\n  },\n  tour: {\n    type: mongoose.Schema.ObjectId,\n    ref: 'Tour',\n    required: [true, 'Review must belong to a tour']\n  },\n  user: {\n    type: mongoose.Schema.ObjectId,\n    ref: 'User',\n    required: [true, 'Review must belong to a user']\n  }\n}, {\n  toJSON: {\n    virtuals: true\n  },\n  toObject: {\n    virtuals: true\n  }\n});\nreviewSchema.pre(/^find/, function (next) {\n  // this.populate({\n  //   path: 'tour',\n  //   select: 'name',\n  // }).populate({\n  //   path: 'user',\n  //   select: 'name photo',\n  // });\n\n  this.populate({\n    path: 'user',\n    select: 'name photo'\n  });\n  next();\n});\nreviewSchema.statics.calcAverageRatings = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(tourId) {\n    var stats;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          _context.n = 1;\n          return this.aggregate([{\n            $match: {\n              tour: tourId\n            }\n          }, {\n            $group: {\n              _id: '$tour',\n              nRating: {\n                $sum: 1\n              },\n              avgRating: {\n                $avg: '$rating'\n              }\n            }\n          }]);\n        case 1:\n          stats = _context.v;\n          console.log(stats);\n          if (!(stats.lenght > 0)) {\n            _context.n = 3;\n            break;\n          }\n          _context.n = 2;\n          return Tour.findByIdAndUpdate(tourId, {\n            ratingsQuantity: stats[0].nRatings,\n            ratingsAverage: stats[0].avgRating\n          });\n        case 2:\n          _context.n = 4;\n          break;\n        case 3:\n          _context.n = 4;\n          return Tour.findByIdAndUpdate(tourId, {\n            ratingsQuantity: 0,\n            ratingsAverage: 4.5\n          });\n        case 4:\n          return _context.a(2);\n      }\n    }, _callee, this);\n  }));\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nreviewSchema.index({\n  tour: 1,\n  user: 1\n}, {\n  unique: true\n});\nreviewSchema.post('save', function () {\n  // THIS points to a document currently being saved (current review here)\n  this.constructor.calcAverageRatings(this.tour);\n});\nreviewSchema.post(/^findOneAnd/, /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(doc) {\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _context2.n = 1;\n          return doc.constructor.calcAverageRatings(doc.tour);\n        case 1:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nvar Review = mongoose.model('Review', reviewSchema);\nmodule.exports = Review;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIm1vbmdvb3NlIiwicmVxdWlyZSIsIlRvdXIiLCJyZXZpZXdTY2hlbWEiLCJTY2hlbWEiLCJyZXZpZXciLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJyYXRpbmciLCJOdW1iZXIiLCJtaW4iLCJtYXgiLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwidG91ciIsIk9iamVjdElkIiwicmVmIiwidXNlciIsInRvSlNPTiIsInZpcnR1YWxzIiwidG9PYmplY3QiLCJwcmUiLCJuZXh0IiwicG9wdWxhdGUiLCJwYXRoIiwic2VsZWN0Iiwic3RhdGljcyIsImNhbGNBdmVyYWdlUmF0aW5ncyIsIl9yZWYiLCJfY2FsbGVlIiwidG91cklkIiwic3RhdHMiLCJfY29udGV4dCIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsIiRncm91cCIsIl9pZCIsIm5SYXRpbmciLCIkc3VtIiwiYXZnUmF0aW5nIiwiJGF2ZyIsImNvbnNvbGUiLCJsb2ciLCJsZW5naHQiLCJmaW5kQnlJZEFuZFVwZGF0ZSIsInJhdGluZ3NRdWFudGl0eSIsIm5SYXRpbmdzIiwicmF0aW5nc0F2ZXJhZ2UiLCJfeCIsImluZGV4IiwidW5pcXVlIiwicG9zdCIsImNvbnN0cnVjdG9yIiwiX3JlZjIiLCJfY2FsbGVlMiIsImRvYyIsIl9jb250ZXh0MiIsIl94MiIsIlJldmlldyIsIm1vZGVsIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC9tb2RlbHMvIiwic291cmNlcyI6WyJyZXZpZXdNb2RlbC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyByZXZpZXcgLyByYXRpbmcgLyBjcmVhdGVkQXQgLyByZWYgdG8gdG91ciAvIHJlZiB0byB1c2VyXG5cbmNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IFRvdXIgPSByZXF1aXJlKCcuL3RvdXJNb2RlbCcpO1xuXG5jb25zdCByZXZpZXdTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgcmV2aWV3OiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IFt0cnVlLCAnUmV2aWV3IGNhbiBub3QgYmUgZW1wdHkhJ10gfSxcbiAgICByYXRpbmc6IHsgdHlwZTogTnVtYmVyLCBtaW46IDEsIG1heDogNSB9LFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93KCksXG4gICAgfSxcbiAgICB0b3VyOiB7XG4gICAgICB0eXBlOiBtb25nb29zZS5TY2hlbWEuT2JqZWN0SWQsXG4gICAgICByZWY6ICdUb3VyJyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ1JldmlldyBtdXN0IGJlbG9uZyB0byBhIHRvdXInXSxcbiAgICB9LFxuICAgIHVzZXI6IHtcbiAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5PYmplY3RJZCxcbiAgICAgIHJlZjogJ1VzZXInLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnUmV2aWV3IG11c3QgYmVsb25nIHRvIGEgdXNlciddLFxuICAgIH0sXG4gIH0sXG4gIHtcbiAgICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcbiAgICB0b09iamVjdDogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB9LFxuKTtcblxucmV2aWV3U2NoZW1hLnByZSgvXmZpbmQvLCBmdW5jdGlvbiAobmV4dCkge1xuICAvLyB0aGlzLnBvcHVsYXRlKHtcbiAgLy8gICBwYXRoOiAndG91cicsXG4gIC8vICAgc2VsZWN0OiAnbmFtZScsXG4gIC8vIH0pLnBvcHVsYXRlKHtcbiAgLy8gICBwYXRoOiAndXNlcicsXG4gIC8vICAgc2VsZWN0OiAnbmFtZSBwaG90bycsXG4gIC8vIH0pO1xuXG4gIHRoaXMucG9wdWxhdGUoe1xuICAgIHBhdGg6ICd1c2VyJyxcbiAgICBzZWxlY3Q6ICduYW1lIHBob3RvJyxcbiAgfSk7XG5cbiAgbmV4dCgpO1xufSk7XG5cbnJldmlld1NjaGVtYS5zdGF0aWNzLmNhbGNBdmVyYWdlUmF0aW5ncyA9IGFzeW5jIGZ1bmN0aW9uICh0b3VySWQpIHtcbiAgLy8gVEhJUyBwb2ludHMgdG8gYSBjdXJyZW50IG1vZGVsXG5cbiAgY29uc3Qgc3RhdHMgPSBhd2FpdCB0aGlzLmFnZ3JlZ2F0ZShbXG4gICAgeyAkbWF0Y2g6IHsgdG91cjogdG91cklkIH0gfSxcbiAgICB7XG4gICAgICAkZ3JvdXA6IHtcbiAgICAgICAgX2lkOiAnJHRvdXInLFxuICAgICAgICBuUmF0aW5nOiB7ICRzdW06IDEgfSxcbiAgICAgICAgYXZnUmF0aW5nOiB7ICRhdmc6ICckcmF0aW5nJyB9LFxuICAgICAgfSxcbiAgICB9LFxuICBdKTtcblxuICBjb25zb2xlLmxvZyhzdGF0cyk7XG5cbiAgaWYgKHN0YXRzLmxlbmdodCA+IDApIHtcbiAgICBhd2FpdCBUb3VyLmZpbmRCeUlkQW5kVXBkYXRlKHRvdXJJZCwge1xuICAgICAgcmF0aW5nc1F1YW50aXR5OiBzdGF0c1swXS5uUmF0aW5ncyxcbiAgICAgIHJhdGluZ3NBdmVyYWdlOiBzdGF0c1swXS5hdmdSYXRpbmcsXG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgVG91ci5maW5kQnlJZEFuZFVwZGF0ZSh0b3VySWQsIHtcbiAgICAgIHJhdGluZ3NRdWFudGl0eTogMCxcbiAgICAgIHJhdGluZ3NBdmVyYWdlOiA0LjUsXG4gICAgfSk7XG4gIH1cbn07XG5cbnJldmlld1NjaGVtYS5pbmRleCh7IHRvdXI6IDEsIHVzZXI6IDEgfSwgeyB1bmlxdWU6IHRydWUgfSk7XG5cbnJldmlld1NjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24gKCkge1xuICAvLyBUSElTIHBvaW50cyB0byBhIGRvY3VtZW50IGN1cnJlbnRseSBiZWluZyBzYXZlZCAoY3VycmVudCByZXZpZXcgaGVyZSlcbiAgdGhpcy5jb25zdHJ1Y3Rvci5jYWxjQXZlcmFnZVJhdGluZ3ModGhpcy50b3VyKTtcbn0pO1xuXG5yZXZpZXdTY2hlbWEucG9zdCgvXmZpbmRPbmVBbmQvLCBhc3luYyBmdW5jdGlvbiAoZG9jKSB7XG4gIGF3YWl0IGRvYy5jb25zdHJ1Y3Rvci5jYWxjQXZlcmFnZVJhdGluZ3MoZG9jLnRvdXIpO1xufSk7XG5cbmNvbnN0IFJldmlldyA9IG1vbmdvb3NlLm1vZGVsKCdSZXZpZXcnLCByZXZpZXdTY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJldmlldztcbiJdLCJtYXBwaW5ncyI6Ijs7MEJBQ0EsdUtBQUFBLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLHdCQUFBQyxNQUFBLEdBQUFBLE1BQUEsT0FBQUMsQ0FBQSxHQUFBRixDQUFBLENBQUFHLFFBQUEsa0JBQUFDLENBQUEsR0FBQUosQ0FBQSxDQUFBSyxXQUFBLDhCQUFBQyxFQUFBTixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxF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Q0FBQXBGLENBQUE7VUFBQTtRQUFBO1VBQUFvRixRQUFBLENBQUFwRixDQUFBO1VBQUEsT0FFSW9ELElBQUksQ0FBQzRDLGlCQUFpQixDQUFDZCxNQUFNLEVBQUU7WUFDbkNlLGVBQWUsRUFBRSxDQUFDO1lBQ2xCRSxjQUFjLEVBQUU7VUFDbEIsQ0FBQyxDQUFDO1FBQUE7VUFBQSxPQUFBZixRQUFBLENBQUFuRSxDQUFBO01BQUE7SUFBQSxHQUFBZ0UsT0FBQTtFQUFBLENBRUw7RUFBQSxpQkFBQW1CLEVBQUE7SUFBQSxPQUFBcEIsSUFBQSxDQUFBakMsS0FBQSxPQUFBRCxTQUFBO0VBQUE7QUFBQTtBQUVETyxZQUFZLENBQUNnRCxLQUFLLENBQUM7RUFBRW5DLElBQUksRUFBRSxDQUFDO0VBQUVHLElBQUksRUFBRTtBQUFFLENBQUMsRUFBRTtFQUFFaUMsTUFBTSxFQUFFO0FBQUssQ0FBQyxDQUFDO0FBRTFEakQsWUFBWSxDQUFDa0QsSUFBSSxDQUFDLE1BQU0sRUFBRSxZQUFZO0VBQ3BDO0VBQ0EsSUFBSSxDQUFDQyxXQUFXLENBQUN6QixrQkFBa0IsQ0FBQyxJQUFJLENBQUNiLElBQUksQ0FBQztBQUNoRCxDQUFDLENBQUM7QUFFRmIsWUFBWSxDQUFDa0QsSUFBSSxDQUFDLGFBQWE7RUFBQSxJQUFBRSxLQUFBLEdBQUE1RCxpQkFBQSxjQUFBYixZQUFBLEdBQUFFLENBQUEsQ0FBRSxTQUFBd0UsU0FBZ0JDLEdBQUc7SUFBQSxPQUFBM0UsWUFBQSxHQUFBQyxDQUFBLFdBQUEyRSxTQUFBO01BQUEsa0JBQUFBLFNBQUEsQ0FBQTVHLENBQUE7UUFBQTtVQUFBNEcsU0FBQSxDQUFBNUcsQ0FBQTtVQUFBLE9BQzVDMkcsR0FBRyxDQUFDSCxXQUFXLENBQUN6QixrQkFBa0IsQ0FBQzRCLEdBQUcsQ0FBQ3pDLElBQUksQ0FBQztRQUFBO1VBQUEsT0FBQTBDLFNBQUEsQ0FBQTNGLENBQUE7TUFBQTtJQUFBLEdBQUF5RixRQUFBO0VBQUEsQ0FDbkQ7RUFBQSxpQkFBQUcsR0FBQTtJQUFBLE9BQUFKLEtBQUEsQ0FBQTFELEtBQUEsT0FBQUQsU0FBQTtFQUFBO0FBQUEsSUFBQztBQUVGLElBQU1nRSxNQUFNLEdBQUc1RCxRQUFRLENBQUM2RCxLQUFLLENBQUMsUUFBUSxFQUFFMUQsWUFBWSxDQUFDO0FBRXJEMkQsTUFBTSxDQUFDQyxPQUFPLEdBQUdILE1BQU0iLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","mongoose","require","Tour","reviewSchema","Schema","review","type","String","required","rating","Number","min","max","createdAt","Date","now","tour","ObjectId","ref","user","toJSON","virtuals","toObject","pre","next","populate","path","select","statics","calcAverageRatings","_ref","_callee","tourId","stats","_context","aggregate","$match","$group","_id","nRating","$sum","avgRating","$avg","console","log","lenght","findByIdAndUpdate","ratingsQuantity","nRatings","ratingsAverage","_x","index","unique","post","constructor","_ref2","_callee2","doc","_context2","_x2","Review","model","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/models/","sources":["reviewModel.js"],"sourcesContent":["// review / rating / createdAt / ref to tour / ref to user\n\nconst mongoose = require('mongoose');\nconst Tour = require('./tourModel');\n\nconst reviewSchema = new mongoose.Schema(\n  {\n    review: { type: String, required: [true, 'Review can not be empty!'] },\n    rating: { type: Number, min: 1, max: 5 },\n    createdAt: {\n      type: Date,\n      default: Date.now(),\n    },\n    tour: {\n      type: mongoose.Schema.ObjectId,\n      ref: 'Tour',\n      required: [true, 'Review must belong to a tour'],\n    },\n    user: {\n      type: mongoose.Schema.ObjectId,\n      ref: 'User',\n      required: [true, 'Review must belong to a user'],\n    },\n  },\n  {\n    toJSON: { virtuals: true },\n    toObject: { virtuals: true },\n  },\n);\n\nreviewSchema.pre(/^find/, function (next) {\n  // this.populate({\n  //   path: 'tour',\n  //   select: 'name',\n  // }).populate({\n  //   path: 'user',\n  //   select: 'name photo',\n  // });\n\n  this.populate({\n    path: 'user',\n    select: 'name photo',\n  });\n\n  next();\n});\n\nreviewSchema.statics.calcAverageRatings = async function (tourId) {\n  // THIS points to a current model\n\n  const stats = await this.aggregate([\n    { $match: { tour: tourId } },\n    {\n      $group: {\n        _id: '$tour',\n        nRating: { $sum: 1 },\n        avgRating: { $avg: '$rating' },\n      },\n    },\n  ]);\n\n  console.log(stats);\n\n  if (stats.lenght > 0) {\n    await Tour.findByIdAndUpdate(tourId, {\n      ratingsQuantity: stats[0].nRatings,\n      ratingsAverage: stats[0].avgRating,\n    });\n  } else {\n    await Tour.findByIdAndUpdate(tourId, {\n      ratingsQuantity: 0,\n      ratingsAverage: 4.5,\n    });\n  }\n};\n\nreviewSchema.index({ tour: 1, user: 1 }, { unique: true });\n\nreviewSchema.post('save', function () {\n  // THIS points to a document currently being saved (current review here)\n  this.constructor.calcAverageRatings(this.tour);\n});\n\nreviewSchema.post(/^findOneAnd/, async function (doc) {\n  await doc.constructor.calcAverageRatings(doc.tour);\n});\n\nconst Review = mongoose.model('Review', reviewSchema);\n\nmodule.exports = Review;\n"],"mappings":"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","ignoreList":[]}},"mtime":1762243430753},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/upload.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar multer = require('multer');\nvar cloudinary = require('cloudinary').v2;\nvar _require = require('multer-storage-cloudinary'),\n  CloudinaryStorage = _require.CloudinaryStorage;\n\n// Configuration\ncloudinary.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET\n});\n\n// 1. Storage for USERS (Profile Picture)\nvar userStorage = new CloudinaryStorage({\n  cloudinary: cloudinary,\n  params: {\n    folder: 'natours-users',\n    allowed_formats: ['jpeg', 'png', 'jpg']\n  }\n});\n// 2. Storage for TOURS (Cover Image + Gallery Images)\nvar tourStorage = new CloudinaryStorage({\n  cloudinary: cloudinary,\n  params: {\n    folder: 'natours-tours',\n    // A dedicated folder for tours\n    allowed_formats: ['jpeg', 'png', 'jpg']\n  }\n});\n\n// Multer instance for User Profile Photos (Single file)\nexports.uploadUserPhoto = multer({\n  storage: userStorage\n});\n\n// Multer instance for Tour Photos (Multiple files)\nexports.uploadTourImages = multer({\n  storage: tourStorage\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtdWx0ZXIiLCJyZXF1aXJlIiwiY2xvdWRpbmFyeSIsInYyIiwiX3JlcXVpcmUiLCJDbG91ZGluYXJ5U3RvcmFnZSIsImNvbmZpZyIsImNsb3VkX25hbWUiLCJwcm9jZXNzIiwiZW52IiwiQ0xPVURJTkFSWV9DTE9VRF9OQU1FIiwiYXBpX2tleSIsIkNMT1VESU5BUllfQVBJX0tFWSIsImFwaV9zZWNyZXQiLCJDTE9VRElOQVJZX0FQSV9TRUNSRVQiLCJ1c2VyU3RvcmFnZSIsInBhcmFtcyIsImZvbGRlciIsImFsbG93ZWRfZm9ybWF0cyIsInRvdXJTdG9yYWdlIiwiZXhwb3J0cyIsInVwbG9hZFVzZXJQaG90byIsInN0b3JhZ2UiLCJ1cGxvYWRUb3VySW1hZ2VzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL3V0aWxzLyIsInNvdXJjZXMiOlsidXBsb2FkLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG11bHRlciA9IHJlcXVpcmUoJ211bHRlcicpO1xuY29uc3QgY2xvdWRpbmFyeSA9IHJlcXVpcmUoJ2Nsb3VkaW5hcnknKS52MjtcbmNvbnN0IHsgQ2xvdWRpbmFyeVN0b3JhZ2UgfSA9IHJlcXVpcmUoJ211bHRlci1zdG9yYWdlLWNsb3VkaW5hcnknKTtcblxuLy8gQ29uZmlndXJhdGlvblxuY2xvdWRpbmFyeS5jb25maWcoe1xuICBjbG91ZF9uYW1lOiBwcm9jZXNzLmVudi5DTE9VRElOQVJZX0NMT1VEX05BTUUsXG4gIGFwaV9rZXk6IHByb2Nlc3MuZW52LkNMT1VESU5BUllfQVBJX0tFWSxcbiAgYXBpX3NlY3JldDogcHJvY2Vzcy5lbnYuQ0xPVURJTkFSWV9BUElfU0VDUkVULFxufSk7XG5cbi8vIDEuIFN0b3JhZ2UgZm9yIFVTRVJTIChQcm9maWxlIFBpY3R1cmUpXG5jb25zdCB1c2VyU3RvcmFnZSA9IG5ldyBDbG91ZGluYXJ5U3RvcmFnZSh7XG4gIGNsb3VkaW5hcnk6IGNsb3VkaW5hcnksXG4gIHBhcmFtczoge1xuICAgIGZvbGRlcjogJ25hdG91cnMtdXNlcnMnLFxuICAgIGFsbG93ZWRfZm9ybWF0czogWydqcGVnJywgJ3BuZycsICdqcGcnXSxcbiAgfSxcbn0pO1xuLy8gMi4gU3RvcmFnZSBmb3IgVE9VUlMgKENvdmVyIEltYWdlICsgR2FsbGVyeSBJbWFnZXMpXG5jb25zdCB0b3VyU3RvcmFnZSA9IG5ldyBDbG91ZGluYXJ5U3RvcmFnZSh7XG4gIGNsb3VkaW5hcnk6IGNsb3VkaW5hcnksXG4gIHBhcmFtczoge1xuICAgIGZvbGRlcjogJ25hdG91cnMtdG91cnMnLCAvLyBBIGRlZGljYXRlZCBmb2xkZXIgZm9yIHRvdXJzXG4gICAgYWxsb3dlZF9mb3JtYXRzOiBbJ2pwZWcnLCAncG5nJywgJ2pwZyddLFxuICB9LFxufSk7XG5cbi8vIE11bHRlciBpbnN0YW5jZSBmb3IgVXNlciBQcm9maWxlIFBob3RvcyAoU2luZ2xlIGZpbGUpXG5leHBvcnRzLnVwbG9hZFVzZXJQaG90byA9IG11bHRlcih7XG4gIHN0b3JhZ2U6IHVzZXJTdG9yYWdlLFxufSk7XG5cbi8vIE11bHRlciBpbnN0YW5jZSBmb3IgVG91ciBQaG90b3MgKE11bHRpcGxlIGZpbGVzKVxuZXhwb3J0cy51cGxvYWRUb3VySW1hZ2VzID0gbXVsdGVyKHtcbiAgc3RvcmFnZTogdG91clN0b3JhZ2UsXG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFDaEMsSUFBTUMsVUFBVSxHQUFHRCxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUNFLEVBQUU7QUFDM0MsSUFBQUMsUUFBQSxHQUE4QkgsT0FBTyxDQUFDLDJCQUEyQixDQUFDO0VBQTFESSxpQkFBaUIsR0FBQUQsUUFBQSxDQUFqQkMsaUJBQWlCOztBQUV6QjtBQUNBSCxVQUFVLENBQUNJLE1BQU0sQ0FBQztFQUNoQkMsVUFBVSxFQUFFQyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MscUJBQXFCO0VBQzdDQyxPQUFPLEVBQUVILE9BQU8sQ0FBQ0MsR0FBRyxDQUFDRyxrQkFBa0I7RUFDdkNDLFVBQVUsRUFBRUwsT0FBTyxDQUFDQyxHQUFHLENBQUNLO0FBQzFCLENBQUMsQ0FBQzs7QUFFRjtBQUNBLElBQU1DLFdBQVcsR0FBRyxJQUFJVixpQkFBaUIsQ0FBQztFQUN4Q0gsVUFBVSxFQUFFQSxVQUFVO0VBQ3RCYyxNQUFNLEVBQUU7SUFDTkMsTUFBTSxFQUFFLGVBQWU7SUFDdkJDLGVBQWUsRUFBRSxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsS0FBSztFQUN4QztBQUNGLENBQUMsQ0FBQztBQUNGO0FBQ0EsSUFBTUMsV0FBVyxHQUFHLElBQUlkLGlCQUFpQixDQUFDO0VBQ3hDSCxVQUFVLEVBQUVBLFVBQVU7RUFDdEJjLE1BQU0sRUFBRTtJQUNOQyxNQUFNLEVBQUUsZUFBZTtJQUFFO0lBQ3pCQyxlQUFlLEVBQUUsQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLEtBQUs7RUFDeEM7QUFDRixDQUFDLENBQUM7O0FBRUY7QUFDQUUsT0FBTyxDQUFDQyxlQUFlLEdBQUdyQixNQUFNLENBQUM7RUFDL0JzQixPQUFPLEVBQUVQO0FBQ1gsQ0FBQyxDQUFDOztBQUVGO0FBQ0FLLE9BQU8sQ0FBQ0csZ0JBQWdCLEdBQUd2QixNQUFNLENBQUM7RUFDaENzQixPQUFPLEVBQUVIO0FBQ1gsQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["multer","require","cloudinary","v2","_require","CloudinaryStorage","config","cloud_name","process","env","CLOUDINARY_CLOUD_NAME","api_key","CLOUDINARY_API_KEY","api_secret","CLOUDINARY_API_SECRET","userStorage","params","folder","allowed_formats","tourStorage","exports","uploadUserPhoto","storage","uploadTourImages"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["upload.js"],"sourcesContent":["const multer = require('multer');\nconst cloudinary = require('cloudinary').v2;\nconst { CloudinaryStorage } = require('multer-storage-cloudinary');\n\n// Configuration\ncloudinary.config({\n  cloud_name: process.env.CLOUDINARY_CLOUD_NAME,\n  api_key: process.env.CLOUDINARY_API_KEY,\n  api_secret: process.env.CLOUDINARY_API_SECRET,\n});\n\n// 1. Storage for USERS (Profile Picture)\nconst userStorage = new CloudinaryStorage({\n  cloudinary: cloudinary,\n  params: {\n    folder: 'natours-users',\n    allowed_formats: ['jpeg', 'png', 'jpg'],\n  },\n});\n// 2. Storage for TOURS (Cover Image + Gallery Images)\nconst tourStorage = new CloudinaryStorage({\n  cloudinary: cloudinary,\n  params: {\n    folder: 'natours-tours', // A dedicated folder for tours\n    allowed_formats: ['jpeg', 'png', 'jpg'],\n  },\n});\n\n// Multer instance for User Profile Photos (Single file)\nexports.uploadUserPhoto = multer({\n  storage: userStorage,\n});\n\n// Multer instance for Tour Photos (Multiple files)\nexports.uploadTourImages = multer({\n  storage: tourStorage,\n});\n"],"mappings":";;AAAA,IAAMA,MAAM,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAChC,IAAMC,UAAU,GAAGD,OAAO,CAAC,YAAY,CAAC,CAACE,EAAE;AAC3C,IAAAC,QAAA,GAA8BH,OAAO,CAAC,2BAA2B,CAAC;EAA1DI,iBAAiB,GAAAD,QAAA,CAAjBC,iBAAiB;;AAEzB;AACAH,UAAU,CAACI,MAAM,CAAC;EAChBC,UAAU,EAAEC,OAAO,CAACC,GAAG,CAACC,qBAAqB;EAC7CC,OAAO,EAAEH,OAAO,CAACC,GAAG,CAACG,kBAAkB;EACvCC,UAAU,EAAEL,OAAO,CAACC,GAAG,CAACK;AAC1B,CAAC,CAAC;;AAEF;AACA,IAAMC,WAAW,GAAG,IAAIV,iBAAiB,CAAC;EACxCH,UAAU,EAAEA,UAAU;EACtBc,MAAM,EAAE;IACNC,MAAM,EAAE,eAAe;IACvBC,eAAe,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK;EACxC;AACF,CAAC,CAAC;AACF;AACA,IAAMC,WAAW,GAAG,IAAId,iBAAiB,CAAC;EACxCH,UAAU,EAAEA,UAAU;EACtBc,MAAM,EAAE;IACNC,MAAM,EAAE,eAAe;IAAE;IACzBC,eAAe,EAAE,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK;EACxC;AACF,CAAC,CAAC;;AAEF;AACAE,OAAO,CAACC,eAAe,GAAGrB,MAAM,CAAC;EAC/BsB,OAAO,EAAEP;AACX,CAAC,CAAC;;AAEF;AACAK,OAAO,CAACG,gBAAgB,GAAGvB,MAAM,CAAC;EAChCsB,OAAO,EAAEH;AACX,CAAC,CAAC","ignoreList":[]}},"mtime":1765344507470},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/routes/userRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar express = require('express');\nvar userController = require('../controllers/userController');\nvar authController = require('../controllers/authController');\nvar _require = require('../utils/upload'),\n  uploadUserPhoto = _require.uploadUserPhoto;\nvar router = express.Router();\nrouter.post('/signup', authController.signup);\nrouter.post('/login', authController.login);\nrouter.get('/logout', authController.logout);\nrouter.post('/forgotPassword', authController.forgotPassword);\nrouter.patch('/resetPassword/:token', authController.resetPassword);\n\n// I GOT RID OF PROTECTED ROUTES FOR A MOMENT THERE!!!! I'll need to figure out how to work with protected\n// data in front part of the app\n\n// Mounting protect middleware to protect ALL routes that comes after it\nrouter.use(authController.protect);\nrouter.patch('/updateMyPassword', authController.updatePassword);\nrouter.get('/me', userController.getMe, userController.getUser);\nrouter.patch('/updateMe', uploadUserPhoto.single('photo'), userController.updateMe);\nrouter[\"delete\"]('/deleteMe', userController.deleteMe);\n\n// router.use(authController.restrictTo('admin'));\n\nrouter.route('/').get(userController.getAllUsers);\nrouter.route('/:id').get(userController.getUser).patch(userController.updateUser)[\"delete\"](userController.deleteUser);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInVzZXJDb250cm9sbGVyIiwiYXV0aENvbnRyb2xsZXIiLCJfcmVxdWlyZSIsInVwbG9hZFVzZXJQaG90byIsInJvdXRlciIsIlJvdXRlciIsInBvc3QiLCJzaWdudXAiLCJsb2dpbiIsImdldCIsImxvZ291dCIsImZvcmdvdFBhc3N3b3JkIiwicGF0Y2giLCJyZXNldFBhc3N3b3JkIiwidXNlIiwicHJvdGVjdCIsInVwZGF0ZVBhc3N3b3JkIiwiZ2V0TWUiLCJnZXRVc2VyIiwic2luZ2xlIiwidXBkYXRlTWUiLCJkZWxldGVNZSIsInJvdXRlIiwiZ2V0QWxsVXNlcnMiLCJ1cGRhdGVVc2VyIiwiZGVsZXRlVXNlciIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvcm91dGVzLyIsInNvdXJjZXMiOlsidXNlclJvdXRlcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBleHByZXNzID0gcmVxdWlyZSgnZXhwcmVzcycpO1xuY29uc3QgdXNlckNvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy91c2VyQ29udHJvbGxlcicpO1xuY29uc3QgYXV0aENvbnRyb2xsZXIgPSByZXF1aXJlKCcuLi9jb250cm9sbGVycy9hdXRoQ29udHJvbGxlcicpO1xuY29uc3QgeyB1cGxvYWRVc2VyUGhvdG8gfSA9IHJlcXVpcmUoJy4uL3V0aWxzL3VwbG9hZCcpO1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG5yb3V0ZXIucG9zdCgnL3NpZ251cCcsIGF1dGhDb250cm9sbGVyLnNpZ251cCk7XG5yb3V0ZXIucG9zdCgnL2xvZ2luJywgYXV0aENvbnRyb2xsZXIubG9naW4pO1xucm91dGVyLmdldCgnL2xvZ291dCcsIGF1dGhDb250cm9sbGVyLmxvZ291dCk7XG5yb3V0ZXIucG9zdCgnL2ZvcmdvdFBhc3N3b3JkJywgYXV0aENvbnRyb2xsZXIuZm9yZ290UGFzc3dvcmQpO1xucm91dGVyLnBhdGNoKCcvcmVzZXRQYXNzd29yZC86dG9rZW4nLCBhdXRoQ29udHJvbGxlci5yZXNldFBhc3N3b3JkKTtcblxuLy8gSSBHT1QgUklEIE9GIFBST1RFQ1RFRCBST1VURVMgRk9SIEEgTU9NRU5UIFRIRVJFISEhISBJJ2xsIG5lZWQgdG8gZmlndXJlIG91dCBob3cgdG8gd29yayB3aXRoIHByb3RlY3RlZFxuLy8gZGF0YSBpbiBmcm9udCBwYXJ0IG9mIHRoZSBhcHBcblxuLy8gTW91bnRpbmcgcHJvdGVjdCBtaWRkbGV3YXJlIHRvIHByb3RlY3QgQUxMIHJvdXRlcyB0aGF0IGNvbWVzIGFmdGVyIGl0XG5yb3V0ZXIudXNlKGF1dGhDb250cm9sbGVyLnByb3RlY3QpO1xuXG5yb3V0ZXIucGF0Y2goXG4gICcvdXBkYXRlTXlQYXNzd29yZCcsXG5cbiAgYXV0aENvbnRyb2xsZXIudXBkYXRlUGFzc3dvcmQsXG4pO1xuXG5yb3V0ZXIuZ2V0KFxuICAnL21lJyxcblxuICB1c2VyQ29udHJvbGxlci5nZXRNZSxcbiAgdXNlckNvbnRyb2xsZXIuZ2V0VXNlcixcbik7XG5yb3V0ZXIucGF0Y2goXG4gICcvdXBkYXRlTWUnLFxuICB1cGxvYWRVc2VyUGhvdG8uc2luZ2xlKCdwaG90bycpLFxuICB1c2VyQ29udHJvbGxlci51cGRhdGVNZSxcbik7XG5yb3V0ZXIuZGVsZXRlKCcvZGVsZXRlTWUnLCB1c2VyQ29udHJvbGxlci5kZWxldGVNZSk7XG5cbi8vIHJvdXRlci51c2UoYXV0aENvbnRyb2xsZXIucmVzdHJpY3RUbygnYWRtaW4nKSk7XG5cbnJvdXRlci5yb3V0ZSgnLycpLmdldCh1c2VyQ29udHJvbGxlci5nZXRBbGxVc2Vycyk7XG5yb3V0ZXJcbiAgLnJvdXRlKCcvOmlkJylcbiAgLmdldCh1c2VyQ29udHJvbGxlci5nZXRVc2VyKVxuICAucGF0Y2godXNlckNvbnRyb2xsZXIudXBkYXRlVXNlcilcbiAgLmRlbGV0ZSh1c2VyQ29udHJvbGxlci5kZWxldGVVc2VyKTtcblxubW9kdWxlLmV4cG9ydHMgPSByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsT0FBTyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2xDLElBQU1DLGNBQWMsR0FBR0QsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQy9ELElBQU1FLGNBQWMsR0FBR0YsT0FBTyxDQUFDLCtCQUErQixDQUFDO0FBQy9ELElBQUFHLFFBQUEsR0FBNEJILE9BQU8sQ0FBQyxpQkFBaUIsQ0FBQztFQUE5Q0ksZUFBZSxHQUFBRCxRQUFBLENBQWZDLGVBQWU7QUFFdkIsSUFBTUMsTUFBTSxHQUFHTixPQUFPLENBQUNPLE1BQU0sQ0FBQyxDQUFDO0FBRS9CRCxNQUFNLENBQUNFLElBQUksQ0FBQyxTQUFTLEVBQUVMLGNBQWMsQ0FBQ00sTUFBTSxDQUFDO0FBQzdDSCxNQUFNLENBQUNFLElBQUksQ0FBQyxRQUFRLEVBQUVMLGNBQWMsQ0FBQ08sS0FBSyxDQUFDO0FBQzNDSixNQUFNLENBQUNLLEdBQUcsQ0FBQyxTQUFTLEVBQUVSLGNBQWMsQ0FBQ1MsTUFBTSxDQUFDO0FBQzVDTixNQUFNLENBQUNFLElBQUksQ0FBQyxpQkFBaUIsRUFBRUwsY0FBYyxDQUFDVSxjQUFjLENBQUM7QUFDN0RQLE1BQU0sQ0FBQ1EsS0FBSyxDQUFDLHVCQUF1QixFQUFFWCxjQUFjLENBQUNZLGFBQWEsQ0FBQzs7QUFFbkU7QUFDQTs7QUFFQTtBQUNBVCxNQUFNLENBQUNVLEdBQUcsQ0FBQ2IsY0FBYyxDQUFDYyxPQUFPLENBQUM7QUFFbENYLE1BQU0sQ0FBQ1EsS0FBSyxDQUNWLG1CQUFtQixFQUVuQlgsY0FBYyxDQUFDZSxjQUNqQixDQUFDO0FBRURaLE1BQU0sQ0FBQ0ssR0FBRyxDQUNSLEtBQUssRUFFTFQsY0FBYyxDQUFDaUIsS0FBSyxFQUNwQmpCLGNBQWMsQ0FBQ2tCLE9BQ2pCLENBQUM7QUFDRGQsTUFBTSxDQUFDUSxLQUFLLENBQ1YsV0FBVyxFQUNYVCxlQUFlLENBQUNnQixNQUFNLENBQUMsT0FBTyxDQUFDLEVBQy9CbkIsY0FBYyxDQUFDb0IsUUFDakIsQ0FBQztBQUNEaEIsTUFBTSxVQUFPLENBQUMsV0FBVyxFQUFFSixjQUFjLENBQUNxQixRQUFRLENBQUM7O0FBRW5EOztBQUVBakIsTUFBTSxDQUFDa0IsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDYixHQUFHLENBQUNULGNBQWMsQ0FBQ3VCLFdBQVcsQ0FBQztBQUNqRG5CLE1BQU0sQ0FDSGtCLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FDYmIsR0FBRyxDQUFDVCxjQUFjLENBQUNrQixPQUFPLENBQUMsQ0FDM0JOLEtBQUssQ0FBQ1osY0FBYyxDQUFDd0IsVUFBVSxDQUFDLFVBQzFCLENBQUN4QixjQUFjLENBQUN5QixVQUFVLENBQUM7QUFFcENDLE1BQU0sQ0FBQ0MsT0FBTyxHQUFHdkIsTUFBTSIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["express","require","userController","authController","_require","uploadUserPhoto","router","Router","post","signup","login","get","logout","forgotPassword","patch","resetPassword","use","protect","updatePassword","getMe","getUser","single","updateMe","deleteMe","route","getAllUsers","updateUser","deleteUser","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/routes/","sources":["userRoutes.js"],"sourcesContent":["const express = require('express');\nconst userController = require('../controllers/userController');\nconst authController = require('../controllers/authController');\nconst { uploadUserPhoto } = require('../utils/upload');\n\nconst router = express.Router();\n\nrouter.post('/signup', authController.signup);\nrouter.post('/login', authController.login);\nrouter.get('/logout', authController.logout);\nrouter.post('/forgotPassword', authController.forgotPassword);\nrouter.patch('/resetPassword/:token', authController.resetPassword);\n\n// I GOT RID OF PROTECTED ROUTES FOR A MOMENT THERE!!!! I'll need to figure out how to work with protected\n// data in front part of the app\n\n// Mounting protect middleware to protect ALL routes that comes after it\nrouter.use(authController.protect);\n\nrouter.patch(\n  '/updateMyPassword',\n\n  authController.updatePassword,\n);\n\nrouter.get(\n  '/me',\n\n  userController.getMe,\n  userController.getUser,\n);\nrouter.patch(\n  '/updateMe',\n  uploadUserPhoto.single('photo'),\n  userController.updateMe,\n);\nrouter.delete('/deleteMe', userController.deleteMe);\n\n// router.use(authController.restrictTo('admin'));\n\nrouter.route('/').get(userController.getAllUsers);\nrouter\n  .route('/:id')\n  .get(userController.getUser)\n  .patch(userController.updateUser)\n  .delete(userController.deleteUser);\n\nmodule.exports = router;\n"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMC,cAAc,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AAC/D,IAAME,cAAc,GAAGF,OAAO,CAAC,+BAA+B,CAAC;AAC/D,IAAAG,QAAA,GAA4BH,OAAO,CAAC,iBAAiB,CAAC;EAA9CI,eAAe,GAAAD,QAAA,CAAfC,eAAe;AAEvB,IAAMC,MAAM,GAAGN,OAAO,CAACO,MAAM,CAAC,CAAC;AAE/BD,MAAM,CAACE,IAAI,CAAC,SAAS,EAAEL,cAAc,CAACM,MAAM,CAAC;AAC7CH,MAAM,CAACE,IAAI,CAAC,QAAQ,EAAEL,cAAc,CAACO,KAAK,CAAC;AAC3CJ,MAAM,CAACK,GAAG,CAAC,SAAS,EAAER,cAAc,CAACS,MAAM,CAAC;AAC5CN,MAAM,CAACE,IAAI,CAAC,iBAAiB,EAAEL,cAAc,CAACU,cAAc,CAAC;AAC7DP,MAAM,CAACQ,KAAK,CAAC,uBAAuB,EAAEX,cAAc,CAACY,aAAa,CAAC;;AAEnE;AACA;;AAEA;AACAT,MAAM,CAACU,GAAG,CAACb,cAAc,CAACc,OAAO,CAAC;AAElCX,MAAM,CAACQ,KAAK,CACV,mBAAmB,EAEnBX,cAAc,CAACe,cACjB,CAAC;AAEDZ,MAAM,CAACK,GAAG,CACR,KAAK,EAELT,cAAc,CAACiB,KAAK,EACpBjB,cAAc,CAACkB,OACjB,CAAC;AACDd,MAAM,CAACQ,KAAK,CACV,WAAW,EACXT,eAAe,CAACgB,MAAM,CAAC,OAAO,CAAC,EAC/BnB,cAAc,CAACoB,QACjB,CAAC;AACDhB,MAAM,UAAO,CAAC,WAAW,EAAEJ,cAAc,CAACqB,QAAQ,CAAC;;AAEnD;;AAEAjB,MAAM,CAACkB,KAAK,CAAC,GAAG,CAAC,CAACb,GAAG,CAACT,cAAc,CAACuB,WAAW,CAAC;AACjDnB,MAAM,CACHkB,KAAK,CAAC,MAAM,CAAC,CACbb,GAAG,CAACT,cAAc,CAACkB,OAAO,CAAC,CAC3BN,KAAK,CAACZ,cAAc,CAACwB,UAAU,CAAC,UAC1B,CAACxB,cAAc,CAACyB,UAAU,CAAC;AAEpCC,MAAM,CAACC,OAAO,GAAGvB,MAAM","ignoreList":[]}},"mtime":1765344332545},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/userController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar User = require('../models/userModel');\nvar appError = require('../utils/appError');\nvar catchAsync = require('../utils/catchAsync');\nvar factory = require('./handlerFactory');\nvar filterObj = function filterObj(obj) {\n  for (var _len = arguments.length, allowedFields = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    allowedFields[_key - 1] = arguments[_key];\n  }\n  var newObj = {};\n  Object.keys(obj).forEach(function (el) {\n    if (allowedFields.includes(el)) {\n      newObj[el] = obj[el];\n    }\n  });\n  return newObj;\n};\nexports.getMe = function (req, res, next) {\n  console.log(req.params);\n  req.params.id = req.user.id;\n  next();\n};\nexports.updateMe = catchAsync(/*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next) {\n    var filteredBody, updatedUser;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          if (!(req.body.password || req.body.passwordConfirm)) {\n            _context.n = 1;\n            break;\n          }\n          return _context.a(2, next(new appError('This route is not for password updates, please use updateMyPassword', 400)));\n        case 1:\n          // 2) Filtered out unwanted fields names that are NOT allowed to be updated\n          filteredBody = filterObj(req.body, 'name', 'email');\n          if (req.file) {\n            console.log(req.file.path);\n            filteredBody.photo = req.file.path;\n          }\n\n          // 3) Update user document\n          _context.n = 2;\n          return User.findByIdAndUpdate(req.user.id, filteredBody, {\n            \"new\": true,\n            runValidators: true\n          });\n        case 2:\n          updatedUser = _context.v;\n          res.status(200).json({\n            status: 'success',\n            data: {\n              user: updatedUser\n            }\n          });\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nexports.deleteMe = catchAsync(/*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res) {\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _context2.n = 1;\n          return User.findByIdAndUpdate(req.user.id, {\n            active: false\n          });\n        case 1:\n          res.status(204).json({\n            status: 'success',\n            data: null\n          });\n        case 2:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexports.getUser = factory.getOne(User);\nexports.getAllUsers = factory.getAll(User);\nexports.updateUser = factory.updateOne(User);\nexports.deleteUser = factory.deleteOne(User);\n\n// exports.getAllUsers = catchAsync(async (req, res) => {\n//   const users = await User.find();\n\n//   res.status(200).json({\n//     status: 'success',\n//     results: users.length,\n//     data: {\n//       users,\n//     },\n//   });\n// });\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIlVzZXIiLCJyZXF1aXJlIiwiYXBwRXJyb3IiLCJjYXRjaEFzeW5jIiwiZmFjdG9yeSIsImZpbHRlck9iaiIsIm9iaiIsIl9sZW4iLCJhbGxvd2VkRmllbGRzIiwiQXJyYXkiLCJfa2V5IiwibmV3T2JqIiwia2V5cyIsImZvckVhY2giLCJlbCIsImluY2x1ZGVzIiwiZXhwb3J0cyIsImdldE1lIiwicmVxIiwicmVzIiwibmV4dCIsImNvbnNvbGUiLCJsb2ciLCJwYXJhbXMiLCJpZCIsInVzZXIiLCJ1cGRhdGVNZSIsIl9yZWYiLCJfY2FsbGVlIiwiZmlsdGVyZWRCb2R5IiwidXBkYXRlZFVzZXIiLCJfY29udGV4dCIsImJvZHkiLCJwYXNzd29yZCIsInBhc3N3b3JkQ29uZmlybSIsImZpbGUiLCJwYXRoIiwicGhvdG8iLCJmaW5kQnlJZEFuZFVwZGF0ZSIsInJ1blZhbGlkYXRvcnMiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsIl94IiwiX3gyIiwiX3gzIiwiZGVsZXRlTWUiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwiYWN0aXZlIiwiX3g0IiwiX3g1IiwiZ2V0VXNlciIsImdldE9uZSIsImdldEFsbFVzZXJzIiwiZ2V0QWxsIiwidXBkYXRlVXNlciIsInVwZGF0ZU9uZSIsImRlbGV0ZVVzZXIiLCJkZWxldGVPbmUiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJ1c2VyQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBVc2VyID0gcmVxdWlyZSgnLi4vbW9kZWxzL3VzZXJNb2RlbCcpO1xuY29uc3QgYXBwRXJyb3IgPSByZXF1aXJlKCcuLi91dGlscy9hcHBFcnJvcicpO1xuY29uc3QgY2F0Y2hBc3luYyA9IHJlcXVpcmUoJy4uL3V0aWxzL2NhdGNoQXN5bmMnKTtcblxuY29uc3QgZmFjdG9yeSA9IHJlcXVpcmUoJy4vaGFuZGxlckZhY3RvcnknKTtcblxuY29uc3QgZmlsdGVyT2JqID0gKG9iaiwgLi4uYWxsb3dlZEZpZWxkcykgPT4ge1xuICBjb25zdCBuZXdPYmogPSB7fTtcbiAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGlmIChhbGxvd2VkRmllbGRzLmluY2x1ZGVzKGVsKSkge1xuICAgICAgbmV3T2JqW2VsXSA9IG9ialtlbF07XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbmV3T2JqO1xufTtcblxuZXhwb3J0cy5nZXRNZSA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zb2xlLmxvZyhyZXEucGFyYW1zKTtcbiAgcmVxLnBhcmFtcy5pZCA9IHJlcS51c2VyLmlkO1xuICBuZXh0KCk7XG59O1xuXG5leHBvcnRzLnVwZGF0ZU1lID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gMSkgQ3JlYXRlIGVycm9yIGlmLiB1c2VyIFBPU1RzIHBhc3N3b3JkIGRhdGFcbiAgaWYgKHJlcS5ib2R5LnBhc3N3b3JkIHx8IHJlcS5ib2R5LnBhc3N3b3JkQ29uZmlybSkge1xuICAgIHJldHVybiBuZXh0KFxuICAgICAgbmV3IGFwcEVycm9yKFxuICAgICAgICAnVGhpcyByb3V0ZSBpcyBub3QgZm9yIHBhc3N3b3JkIHVwZGF0ZXMsIHBsZWFzZSB1c2UgdXBkYXRlTXlQYXNzd29yZCcsXG4gICAgICAgIDQwMCxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuXG4gIC8vIDIpIEZpbHRlcmVkIG91dCB1bndhbnRlZCBmaWVsZHMgbmFtZXMgdGhhdCBhcmUgTk9UIGFsbG93ZWQgdG8gYmUgdXBkYXRlZFxuICBjb25zdCBmaWx0ZXJlZEJvZHkgPSBmaWx0ZXJPYmoocmVxLmJvZHksICduYW1lJywgJ2VtYWlsJyk7XG4gIGlmIChyZXEuZmlsZSkge1xuICAgIGNvbnNvbGUubG9nKHJlcS5maWxlLnBhdGgpO1xuICAgIGZpbHRlcmVkQm9keS5waG90byA9IHJlcS5maWxlLnBhdGg7XG4gIH1cblxuICAvLyAzKSBVcGRhdGUgdXNlciBkb2N1bWVudFxuICBjb25zdCB1cGRhdGVkVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnVzZXIuaWQsIGZpbHRlcmVkQm9keSwge1xuICAgIG5ldzogdHJ1ZSxcbiAgICBydW5WYWxpZGF0b3JzOiB0cnVlLFxuICB9KTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgZGF0YToge1xuICAgICAgdXNlcjogdXBkYXRlZFVzZXIsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5kZWxldGVNZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGF3YWl0IFVzZXIuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnVzZXIuaWQsIHsgYWN0aXZlOiBmYWxzZSB9KTtcblxuICByZXMuc3RhdHVzKDIwNCkuanNvbih7XG4gICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgZGF0YTogbnVsbCxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRVc2VyID0gZmFjdG9yeS5nZXRPbmUoVXNlcik7XG5leHBvcnRzLmdldEFsbFVzZXJzID0gZmFjdG9yeS5nZXRBbGwoVXNlcik7XG5leHBvcnRzLnVwZGF0ZVVzZXIgPSBmYWN0b3J5LnVwZGF0ZU9uZShVc2VyKTtcbmV4cG9ydHMuZGVsZXRlVXNlciA9IGZhY3RvcnkuZGVsZXRlT25lKFVzZXIpO1xuXG4vLyBleHBvcnRzLmdldEFsbFVzZXJzID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMpID0+IHtcbi8vICAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmZpbmQoKTtcblxuLy8gICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4vLyAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4vLyAgICAgcmVzdWx0czogdXNlcnMubGVuZ3RoLFxuLy8gICAgIGRhdGE6IHtcbi8vICAgICAgIHVzZXJzLFxuLy8gICAgIH0sXG4vLyAgIH0pO1xuLy8gfSk7XG4iXSwibWFwcGluZ3MiOiI7OzBCQUNBLHVLQUFBQSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSx3QkFBQUMsTUFBQSxHQUFBQSxNQUFBLE9BQUFDLENBQUEsR0FBQUYsQ0FBQSxDQUFBRyxRQUFBLGtCQUFBQyxDQUFBLEdBQUFKLENBQUEsQ0FBQUssV0FBQSw4QkFBQUMsRUFBQU4sQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBQyxDQUFBLEdBQUFMLENBQUEsSUFBQUEsQ0FBQSxDQUFBTSxTQUFBLFlBQUFDLFNBQUEsR0FBQVAsQ0FBQSxHQUFBTyxTQUFBLEVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLENBQUFMLENBQUEsQ0FBQUMsU0FBQSxVQUFBSyxtQkFB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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","User","require","appError","catchAsync","factory","filterObj","obj","_len","allowedFields","Array","_key","newObj","keys","forEach","el","includes","exports","getMe","req","res","next","console","log","params","id","user","updateMe","_ref","_callee","filteredBody","updatedUser","_context","body","password","passwordConfirm","file","path","photo","findByIdAndUpdate","runValidators","status","json","data","_x","_x2","_x3","deleteMe","_ref2","_callee2","_context2","active","_x4","_x5","getUser","getOne","getAllUsers","getAll","updateUser","updateOne","deleteUser","deleteOne"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["userController.js"],"sourcesContent":["const User = require('../models/userModel');\nconst appError = require('../utils/appError');\nconst catchAsync = require('../utils/catchAsync');\n\nconst factory = require('./handlerFactory');\n\nconst filterObj = (obj, ...allowedFields) => {\n  const newObj = {};\n  Object.keys(obj).forEach((el) => {\n    if (allowedFields.includes(el)) {\n      newObj[el] = obj[el];\n    }\n  });\n\n  return newObj;\n};\n\nexports.getMe = (req, res, next) => {\n  console.log(req.params);\n  req.params.id = req.user.id;\n  next();\n};\n\nexports.updateMe = catchAsync(async (req, res, next) => {\n  // 1) Create error if. user POSTs password data\n  if (req.body.password || req.body.passwordConfirm) {\n    return next(\n      new appError(\n        'This route is not for password updates, please use updateMyPassword',\n        400,\n      ),\n    );\n  }\n\n  // 2) Filtered out unwanted fields names that are NOT allowed to be updated\n  const filteredBody = filterObj(req.body, 'name', 'email');\n  if (req.file) {\n    console.log(req.file.path);\n    filteredBody.photo = req.file.path;\n  }\n\n  // 3) Update user document\n  const updatedUser = await User.findByIdAndUpdate(req.user.id, filteredBody, {\n    new: true,\n    runValidators: true,\n  });\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      user: updatedUser,\n    },\n  });\n});\n\nexports.deleteMe = catchAsync(async (req, res) => {\n  await User.findByIdAndUpdate(req.user.id, { active: false });\n\n  res.status(204).json({\n    status: 'success',\n    data: null,\n  });\n});\n\nexports.getUser = factory.getOne(User);\nexports.getAllUsers = factory.getAll(User);\nexports.updateUser = factory.updateOne(User);\nexports.deleteUser = factory.deleteOne(User);\n\n// exports.getAllUsers = catchAsync(async (req, res) => {\n//   const users = await User.find();\n\n//   res.status(200).json({\n//     status: 'success',\n//     results: users.length,\n//     data: {\n//       users,\n//     },\n//   });\n// });\n"],"mappings":"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","ignoreList":[]}},"mtime":1764939102621},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/routes/tourRoutes.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar express = require('express');\nvar tourController = require('../controllers/tourController');\nvar authController = require('../controllers/authController');\nvar reviewRouter = require('./../routes/reviewRoutes');\nvar _require = require('../utils/upload'),\n  uploadTourImages = _require.uploadTourImages;\n\n/* \ntourController is an object containing all functions that I exported \nfrom a controller therefore all methods must be called on it! \n*/\n\nvar router = express.Router();\n\n// Mounting review router AFTER tours (MAIN) router\nrouter.use('/:tourId/reviews', reviewRouter);\nrouter.route('/top-5-cheap').get(tourController.aliasTopTours, tourController.getAllTours);\nrouter.route('/tour-stats').get(tourController.getTourStats);\nrouter.route('/monthly-plan/:year').get(authController.protect, authController.restrictTo('admin', 'lead-guide', 'guide'), tourController.getMonthlyPlan);\n\n////////////////////////////////////////////////////////////////////////////\nrouter.route('/tours-within/:distance/center/:latlng/unit/:unit').get(tourController.getToursWithin);\n\n// Distance from a certain point to EVERY tour\nrouter.route('/distances/:latlng/unit/:unit').get(tourController.getDistance);\n\n////////////////////////////////////////////////////////////////////////////\n\nrouter.route('/').get(tourController.getAllTours).post(authController.protect, authController.restrictTo('admin', 'lead-guide'), tourController.createTour); // This is CHAINING multiple middlewares\n\nrouter.route('/:id').get(tourController.getTour).patch(authController.protect, authController.restrictTo('admin', 'lead-guide'), uploadTourImages.fields([{\n  name: 'imageCover',\n  maxCount: 1\n}, {\n  name: 'images',\n  maxCount: 3\n}]), tourController.updateTour)[\"delete\"](authController.protect, authController.restrictTo('admin', 'lead-guide'), tourController.deleteTour);\n\n// Get a Tour based on slug\nrouter.route('/slug/:slug').get(tourController.getTourBySlug);\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsInRvdXJDb250cm9sbGVyIiwiYXV0aENvbnRyb2xsZXIiLCJyZXZpZXdSb3V0ZXIiLCJfcmVxdWlyZSIsInVwbG9hZFRvdXJJbWFnZXMiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJ1c2UiLCJyb3V0ZSIsImdldCIsImFsaWFzVG9wVG91cnMiLCJnZXRBbGxUb3VycyIsImdldFRvdXJTdGF0cyIsInByb3RlY3QiLCJyZXN0cmljdFRvIiwiZ2V0TW9udGhseVBsYW4iLCJnZXRUb3Vyc1dpdGhpbiIsImdldERpc3RhbmNlIiwicG9zdCIsImNyZWF0ZVRvdXIiLCJnZXRUb3VyIiwicGF0Y2giLCJmaWVsZHMiLCJuYW1lIiwibWF4Q291bnQiLCJ1cGRhdGVUb3VyIiwiZGVsZXRlVG91ciIsImdldFRvdXJCeVNsdWciLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL3JvdXRlcy8iLCJzb3VyY2VzIjpbInRvdXJSb3V0ZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcbmNvbnN0IHRvdXJDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvdG91ckNvbnRyb2xsZXInKTtcbmNvbnN0IGF1dGhDb250cm9sbGVyID0gcmVxdWlyZSgnLi4vY29udHJvbGxlcnMvYXV0aENvbnRyb2xsZXInKTtcbmNvbnN0IHJldmlld1JvdXRlciA9IHJlcXVpcmUoJy4vLi4vcm91dGVzL3Jldmlld1JvdXRlcycpO1xuY29uc3QgeyB1cGxvYWRUb3VySW1hZ2VzIH0gPSByZXF1aXJlKCcuLi91dGlscy91cGxvYWQnKTtcblxuLyogXG50b3VyQ29udHJvbGxlciBpcyBhbiBvYmplY3QgY29udGFpbmluZyBhbGwgZnVuY3Rpb25zIHRoYXQgSSBleHBvcnRlZCBcbmZyb20gYSBjb250cm9sbGVyIHRoZXJlZm9yZSBhbGwgbWV0aG9kcyBtdXN0IGJlIGNhbGxlZCBvbiBpdCEgXG4qL1xuXG5jb25zdCByb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vLyBNb3VudGluZyByZXZpZXcgcm91dGVyIEFGVEVSIHRvdXJzIChNQUlOKSByb3V0ZXJcbnJvdXRlci51c2UoJy86dG91cklkL3Jldmlld3MnLCByZXZpZXdSb3V0ZXIpO1xuXG5yb3V0ZXJcbiAgLnJvdXRlKCcvdG9wLTUtY2hlYXAnKVxuICAuZ2V0KHRvdXJDb250cm9sbGVyLmFsaWFzVG9wVG91cnMsIHRvdXJDb250cm9sbGVyLmdldEFsbFRvdXJzKTtcblxucm91dGVyLnJvdXRlKCcvdG91ci1zdGF0cycpLmdldCh0b3VyQ29udHJvbGxlci5nZXRUb3VyU3RhdHMpO1xucm91dGVyXG4gIC5yb3V0ZSgnL21vbnRobHktcGxhbi86eWVhcicpXG4gIC5nZXQoXG4gICAgYXV0aENvbnRyb2xsZXIucHJvdGVjdCxcbiAgICBhdXRoQ29udHJvbGxlci5yZXN0cmljdFRvKCdhZG1pbicsICdsZWFkLWd1aWRlJywgJ2d1aWRlJyksXG4gICAgdG91ckNvbnRyb2xsZXIuZ2V0TW9udGhseVBsYW4sXG4gICk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbnJvdXRlclxuICAucm91dGUoJy90b3Vycy13aXRoaW4vOmRpc3RhbmNlL2NlbnRlci86bGF0bG5nL3VuaXQvOnVuaXQnKVxuICAuZ2V0KHRvdXJDb250cm9sbGVyLmdldFRvdXJzV2l0aGluKTtcblxuLy8gRGlzdGFuY2UgZnJvbSBhIGNlcnRhaW4gcG9pbnQgdG8gRVZFUlkgdG91clxucm91dGVyLnJvdXRlKCcvZGlzdGFuY2VzLzpsYXRsbmcvdW5pdC86dW5pdCcpLmdldCh0b3VyQ29udHJvbGxlci5nZXREaXN0YW5jZSk7XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxucm91dGVyXG4gIC5yb3V0ZSgnLycpXG4gIC5nZXQodG91ckNvbnRyb2xsZXIuZ2V0QWxsVG91cnMpXG4gIC5wb3N0KFxuICAgIGF1dGhDb250cm9sbGVyLnByb3RlY3QsXG4gICAgYXV0aENvbnRyb2xsZXIucmVzdHJpY3RUbygnYWRtaW4nLCAnbGVhZC1ndWlkZScpLFxuICAgIHRvdXJDb250cm9sbGVyLmNyZWF0ZVRvdXIsXG4gICk7IC8vIFRoaXMgaXMgQ0hBSU5JTkcgbXVsdGlwbGUgbWlkZGxld2FyZXNcblxucm91dGVyXG4gIC5yb3V0ZSgnLzppZCcpXG4gIC5nZXQodG91ckNvbnRyb2xsZXIuZ2V0VG91cilcbiAgLnBhdGNoKFxuICAgIGF1dGhDb250cm9sbGVyLnByb3RlY3QsXG4gICAgYXV0aENvbnRyb2xsZXIucmVzdHJpY3RUbygnYWRtaW4nLCAnbGVhZC1ndWlkZScpLFxuICAgIHVwbG9hZFRvdXJJbWFnZXMuZmllbGRzKFtcbiAgICAgIHsgbmFtZTogJ2ltYWdlQ292ZXInLCBtYXhDb3VudDogMSB9LFxuICAgICAgeyBuYW1lOiAnaW1hZ2VzJywgbWF4Q291bnQ6IDMgfSxcbiAgICBdKSxcbiAgICB0b3VyQ29udHJvbGxlci51cGRhdGVUb3VyLFxuICApXG4gIC5kZWxldGUoXG4gICAgYXV0aENvbnRyb2xsZXIucHJvdGVjdCxcbiAgICBhdXRoQ29udHJvbGxlci5yZXN0cmljdFRvKCdhZG1pbicsICdsZWFkLWd1aWRlJyksXG4gICAgdG91ckNvbnRyb2xsZXIuZGVsZXRlVG91cixcbiAgKTtcblxuLy8gR2V0IGEgVG91ciBiYXNlZCBvbiBzbHVnXG5yb3V0ZXIucm91dGUoJy9zbHVnLzpzbHVnJykuZ2V0KHRvdXJDb250cm9sbGVyLmdldFRvdXJCeVNsdWcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNQSxPQUFPLEdBQUdDLE9BQU8sQ0FBQyxTQUFT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","map":{"version":3,"names":["express","require","tourController","authController","reviewRouter","_require","uploadTourImages","router","Router","use","route","get","aliasTopTours","getAllTours","getTourStats","protect","restrictTo","getMonthlyPlan","getToursWithin","getDistance","post","createTour","getTour","patch","fields","name","maxCount","updateTour","deleteTour","getTourBySlug","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/routes/","sources":["tourRoutes.js"],"sourcesContent":["const express = require('express');\nconst tourController = require('../controllers/tourController');\nconst authController = require('../controllers/authController');\nconst reviewRouter = require('./../routes/reviewRoutes');\nconst { uploadTourImages } = require('../utils/upload');\n\n/* \ntourController is an object containing all functions that I exported \nfrom a controller therefore all methods must be called on it! \n*/\n\nconst router = express.Router();\n\n// Mounting review router AFTER tours (MAIN) router\nrouter.use('/:tourId/reviews', reviewRouter);\n\nrouter\n  .route('/top-5-cheap')\n  .get(tourController.aliasTopTours, tourController.getAllTours);\n\nrouter.route('/tour-stats').get(tourController.getTourStats);\nrouter\n  .route('/monthly-plan/:year')\n  .get(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide', 'guide'),\n    tourController.getMonthlyPlan,\n  );\n\n////////////////////////////////////////////////////////////////////////////\nrouter\n  .route('/tours-within/:distance/center/:latlng/unit/:unit')\n  .get(tourController.getToursWithin);\n\n// Distance from a certain point to EVERY tour\nrouter.route('/distances/:latlng/unit/:unit').get(tourController.getDistance);\n\n////////////////////////////////////////////////////////////////////////////\n\nrouter\n  .route('/')\n  .get(tourController.getAllTours)\n  .post(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide'),\n    tourController.createTour,\n  ); // This is CHAINING multiple middlewares\n\nrouter\n  .route('/:id')\n  .get(tourController.getTour)\n  .patch(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide'),\n    uploadTourImages.fields([\n      { name: 'imageCover', maxCount: 1 },\n      { name: 'images', maxCount: 3 },\n    ]),\n    tourController.updateTour,\n  )\n  .delete(\n    authController.protect,\n    authController.restrictTo('admin', 'lead-guide'),\n    tourController.deleteTour,\n  );\n\n// Get a Tour based on slug\nrouter.route('/slug/:slug').get(tourController.getTourBySlug);\n\nmodule.exports = router;\n"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAS,CAAC;AAClC,IAAMC,cAAc,GAAGD,OAAO,CAAC,+BAA+B,CAAC;AAC/D,IAAME,cAAc,GAAGF,OAAO,CAAC,+BAA+B,CAAC;AAC/D,IAAMG,YAAY,GAAGH,OAAO,CAAC,0BAA0B,CAAC;AACxD,IAAAI,QAAA,GAA6BJ,OAAO,CAAC,iBAAiB,CAAC;EAA/CK,gBAAgB,GAAAD,QAAA,CAAhBC,gBAAgB;;AAExB;AACA;AACA;AACA;;AAEA,IAAMC,MAAM,GAAGP,OAAO,CAACQ,MAAM,CAAC,CAAC;;AAE/B;AACAD,MAAM,CAACE,GAAG,CAAC,kBAAkB,EAAEL,YAAY,CAAC;AAE5CG,MAAM,CACHG,KAAK,CAAC,cAAc,CAAC,CACrBC,GAAG,CAACT,cAAc,CAACU,aAAa,EAAEV,cAAc,CAACW,WAAW,CAAC;AAEhEN,MAAM,CAACG,KAAK,CAAC,aAAa,CAAC,CAACC,GAAG,CAACT,cAAc,CAACY,YAAY,CAAC;AAC5DP,MAAM,CACHG,KAAK,CAAC,qBAAqB,CAAC,CAC5BC,GAAG,CACFR,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,EAAE,OAAO,CAAC,EACzDd,cAAc,CAACe,cACjB,CAAC;;AAEH;AACAV,MAAM,CACHG,KAAK,CAAC,mDAAmD,CAAC,CAC1DC,GAAG,CAACT,cAAc,CAACgB,cAAc,CAAC;;AAErC;AACAX,MAAM,CAACG,KAAK,CAAC,+BAA+B,CAAC,CAACC,GAAG,CAACT,cAAc,CAACiB,WAAW,CAAC;;AAE7E;;AAEAZ,MAAM,CACHG,KAAK,CAAC,GAAG,CAAC,CACVC,GAAG,CAACT,cAAc,CAACW,WAAW,CAAC,CAC/BO,IAAI,CACHjB,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,EAChDd,cAAc,CAACmB,UACjB,CAAC,CAAC,CAAC;;AAELd,MAAM,CACHG,KAAK,CAAC,MAAM,CAAC,CACbC,GAAG,CAACT,cAAc,CAACoB,OAAO,CAAC,CAC3BC,KAAK,CACJpB,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,EAChDV,gBAAgB,CAACkB,MAAM,CAAC,CACtB;EAAEC,IAAI,EAAE,YAAY;EAAEC,QAAQ,EAAE;AAAE,CAAC,EACnC;EAAED,IAAI,EAAE,QAAQ;EAAEC,QAAQ,EAAE;AAAE,CAAC,CAChC,CAAC,EACFxB,cAAc,CAACyB,UACjB,CAAC,UACM,CACLxB,cAAc,CAACY,OAAO,EACtBZ,cAAc,CAACa,UAAU,CAAC,OAAO,EAAE,YAAY,CAAC,EAChDd,cAAc,CAAC0B,UACjB,CAAC;;AAEH;AACArB,MAAM,CAACG,KAAK,CAAC,aAAa,CAAC,CAACC,GAAG,CAACT,cAAc,CAAC2B,aAAa,CAAC;AAE7DC,MAAM,CAACC,OAAO,GAAGxB,MAAM","ignoreList":[]}},"mtime":1765344111285},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/tourController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar Tour = require('../models/tourModel');\nvar appError = require('../utils/appError');\nvar catchAsync = require('../utils/catchAsync');\nvar factory = require('./handlerFactory');\nvar executeUpdate = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next, Model) {\n    var doc;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          _context.n = 1;\n          return Model.findByIdAndUpdate(req.params.id, req.body, {\n            \"new\": true,\n            runValidators: true\n          });\n        case 1:\n          doc = _context.v;\n          if (doc) {\n            _context.n = 2;\n            break;\n          }\n          return _context.a(2, next(new appError('No document found with that ID', 404)));\n        case 2:\n          res.status(200).json({\n            status: 'success',\n            data: {\n              doc: doc\n            }\n          });\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee);\n  }));\n  return function executeUpdate(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\n//  Custom UpdateTour Function\nexports.updateTour = catchAsync(/*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var galleryUrls;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          // 1. CHECK IF FILES WERE UPLOADED\n          if (req.files) {\n            // 1a. Process imageCover (Field name: imageCover, maxCount: 1)\n            if (req.files.imageCover && req.files.imageCover.length) {\n              // Multer stores the URL in the .path property\n              req.body.imageCover = req.files.imageCover[0].path;\n            }\n\n            // 1b. Process images (Field name: images, maxCount: 3)\n            if (req.files.images && req.files.images.length) {\n              // Map the array of file objects to an array of URLs\n              galleryUrls = req.files.images.map(function (file) {\n                return file.path;\n              }); // Add the array of URLs to the request body\n              req.body.images = galleryUrls;\n            }\n          }\n\n          // 2. PASS CONTROL TO THE GENERIC UPDATE LOGIC\n          // Now req.body contains the updated fields (including the new URL(s)),\n          // and we can run the standard update logic.\n          _context2.n = 1;\n          return executeUpdate(req, res, next, Tour);\n        case 1:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x5, _x6, _x7) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexports.aliasTopTours = function (req, res, next) {\n  req.url = '/?sort=-ratingsAverage,price&fields=ratingsAverage,price,name,difficulty,summary&limit=5';\n  next();\n};\nexports.getAllTours = factory.getAll(Tour);\nexports.getTour = factory.getOne(Tour, {\n  path: 'reviews'\n});\nexports.createTour = factory.createOne(Tour);\n// exports.updateTour = factory.updateOne(Tour);\nexports.deleteTour = factory.deleteOne(Tour);\n\n// Get Tour By Slug\nexports.getTourBySlug = catchAsync(/*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(req, res, next) {\n    var tour;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          _context3.n = 1;\n          return Tour.findOne({\n            slug: req.params.slug\n          });\n        case 1:\n          tour = _context3.v;\n          if (tour) {\n            _context3.n = 2;\n            break;\n          }\n          return _context3.a(2, next(new appError('No tour found', 404)));\n        case 2:\n          res.status(200).json({\n            status: 'success',\n            data: {\n              doc: tour\n            }\n          });\n        case 3:\n          return _context3.a(2);\n      }\n    }, _callee3);\n  }));\n  return function (_x8, _x9, _x0) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexports.getTourStats = catchAsync(/*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var stats;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.n) {\n        case 0:\n          _context4.n = 1;\n          return Tour.aggregate([{\n            $match: {\n              ratingsAverage: {\n                $gte: 4.5\n              }\n            }\n          }, {\n            $group: {\n              _id: {\n                $toUpper: '$difficulty'\n              },\n              numTours: {\n                $sum: 1\n              },\n              numRatings: {\n                $sum: '$ratingsQuantity'\n              },\n              avgRating: {\n                $avg: '$ratingsAverage'\n              },\n              avgPrice: {\n                $avg: '$price'\n              },\n              minPrice: {\n                $min: '$price'\n              },\n              maxPrice: {\n                $max: '$price'\n              }\n            }\n          }, {\n            $sort: {\n              avgPrice: 1\n            }\n          }\n          // {\n          //   $match: { _id: { $ne: 'EASY' } },\n          // },\n          ]);\n        case 1:\n          stats = _context4.v;\n          res.status(200).json({\n            status: 'success',\n            data: {\n              stats: stats\n            }\n          });\n        case 2:\n          return _context4.a(2);\n      }\n    }, _callee4);\n  }));\n  return function (_x1, _x10, _x11) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexports.getMonthlyPlan = catchAsync(/*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var year, plan;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          year = req.params.year * 1;\n          _context5.n = 1;\n          return Tour.aggregate([{\n            $unwind: '$startDates'\n          }, {\n            $match: {\n              startDates: {\n                $gte: new Date(\"\".concat(year, \"-01-01\")),\n                $lte: new Date(\"\".concat(year, \"-12-31\"))\n              }\n            }\n          }, {\n            $group: {\n              _id: {\n                $month: '$startDates'\n              },\n              numTourStarts: {\n                $sum: 1\n              },\n              tours: {\n                $push: '$name'\n              }\n            }\n          }, {\n            $addFields: {\n              month: '$_id'\n            }\n          }, {\n            $project: {\n              _id: 0\n            }\n          }, {\n            $sort: {\n              numTourStarts: -1\n            }\n          }, {\n            $limit: 12\n          }]);\n        case 1:\n          plan = _context5.v;\n          res.status(200).json({\n            status: 'success',\n            results: plan.length,\n            data: {\n              plan: plan\n            }\n          });\n        case 2:\n          return _context5.a(2);\n      }\n    }, _callee5);\n  }));\n  return function (_x12, _x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}());\nexports.getToursWithin = catchAsync(/*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(req, res, next) {\n    var _req$params, distance, latlng, unit, _latlng$split, _latlng$split2, lat, lng, radius, tours;\n    return _regenerator().w(function (_context6) {\n      while (1) switch (_context6.n) {\n        case 0:\n          _req$params = req.params, distance = _req$params.distance, latlng = _req$params.latlng, unit = _req$params.unit;\n          _latlng$split = latlng.split(','), _latlng$split2 = _slicedToArray(_latlng$split, 2), lat = _latlng$split2[0], lng = _latlng$split2[1];\n          radius = unit === 'mi' ? distance / 3963.2 : distance / 6378.1;\n          if (!lat || !lng) {\n            next(new appError('Please, provide latitude and longiture in the format lat, lng.', 400));\n          }\n          _context6.n = 1;\n          return Tour.find({\n            startLocation: {\n              $geoWithin: {\n                $centerSphere: [[lng, lat], radius]\n              }\n            }\n          });\n        case 1:\n          tours = _context6.v;\n          res.status(200).json({\n            status: 'success',\n            results: tours.length,\n            data: {\n              data: tours\n            }\n          });\n        case 2:\n          return _context6.a(2);\n      }\n    }, _callee6);\n  }));\n  return function (_x15, _x16, _x17) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nexports.getDistance = catchAsync(/*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    var _req$params2, latlng, unit, _latlng$split3, _latlng$split4, lat, lng, multiplier, distances;\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          _req$params2 = req.params, latlng = _req$params2.latlng, unit = _req$params2.unit;\n          _latlng$split3 = latlng.split(','), _latlng$split4 = _slicedToArray(_latlng$split3, 2), lat = _latlng$split4[0], lng = _latlng$split4[1];\n          multiplier = unit === 'mi' ? 0.0006213712 : 0.001;\n          if (!lat || !lng) {\n            next(new appError('Please, provide latitude and longiture in the format lat, lng.', 400));\n          }\n          _context7.n = 1;\n          return Tour.aggregate([{\n            $geoNear: {\n              near: {\n                type: 'Point',\n                coordinates: [lng * 1, lat * 1]\n              },\n              distanceField: 'distance',\n              distanceMultiplier: multiplier\n            }\n          }, {\n            $project: {\n              distance: 1,\n              name: 1\n            }\n          }]);\n        case 1:\n          distances = _context7.v;\n          res.status(200).json({\n            status: 'success',\n            data: {\n              data: distances\n            }\n          });\n        case 2:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x18, _x19, _x20) {\n    return _ref7.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIlRvdXIiLCJyZXF1aXJlIiwiYXBwRXJyb3IiLCJjYXRjaEFzeW5jIiwiZmFjdG9yeSIsImV4ZWN1dGVVcGRhdGUiLCJfcmVmIiwiX2NhbGxlZSIsInJlcSIsInJlcyIsIm5leHQiLCJNb2RlbCIsImRvYyIsIl9jb250ZXh0IiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJwYXJhbXMiLCJpZCIsImJvZHkiLCJydW5WYWxpZGF0b3JzIiwic3RhdHVzIiwianNvbiIsImRhdGEiLCJfeCIsIl94MiIsIl94MyIsIl94NCIsImV4cG9ydHMiLCJ1cGRhdGVUb3VyIiwiX3JlZjIiLCJfY2FsbGVlMiIsImdhbGxlcnlVcmxzIiwiX2NvbnRleHQyIiwiZmlsZXMiLCJpbWFnZUNvdmVyIiwicGF0aCIsImltYWdlcyIsIm1hcCIsImZpbGUiLCJfeDUiLCJfeDYiLCJfeDciLCJhbGlhc1RvcFRvdXJzIiwidXJsIiwiZ2V0QWxsVG91cnMiLCJnZXRBbGwiLCJnZXRUb3VyIiwiZ2V0T25lIiwiY3JlYXRlVG91ciIsImNyZWF0ZU9uZSIsImRlbGV0ZVRvdXIiLCJkZWxldGVPbmUiLCJnZXRUb3VyQnlTbHVnIiwiX3JlZjMiLCJfY2FsbGVlMyIsInRvdXIiLCJfY29udGV4dDMiLCJmaW5kT25lIiwic2x1ZyIsIl94OCIsIl94OSIsIl94MCIsImdldFRvdXJTdGF0cyIsIl9yZWY0IiwiX2NhbGxlZTQiLCJzdGF0cyIsIl9jb250ZXh0NCIsImFnZ3JlZ2F0ZSIsIiRtYXRjaCIsInJhdGluZ3NBdmVyYWdlIiwiJGd0ZSIsIiRncm91cCIsIl9pZCIsIiR0b1VwcGVyIiwibnVtVG91cnMiLCIkc3VtIiwibnVtUmF0aW5ncyIsImF2Z1JhdGluZyIsIiRhdmciLCJhdmdQcmljZSIsIm1pblByaWNlIiwiJG1pbiIsIm1heFByaWNlIiwiJG1heCIsIiRzb3J0IiwiX3gxIiwiX3gxMCIsIl94MTEiLCJnZXRNb250aGx5UGxhbiIsIl9yZWY1IiwiX2NhbGxlZTUiLCJ5ZWFyIiwicGxhbiIsIl9jb250ZXh0NSIsIiR1bndpbmQiLCJzdGFydERhdGVzIiwiRGF0ZSIsImNvbmNhdCIsIiRsdGUiLCIkbW9udGgiLCJudW1Ub3VyU3RhcnRzIiwidG91cnMiLCIkcHVzaCIsIiRhZGRGaWVsZHMiLCJtb250aCIsIiRwcm9qZWN0IiwiJGxpbWl0IiwicmVzdWx0cyIsIl94MTIiLCJfeDEzIiwiX3gxNCIsImdldFRvdXJzV2l0aGluIiwiX3JlZjYiLCJfY2FsbGVlNiIsIl9yZXEkcGFyYW1zIiwiZGlzdGFuY2UiLCJsYXRsbmciLCJ1bml0IiwiX2xhdGxuZyRzcGxpdCIsIl9sYXRsbmckc3BsaXQyIiwibGF0IiwibG5nIiwicmFkaXVzIiwiX2NvbnRleHQ2Iiwic3BsaXQiLCJfc2xpY2VkVG9BcnJheSIsImZpbmQiLCJzdGFydExvY2F0aW9uIiwiJGdlb1dpdGhpbiIsIiRjZW50ZXJTcGhlcmUiLCJfeDE1IiwiX3gxNiIsIl94MTciLCJnZXREaXN0YW5jZSIsIl9yZWY3IiwiX2NhbGxlZTciLCJfcmVxJHBhcmFtczIiLCJfbGF0bG5nJHNwbGl0MyIsIl9sYXRsbmckc3BsaXQ0IiwibXVsdGlwbGllciIsImRpc3RhbmNlcyIsIl9jb250ZXh0NyIsIiRnZW9OZWFyIiwibmVhciIsInR5cGUiLCJjb29yZGluYXRlcyIsImRpc3RhbmNlRmllbGQiLCJkaXN0YW5jZU11bHRpcGxpZXIiLCJuYW1lIiwiX3gxOCIsIl94MTkiLCJfeDIwIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsidG91ckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVG91ciA9IHJlcXVpcmUoJy4uL21vZGVscy90b3VyTW9kZWwnKTtcbmNvbnN0IGFwcEVycm9yID0gcmVxdWlyZSgnLi4vdXRpbHMvYXBwRXJyb3InKTtcbmNvbnN0IGNhdGNoQXN5bmMgPSByZXF1aXJlKCcuLi91dGlscy9jYXRjaEFzeW5jJyk7XG5cbmNvbnN0IGZhY3RvcnkgPSByZXF1aXJlKCcuL2hhbmRsZXJGYWN0b3J5Jyk7XG5cbmNvbnN0IGV4ZWN1dGVVcGRhdGUgPSBhc3luYyAocmVxLCByZXMsIG5leHQsIE1vZGVsKSA9PiB7XG4gIGNvbnN0IGRvYyA9IGF3YWl0IE1vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKHJlcS5wYXJhbXMuaWQsIHJlcS5ib2R5LCB7XG4gICAgbmV3OiB0cnVlLFxuICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXG4gIH0pO1xuXG4gIGlmICghZG9jKSB7XG4gICAgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdObyBkb2N1bWVudCBmb3VuZCB3aXRoIHRoYXQgSUQnLCA0MDQpKTtcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICBkYXRhOiB7XG4gICAgICBkb2MsXG4gICAgfSxcbiAgfSk7XG59O1xuXG4vLyDwn5SRIEN1c3RvbSBVcGRhdGVUb3VyIEZ1bmN0aW9uXG5leHBvcnRzLnVwZGF0ZVRvdXIgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAvLyAxLiBDSEVDSyBJRiBGSUxFUyBXRVJFIFVQTE9BREVEXG4gIGlmIChyZXEuZmlsZXMpIHtcbiAgICAvLyAxYS4gUHJvY2VzcyBpbWFnZUNvdmVyIChGaWVsZCBuYW1lOiBpbWFnZUNvdmVyLCBtYXhDb3VudDogMSlcbiAgICBpZiAocmVxLmZpbGVzLmltYWdlQ292ZXIgJiYgcmVxLmZpbGVzLmltYWdlQ292ZXIubGVuZ3RoKSB7XG4gICAgICAvLyBNdWx0ZXIgc3RvcmVzIHRoZSBVUkwgaW4gdGhlIC5wYXRoIHByb3BlcnR5XG4gICAgICByZXEuYm9keS5pbWFnZUNvdmVyID0gcmVxLmZpbGVzLmltYWdlQ292ZXJbMF0ucGF0aDtcbiAgICB9XG5cbiAgICAvLyAxYi4gUHJvY2VzcyBpbWFnZXMgKEZpZWxkIG5hbWU6IGltYWdlcywgbWF4Q291bnQ6IDMpXG4gICAgaWYgKHJlcS5maWxlcy5pbWFnZXMgJiYgcmVxLmZpbGVzLmltYWdlcy5sZW5ndGgpIHtcbiAgICAgIC8vIE1hcCB0aGUgYXJyYXkgb2YgZmlsZSBvYmplY3RzIHRvIGFuIGFycmF5IG9mIFVSTHNcbiAgICAgIGNvbnN0IGdhbGxlcnlVcmxzID0gcmVxLmZpbGVzLmltYWdlcy5tYXAoKGZpbGUpID0+IGZpbGUucGF0aCk7XG5cbiAgICAgIC8vIEFkZCB0aGUgYXJyYXkgb2YgVVJMcyB0byB0aGUgcmVxdWVzdCBib2R5XG4gICAgICByZXEuYm9keS5pbWFnZXMgPSBnYWxsZXJ5VXJscztcbiAgICB9XG4gIH1cblxuICAvLyAyLiBQQVNTIENPTlRST0wgVE8gVEhFIEdFTkVSSUMgVVBEQVRFIExPR0lDXG4gIC8vIE5vdyByZXEuYm9keSBjb250YWlucyB0aGUgdXBkYXRlZCBmaWVsZHMgKGluY2x1ZGluZyB0aGUgbmV3IFVSTChzKSksXG4gIC8vIGFuZCB3ZSBjYW4gcnVuIHRoZSBzdGFuZGFyZCB1cGRhdGUgbG9naWMuXG4gIGF3YWl0IGV4ZWN1dGVVcGRhdGUocmVxLCByZXMsIG5leHQsIFRvdXIpO1xufSk7XG5cbmV4cG9ydHMuYWxpYXNUb3BUb3VycyA9IChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICByZXEudXJsID1cbiAgICAnLz9zb3J0PS1yYXRpbmdzQXZlcmFnZSxwcmljZSZmaWVsZHM9cmF0aW5nc0F2ZXJhZ2UscHJpY2UsbmFtZSxkaWZmaWN1bHR5LHN1bW1hcnkmbGltaXQ9NSc7XG5cbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0cy5nZXRBbGxUb3VycyA9IGZhY3RvcnkuZ2V0QWxsKFRvdXIpO1xuZXhwb3J0cy5nZXRUb3VyID0gZmFjdG9yeS5nZXRPbmUoVG91ciwgeyBwYXRoOiAncmV2aWV3cycgfSk7XG5leHBvcnRzLmNyZWF0ZVRvdXIgPSBmYWN0b3J5LmNyZWF0ZU9uZShUb3VyKTtcbi8vIGV4cG9ydHMudXBkYXRlVG91ciA9IGZhY3RvcnkudXBkYXRlT25lKFRvdXIpO1xuZXhwb3J0cy5kZWxldGVUb3VyID0gZmFjdG9yeS5kZWxldGVPbmUoVG91cik7XG5cbi8vIEdldCBUb3VyIEJ5IFNsdWdcbmV4cG9ydHMuZ2V0VG91ckJ5U2x1ZyA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHRvdXIgPSBhd2FpdCBUb3VyLmZpbmRPbmUoeyBzbHVnOiByZXEucGFyYW1zLnNsdWcgfSk7XG4gIGlmICghdG91cikgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdObyB0b3VyIGZvdW5kJywgNDA0KSk7XG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgc3RhdHVzOiAnc3VjY2VzcycsIGRhdGE6IHsgZG9jOiB0b3VyIH0gfSk7XG59KTtcblxuZXhwb3J0cy5nZXRUb3VyU3RhdHMgPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzdGF0cyA9IGF3YWl0IFRvdXIuYWdncmVnYXRlKFtcbiAgICB7XG4gICAgICAkbWF0Y2g6IHsgcmF0aW5nc0F2ZXJhZ2U6IHsgJGd0ZTogNC41IH0gfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICRncm91cDoge1xuICAgICAgICBfaWQ6IHsgJHRvVXBwZXI6ICckZGlmZmljdWx0eScgfSxcbiAgICAgICAgbnVtVG91cnM6IHsgJHN1bTogMSB9LFxuICAgICAgICBudW1SYXRpbmdzOiB7ICRzdW06ICckcmF0aW5nc1F1YW50aXR5JyB9LFxuICAgICAgICBhdmdSYXRpbmc6IHsgJGF2ZzogJyRyYXRpbmdzQXZlcmFnZScgfSxcbiAgICAgICAgYXZnUHJpY2U6IHsgJGF2ZzogJyRwcmljZScgfSxcbiAgICAgICAgbWluUHJpY2U6IHsgJG1pbjogJyRwcmljZScgfSxcbiAgICAgICAgbWF4UHJpY2U6IHsgJG1heDogJyRwcmljZScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkc29ydDoge1xuICAgICAgICBhdmdQcmljZTogMSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICAvLyB7XG4gICAgLy8gICAkbWF0Y2g6IHsgX2lkOiB7ICRuZTogJ0VBU1knIH0gfSxcbiAgICAvLyB9LFxuICBdKTtcblxuICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgZGF0YToge1xuICAgICAgc3RhdHMsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRNb250aGx5UGxhbiA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHllYXIgPSByZXEucGFyYW1zLnllYXIgKiAxO1xuICBjb25zdCBwbGFuID0gYXdhaXQgVG91ci5hZ2dyZWdhdGUoW1xuICAgIHtcbiAgICAgICR1bndpbmQ6ICckc3RhcnREYXRlcycsXG4gICAgfSxcbiAgICB7XG4gICAgICAkbWF0Y2g6IHtcbiAgICAgICAgc3RhcnREYXRlczoge1xuICAgICAgICAgICRndGU6IG5ldyBEYXRlKGAke3llYXJ9LTAxLTAxYCksXG4gICAgICAgICAgJGx0ZTogbmV3IERhdGUoYCR7eWVhcn0tMTItMzFgKSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkZ3JvdXA6IHtcbiAgICAgICAgX2lkOiB7ICRtb250aDogJyRzdGFydERhdGVzJyB9LFxuICAgICAgICBudW1Ub3VyU3RhcnRzOiB7ICRzdW06IDEgfSxcbiAgICAgICAgdG91cnM6IHsgJHB1c2g6ICckbmFtZScgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkYWRkRmllbGRzOiB7IG1vbnRoOiAnJF9pZCcgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICRwcm9qZWN0OiB7IF9pZDogMCB9LFxuICAgIH0sXG4gICAge1xuICAgICAgJHNvcnQ6IHsgbnVtVG91clN0YXJ0czogLTEgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgICRsaW1pdDogMTIsXG4gICAgfSxcbiAgXSk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIHJlc3VsdHM6IHBsYW4ubGVuZ3RoLFxuICAgIGRhdGE6IHtcbiAgICAgIHBsYW4sXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRUb3Vyc1dpdGhpbiA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgZGlzdGFuY2UsIGxhdGxuZywgdW5pdCB9ID0gcmVxLnBhcmFtcztcbiAgY29uc3QgW2xhdCwgbG5nXSA9IGxhdGxuZy5zcGxpdCgnLCcpO1xuXG4gIGNvbnN0IHJhZGl1cyA9IHVuaXQgPT09ICdtaScgPyBkaXN0YW5jZSAvIDM5NjMuMiA6IGRpc3RhbmNlIC8gNjM3OC4xO1xuXG4gIGlmICghbGF0IHx8ICFsbmcpIHtcbiAgICBuZXh0KFxuICAgICAgbmV3IGFwcEVycm9yKFxuICAgICAgICAnUGxlYXNlLCBwcm92aWRlIGxhdGl0dWRlIGFuZCBsb25naXR1cmUgaW4gdGhlIGZvcm1hdCBsYXQsIGxuZy4nLFxuICAgICAgICA0MDAsXG4gICAgICApLFxuICAgICk7XG4gIH1cblxuICBjb25zdCB0b3VycyA9IGF3YWl0IFRvdXIuZmluZCh7XG4gICAgc3RhcnRMb2NhdGlvbjoge1xuICAgICAgJGdlb1dpdGhpbjogeyAkY2VudGVyU3BoZXJlOiBbW2xuZywgbGF0XSwgcmFkaXVzXSB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICByZXN1bHRzOiB0b3Vycy5sZW5ndGgsXG4gICAgZGF0YToge1xuICAgICAgZGF0YTogdG91cnMsXG4gICAgfSxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXREaXN0YW5jZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgbGF0bG5nLCB1bml0IH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBbbGF0LCBsbmddID0gbGF0bG5nLnNwbGl0KCcsJyk7XG5cbiAgY29uc3QgbXVsdGlwbGllciA9IHVuaXQgPT09ICdtaScgPyAwLjAwMDYyMTM3MTIgOiAwLjAwMTtcblxuICBpZiAoIWxhdCB8fCAhbG5nKSB7XG4gICAgbmV4dChcbiAgICAgIG5ldyBhcHBFcnJvcihcbiAgICAgICAgJ1BsZWFzZSwgcHJvdmlkZSBsYXRpdHVkZSBhbmQgbG9uZ2l0dXJlIGluIHRoZSBmb3JtYXQgbGF0LCBsbmcuJyxcbiAgICAgICAgNDAwLFxuICAgICAgKSxcbiAgICApO1xuICB9XG5cbiAgY29uc3QgZGlzdGFuY2VzID0gYXdhaXQgVG91ci5hZ2dyZWdhdGUoW1xuICAgIHtcbiAgICAgICRnZW9OZWFyOiB7XG4gICAgICAgIG5lYXI6IHtcbiAgICAgICAgICB0eXBlOiAnUG9pbnQnLFxuICAgICAgICAgIGNvb3JkaW5hdGVzOiBbbG5nICogMSwgbGF0ICogMV0sXG4gICAgICAgIH0sXG4gICAgICAgIGRpc3RhbmNlRmllbGQ6ICdkaXN0YW5jZScsXG4gICAgICAgIGRpc3RhbmNlTXVsdGlwbGllcjogbXVsdGlwbGllcixcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICAkcHJvamVjdDoge1xuICAgICAgICBkaXN0YW5jZTogMSxcbiAgICAgICAgbmFtZTogMSxcbiAgICAgIH0sXG4gICAgfSxcbiAgXSk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIGRhdGE6IHtcbiAgICAgIGRhdGE6IGRpc3RhbmNlcyxcbiAgICB9LFxuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNBQUEsVUFBQUssbUJBQUEsQ0FBQUgsQ0FBQSx1QkFBQVYsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUUsQ0FBQSxFQUFBQyxDQUFBLEVBQUFHLENBQUEsRUFBQUksQ0FBQSxNQUFBQyxDQUFBLEdBQUFYLENBQUEsUUFBQVksQ0FBQSxPQUFBQyxDQUFBLEtBQUFGLENBQUEsS0FBQWIsQ0FBQSxLQUFBZ0IsQ0FBQSxFQUFBcEIsQ0FBQSxFQUFBcUIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFOLENBQUEsRUFBQU0sQ0FB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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","Tour","require","appError","catchAsync","factory","executeUpdate","_ref","_callee","req","res","next","Model","doc","_context","findByIdAndUpdate","params","id","body","runValidators","status","json","data","_x","_x2","_x3","_x4","exports","updateTour","_ref2","_callee2","galleryUrls","_context2","files","imageCover","path","images","map","file","_x5","_x6","_x7","aliasTopTours","url","getAllTours","getAll","getTour","getOne","createTour","createOne","deleteTour","deleteOne","getTourBySlug","_ref3","_callee3","tour","_context3","findOne","slug","_x8","_x9","_x0","getTourStats","_ref4","_callee4","stats","_context4","aggregate","$match","ratingsAverage","$gte","$group","_id","$toUpper","numTours","$sum","numRatings","avgRating","$avg","avgPrice","minPrice","$min","maxPrice","$max","$sort","_x1","_x10","_x11","getMonthlyPlan","_ref5","_callee5","year","plan","_context5","$unwind","startDates","Date","concat","$lte","$month","numTourStarts","tours","$push","$addFields","month","$project","$limit","results","_x12","_x13","_x14","getToursWithin","_ref6","_callee6","_req$params","distance","latlng","unit","_latlng$split","_latlng$split2","lat","lng","radius","_context6","split","_slicedToArray","find","startLocation","$geoWithin","$centerSphere","_x15","_x16","_x17","getDistance","_ref7","_callee7","_req$params2","_latlng$split3","_latlng$split4","multiplier","distances","_context7","$geoNear","near","type","coordinates","distanceField","distanceMultiplier","name","_x18","_x19","_x20"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["tourController.js"],"sourcesContent":["const Tour = require('../models/tourModel');\nconst appError = require('../utils/appError');\nconst catchAsync = require('../utils/catchAsync');\n\nconst factory = require('./handlerFactory');\n\nconst executeUpdate = async (req, res, next, Model) => {\n  const doc = await Model.findByIdAndUpdate(req.params.id, req.body, {\n    new: true,\n    runValidators: true,\n  });\n\n  if (!doc) {\n    return next(new appError('No document found with that ID', 404));\n  }\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      doc,\n    },\n  });\n};\n\n//  Custom UpdateTour Function\nexports.updateTour = catchAsync(async (req, res, next) => {\n  // 1. CHECK IF FILES WERE UPLOADED\n  if (req.files) {\n    // 1a. Process imageCover (Field name: imageCover, maxCount: 1)\n    if (req.files.imageCover && req.files.imageCover.length) {\n      // Multer stores the URL in the .path property\n      req.body.imageCover = req.files.imageCover[0].path;\n    }\n\n    // 1b. Process images (Field name: images, maxCount: 3)\n    if (req.files.images && req.files.images.length) {\n      // Map the array of file objects to an array of URLs\n      const galleryUrls = req.files.images.map((file) => file.path);\n\n      // Add the array of URLs to the request body\n      req.body.images = galleryUrls;\n    }\n  }\n\n  // 2. PASS CONTROL TO THE GENERIC UPDATE LOGIC\n  // Now req.body contains the updated fields (including the new URL(s)),\n  // and we can run the standard update logic.\n  await executeUpdate(req, res, next, Tour);\n});\n\nexports.aliasTopTours = (req, res, next) => {\n  req.url =\n    '/?sort=-ratingsAverage,price&fields=ratingsAverage,price,name,difficulty,summary&limit=5';\n\n  next();\n};\n\nexports.getAllTours = factory.getAll(Tour);\nexports.getTour = factory.getOne(Tour, { path: 'reviews' });\nexports.createTour = factory.createOne(Tour);\n// exports.updateTour = factory.updateOne(Tour);\nexports.deleteTour = factory.deleteOne(Tour);\n\n// Get Tour By Slug\nexports.getTourBySlug = catchAsync(async (req, res, next) => {\n  const tour = await Tour.findOne({ slug: req.params.slug });\n  if (!tour) return next(new appError('No tour found', 404));\n  res.status(200).json({ status: 'success', data: { doc: tour } });\n});\n\nexports.getTourStats = catchAsync(async (req, res, next) => {\n  const stats = await Tour.aggregate([\n    {\n      $match: { ratingsAverage: { $gte: 4.5 } },\n    },\n    {\n      $group: {\n        _id: { $toUpper: '$difficulty' },\n        numTours: { $sum: 1 },\n        numRatings: { $sum: '$ratingsQuantity' },\n        avgRating: { $avg: '$ratingsAverage' },\n        avgPrice: { $avg: '$price' },\n        minPrice: { $min: '$price' },\n        maxPrice: { $max: '$price' },\n      },\n    },\n    {\n      $sort: {\n        avgPrice: 1,\n      },\n    },\n    // {\n    //   $match: { _id: { $ne: 'EASY' } },\n    // },\n  ]);\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      stats,\n    },\n  });\n});\n\nexports.getMonthlyPlan = catchAsync(async (req, res, next) => {\n  const year = req.params.year * 1;\n  const plan = await Tour.aggregate([\n    {\n      $unwind: '$startDates',\n    },\n    {\n      $match: {\n        startDates: {\n          $gte: new Date(`${year}-01-01`),\n          $lte: new Date(`${year}-12-31`),\n        },\n      },\n    },\n    {\n      $group: {\n        _id: { $month: '$startDates' },\n        numTourStarts: { $sum: 1 },\n        tours: { $push: '$name' },\n      },\n    },\n    {\n      $addFields: { month: '$_id' },\n    },\n    {\n      $project: { _id: 0 },\n    },\n    {\n      $sort: { numTourStarts: -1 },\n    },\n    {\n      $limit: 12,\n    },\n  ]);\n\n  res.status(200).json({\n    status: 'success',\n    results: plan.length,\n    data: {\n      plan,\n    },\n  });\n});\n\nexports.getToursWithin = catchAsync(async (req, res, next) => {\n  const { distance, latlng, unit } = req.params;\n  const [lat, lng] = latlng.split(',');\n\n  const radius = unit === 'mi' ? distance / 3963.2 : distance / 6378.1;\n\n  if (!lat || !lng) {\n    next(\n      new appError(\n        'Please, provide latitude and longiture in the format lat, lng.',\n        400,\n      ),\n    );\n  }\n\n  const tours = await Tour.find({\n    startLocation: {\n      $geoWithin: { $centerSphere: [[lng, lat], radius] },\n    },\n  });\n\n  res.status(200).json({\n    status: 'success',\n    results: tours.length,\n    data: {\n      data: tours,\n    },\n  });\n});\n\nexports.getDistance = catchAsync(async (req, res, next) => {\n  const { latlng, unit } = req.params;\n  const [lat, lng] = latlng.split(',');\n\n  const multiplier = unit === 'mi' ? 0.0006213712 : 0.001;\n\n  if (!lat || !lng) {\n    next(\n      new appError(\n        'Please, provide latitude and longiture in the format lat, lng.',\n        400,\n      ),\n    );\n  }\n\n  const distances = await Tour.aggregate([\n    {\n      $geoNear: {\n        near: {\n          type: 'Point',\n          coordinates: [lng * 1, lat * 1],\n        },\n        distanceField: 'distance',\n        distanceMultiplier: multiplier,\n      },\n    },\n    {\n      $project: {\n        distance: 1,\n        name: 1,\n      },\n    },\n  ]);\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      data: distances,\n    },\n  });\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1764940594469},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/models/tourModel.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nvar mongoose = require('mongoose');\nvar slugify = require('slugify');\n// const User = require('./userModel');\n// const validator = require('validator');\n\nvar tourSchema = new mongoose.Schema({\n  name: {\n    type: String,\n    required: [true, 'A tour must have a name'],\n    unique: true,\n    trim: true,\n    maxlength: [40, 'A tour name must have less or equal then 40 characters'],\n    minlength: [10, 'A tour name must have more or equal then 10 characters']\n    // validate: [validator.isAlpha, 'Tour name must only contain characters']\n  },\n  slug: String,\n  duration: {\n    type: Number,\n    required: [true, 'A tour must have a duration']\n  },\n  maxGroupSize: {\n    type: Number,\n    required: [true, 'A tour must have a group size']\n  },\n  difficulty: {\n    type: String,\n    required: [true, 'A tour must have a difficulty'],\n    \"enum\": {\n      values: ['easy', 'medium', 'difficult'],\n      message: 'Difficulty is either: easy, medium, difficult'\n    }\n  },\n  ratingsAverage: {\n    type: Number,\n    \"default\": 4.5,\n    min: [1, 'Rating must be above 1.0'],\n    max: [5, 'Rating must be below 5.0'],\n    set: function set(val) {\n      return Math.round(val * 10) / 10;\n    } // 4.666666, 46.6666, 47, 4.7\n  },\n  ratingsQuantity: {\n    type: Number,\n    \"default\": 0\n  },\n  price: {\n    type: Number,\n    required: [true, 'A tour must have a price']\n  },\n  priceDiscount: {\n    type: Number,\n    validate: {\n      validator: function validator(val) {\n        // this only points to current doc on NEW document creation\n        return val < this.price;\n      },\n      message: 'Discount price ({VALUE}) should be below regular price'\n    }\n  },\n  summary: {\n    type: String,\n    trim: true,\n    required: [true, 'A tour must have a description']\n  },\n  description: {\n    type: String,\n    trim: true\n  },\n  imageCover: {\n    type: String,\n    required: [true, 'A tour must have a cover image']\n  },\n  images: [String],\n  createdAt: {\n    type: Date,\n    \"default\": Date.now(),\n    select: false\n  },\n  startDates: [Date],\n  secretTour: {\n    type: Boolean,\n    \"default\": false\n  },\n  startLocation: {\n    // GeoJSON\n    type: {\n      type: String,\n      \"default\": 'Point',\n      \"enum\": ['Point']\n    },\n    coordinates: [Number],\n    address: String,\n    description: String\n  },\n  locations: [{\n    type: {\n      type: String,\n      \"default\": 'Point',\n      \"enum\": ['Point']\n    },\n    coordinates: [Number],\n    address: String,\n    description: String,\n    day: Number\n  }],\n  guides: [{\n    type: mongoose.Schema.ObjectId,\n    ref: 'User'\n  }]\n}, {\n  toJSON: {\n    virtuals: true\n  },\n  toObject: {\n    virtuals: true\n  }\n});\n\n// tourSchema.index({ price: 1 });\ntourSchema.index({\n  price: 1,\n  ratingsAverage: -1\n});\ntourSchema.index({\n  slug: 1\n});\ntourSchema.index({\n  startLocation: '2dsphere'\n});\ntourSchema.virtual('durationWeeks').get(function () {\n  return this.duration / 7;\n});\n\n// Virtual populate\ntourSchema.virtual('reviews', {\n  ref: 'Review',\n  foreignField: 'tour',\n  localField: '_id'\n});\n\n// DOCUMENT MIDDLEWARE: runs before .save() and .create()\ntourSchema.pre('save', function (next) {\n  this.slug = slugify(this.name, {\n    lower: true\n  });\n  next();\n});\n\n// tourSchema.pre('save', async function(next) {\n//   const guidesPromises = this.guides.map(async id => await User.findById(id));\n//   this.guides = await Promise.all(guidesPromises);\n//   next();\n// });\n\n// tourSchema.pre('save', function(next) {\n//   console.log('Will save document...');\n//   next();\n// });\n\n// tourSchema.post('save', function(doc, next) {\n//   console.log(doc);\n//   next();\n// });\n\n// QUERY MIDDLEWARE\n// tourSchema.pre('find', function(next) {\ntourSchema.pre(/^find/, function (next) {\n  this.find({\n    secretTour: {\n      $ne: true\n    }\n  });\n  this.start = Date.now();\n  next();\n});\ntourSchema.pre(/^find/, function (next) {\n  this.populate({\n    path: 'guides',\n    select: '-__v -passwordChangedAt'\n  });\n  next();\n});\n\n// tourSchema.post(/^find/, function(docs, next) {\n//   console.log(`Query took ${Date.now() - this.start} milliseconds!`);\n//   next();\n// });\n\n// AGGREGATION MIDDLEWARE\n// tourSchema.pre('aggregate', function(next) {\n//   this.pipeline().unshift({ $match: { secretTour: { $ne: true } } });\n\n//   console.log(this.pipeline());\n//   next();\n// });\n\nvar Tour = mongoose.model('Tour', tourSchema);\nmodule.exports = Tour;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsInJlcXVpcmUiLCJzbHVnaWZ5IiwidG91clNjaGVtYSIsIlNjaGVtYSIsIm5hbWUiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1bmlxdWUiLCJ0cmltIiwibWF4bGVuZ3RoIiwibWlubGVuZ3RoIiwic2x1ZyIsImR1cmF0aW9uIiwiTnVtYmVyIiwibWF4R3JvdXBTaXplIiwiZGlmZmljdWx0eSIsInZhbHVlcyIsIm1lc3NhZ2UiLCJyYXRpbmdzQXZlcmFnZSIsIm1pbiIsIm1heCIsInNldCIsInZhbCIsIk1hdGgiLCJyb3VuZCIsInJhdGluZ3NRdWFudGl0eSIsInByaWNlIiwicHJpY2VEaXNjb3VudCIsInZhbGlkYXRlIiwidmFsaWRhdG9yIiwic3VtbWFyeSIsImRlc2NyaXB0aW9uIiwiaW1hZ2VDb3ZlciIsImltYWdlcyIsImNyZWF0ZWRBdCIsIkRhdGUiLCJub3ciLCJzZWxlY3QiLCJzdGFydERhdGVzIiwic2VjcmV0VG91ciIsIkJvb2xlYW4iLCJzdGFydExvY2F0aW9uIiwiY29vcmRpbmF0ZXMiLCJhZGRyZXNzIiwibG9jYXRpb25zIiwiZGF5IiwiZ3VpZGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ0b0pTT04iLCJ2aXJ0dWFscyIsInRvT2JqZWN0IiwiaW5kZXgiLCJ2aXJ0dWFsIiwiZ2V0IiwiZm9yZWlnbkZpZWxkIiwibG9jYWxGaWVsZCIsInByZSIsIm5leHQiLCJsb3dlciIsImZpbmQiLCIkbmUiLCJzdGFydCIsInBvcHVsYXRlIiwicGF0aCIsIlRvdXIiLCJtb2RlbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvbW9kZWxzLyIsInNvdXJjZXMiOlsidG91ck1vZGVsLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbmNvbnN0IHNsdWdpZnkgPSByZXF1aXJlKCdzbHVnaWZ5Jyk7XG4vLyBjb25zdCBVc2VyID0gcmVxdWlyZSgnLi91c2VyTW9kZWwnKTtcbi8vIGNvbnN0IHZhbGlkYXRvciA9IHJlcXVpcmUoJ3ZhbGlkYXRvcicpO1xuXG5jb25zdCB0b3VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIG5hbWU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ0EgdG91ciBtdXN0IGhhdmUgYSBuYW1lJ10sXG4gICAgICB1bmlxdWU6IHRydWUsXG4gICAgICB0cmltOiB0cnVlLFxuICAgICAgbWF4bGVuZ3RoOiBbNDAsICdBIHRvdXIgbmFtZSBtdXN0IGhhdmUgbGVzcyBvciBlcXVhbCB0aGVuIDQwIGNoYXJhY3RlcnMnXSxcbiAgICAgIG1pbmxlbmd0aDogWzEwLCAnQSB0b3VyIG5hbWUgbXVzdCBoYXZlIG1vcmUgb3IgZXF1YWwgdGhlbiAxMCBjaGFyYWN0ZXJzJ10sXG4gICAgICAvLyB2YWxpZGF0ZTogW3ZhbGlkYXRvci5pc0FscGhhLCAnVG91ciBuYW1lIG11c3Qgb25seSBjb250YWluIGNoYXJhY3RlcnMnXVxuICAgIH0sXG4gICAgc2x1ZzogU3RyaW5nLFxuICAgIGR1cmF0aW9uOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdBIHRvdXIgbXVzdCBoYXZlIGEgZHVyYXRpb24nXSxcbiAgICB9LFxuICAgIG1heEdyb3VwU2l6ZToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnQSB0b3VyIG11c3QgaGF2ZSBhIGdyb3VwIHNpemUnXSxcbiAgICB9LFxuICAgIGRpZmZpY3VsdHk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiBbdHJ1ZSwgJ0EgdG91ciBtdXN0IGhhdmUgYSBkaWZmaWN1bHR5J10sXG4gICAgICBlbnVtOiB7XG4gICAgICAgIHZhbHVlczogWydlYXN5JywgJ21lZGl1bScsICdkaWZmaWN1bHQnXSxcbiAgICAgICAgbWVzc2FnZTogJ0RpZmZpY3VsdHkgaXMgZWl0aGVyOiBlYXN5LCBtZWRpdW0sIGRpZmZpY3VsdCcsXG4gICAgICB9LFxuICAgIH0sXG4gICAgcmF0aW5nc0F2ZXJhZ2U6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDQuNSxcbiAgICAgIG1pbjogWzEsICdSYXRpbmcgbXVzdCBiZSBhYm92ZSAxLjAnXSxcbiAgICAgIG1heDogWzUsICdSYXRpbmcgbXVzdCBiZSBiZWxvdyA1LjAnXSxcbiAgICAgIHNldDogKHZhbCkgPT4gTWF0aC5yb3VuZCh2YWwgKiAxMCkgLyAxMCwgLy8gNC42NjY2NjYsIDQ2LjY2NjYsIDQ3LCA0LjdcbiAgICB9LFxuICAgIHJhdGluZ3NRdWFudGl0eToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMCxcbiAgICB9LFxuICAgIHByaWNlOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdBIHRvdXIgbXVzdCBoYXZlIGEgcHJpY2UnXSxcbiAgICB9LFxuICAgIHByaWNlRGlzY291bnQ6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHZhbGlkYXRvcjogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgIC8vIHRoaXMgb25seSBwb2ludHMgdG8gY3VycmVudCBkb2Mgb24gTkVXIGRvY3VtZW50IGNyZWF0aW9uXG4gICAgICAgICAgcmV0dXJuIHZhbCA8IHRoaXMucHJpY2U7XG4gICAgICAgIH0sXG4gICAgICAgIG1lc3NhZ2U6ICdEaXNjb3VudCBwcmljZSAoe1ZBTFVFfSkgc2hvdWxkIGJlIGJlbG93IHJlZ3VsYXIgcHJpY2UnLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHN1bW1hcnk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHRyaW06IHRydWUsXG4gICAgICByZXF1aXJlZDogW3RydWUsICdBIHRvdXIgbXVzdCBoYXZlIGEgZGVzY3JpcHRpb24nXSxcbiAgICB9LFxuICAgIGRlc2NyaXB0aW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB0cmltOiB0cnVlLFxuICAgIH0sXG4gICAgaW1hZ2VDb3Zlcjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IFt0cnVlLCAnQSB0b3VyIG11c3QgaGF2ZSBhIGNvdmVyIGltYWdlJ10sXG4gICAgfSxcbiAgICBpbWFnZXM6IFtTdHJpbmddLFxuICAgIGNyZWF0ZWRBdDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93KCksXG4gICAgICBzZWxlY3Q6IGZhbHNlLFxuICAgIH0sXG4gICAgc3RhcnREYXRlczogW0RhdGVdLFxuICAgIHNlY3JldFRvdXI6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICAgIHN0YXJ0TG9jYXRpb246IHtcbiAgICAgIC8vIEdlb0pTT05cbiAgICAgIHR5cGU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiAnUG9pbnQnLFxuICAgICAgICBlbnVtOiBbJ1BvaW50J10sXG4gICAgICB9LFxuICAgICAgY29vcmRpbmF0ZXM6IFtOdW1iZXJdLFxuICAgICAgYWRkcmVzczogU3RyaW5nLFxuICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgICB9LFxuICAgIGxvY2F0aW9uczogW1xuICAgICAge1xuICAgICAgICB0eXBlOiB7XG4gICAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICAgIGRlZmF1bHQ6ICdQb2ludCcsXG4gICAgICAgICAgZW51bTogWydQb2ludCddLFxuICAgICAgICB9LFxuICAgICAgICBjb29yZGluYXRlczogW051bWJlcl0sXG4gICAgICAgIGFkZHJlc3M6IFN0cmluZyxcbiAgICAgICAgZGVzY3JpcHRpb246IFN0cmluZyxcbiAgICAgICAgZGF5OiBOdW1iZXIsXG4gICAgICB9LFxuICAgIF0sXG4gICAgZ3VpZGVzOiBbXG4gICAgICB7XG4gICAgICAgIHR5cGU6IG1vbmdvb3NlLlNjaGVtYS5PYmplY3RJZCxcbiAgICAgICAgcmVmOiAnVXNlcicsXG4gICAgICB9LFxuICAgIF0sXG4gIH0sXG4gIHtcbiAgICB0b0pTT046IHsgdmlydHVhbHM6IHRydWUgfSxcbiAgICB0b09iamVjdDogeyB2aXJ0dWFsczogdHJ1ZSB9LFxuICB9LFxuKTtcblxuLy8gdG91clNjaGVtYS5pbmRleCh7IHByaWNlOiAxIH0pO1xudG91clNjaGVtYS5pbmRleCh7IHByaWNlOiAxLCByYXRpbmdzQXZlcmFnZTogLTEgfSk7XG50b3VyU2NoZW1hLmluZGV4KHsgc2x1ZzogMSB9KTtcbnRvdXJTY2hlbWEuaW5kZXgoeyBzdGFydExvY2F0aW9uOiAnMmRzcGhlcmUnIH0pO1xuXG50b3VyU2NoZW1hLnZpcnR1YWwoJ2R1cmF0aW9uV2Vla3MnKS5nZXQoZnVuY3Rpb24gKCkge1xuICByZXR1cm4gdGhpcy5kdXJhdGlvbiAvIDc7XG59KTtcblxuLy8gVmlydHVhbCBwb3B1bGF0ZVxudG91clNjaGVtYS52aXJ0dWFsKCdyZXZpZXdzJywge1xuICByZWY6ICdSZXZpZXcnLFxuICBmb3JlaWduRmllbGQ6ICd0b3VyJyxcbiAgbG9jYWxGaWVsZDogJ19pZCcsXG59KTtcblxuLy8gRE9DVU1FTlQgTUlERExFV0FSRTogcnVucyBiZWZvcmUgLnNhdmUoKSBhbmQgLmNyZWF0ZSgpXG50b3VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuc2x1ZyA9IHNsdWdpZnkodGhpcy5uYW1lLCB7IGxvd2VyOiB0cnVlIH0pO1xuICBuZXh0KCk7XG59KTtcblxuLy8gdG91clNjaGVtYS5wcmUoJ3NhdmUnLCBhc3luYyBmdW5jdGlvbihuZXh0KSB7XG4vLyAgIGNvbnN0IGd1aWRlc1Byb21pc2VzID0gdGhpcy5ndWlkZXMubWFwKGFzeW5jIGlkID0+IGF3YWl0IFVzZXIuZmluZEJ5SWQoaWQpKTtcbi8vICAgdGhpcy5ndWlkZXMgPSBhd2FpdCBQcm9taXNlLmFsbChndWlkZXNQcm9taXNlcyk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG4vLyB0b3VyU2NoZW1hLnByZSgnc2F2ZScsIGZ1bmN0aW9uKG5leHQpIHtcbi8vICAgY29uc29sZS5sb2coJ1dpbGwgc2F2ZSBkb2N1bWVudC4uLicpO1xuLy8gICBuZXh0KCk7XG4vLyB9KTtcblxuLy8gdG91clNjaGVtYS5wb3N0KCdzYXZlJywgZnVuY3Rpb24oZG9jLCBuZXh0KSB7XG4vLyAgIGNvbnNvbGUubG9nKGRvYyk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG4vLyBRVUVSWSBNSURETEVXQVJFXG4vLyB0b3VyU2NoZW1hLnByZSgnZmluZCcsIGZ1bmN0aW9uKG5leHQpIHtcbnRvdXJTY2hlbWEucHJlKC9eZmluZC8sIGZ1bmN0aW9uIChuZXh0KSB7XG4gIHRoaXMuZmluZCh7IHNlY3JldFRvdXI6IHsgJG5lOiB0cnVlIH0gfSk7XG5cbiAgdGhpcy5zdGFydCA9IERhdGUubm93KCk7XG4gIG5leHQoKTtcbn0pO1xuXG50b3VyU2NoZW1hLnByZSgvXmZpbmQvLCBmdW5jdGlvbiAobmV4dCkge1xuICB0aGlzLnBvcHVsYXRlKHtcbiAgICBwYXRoOiAnZ3VpZGVzJyxcbiAgICBzZWxlY3Q6ICctX192IC1wYXNzd29yZENoYW5nZWRBdCcsXG4gIH0pO1xuXG4gIG5leHQoKTtcbn0pO1xuXG4vLyB0b3VyU2NoZW1hLnBvc3QoL15maW5kLywgZnVuY3Rpb24oZG9jcywgbmV4dCkge1xuLy8gICBjb25zb2xlLmxvZyhgUXVlcnkgdG9vayAke0RhdGUubm93KCkgLSB0aGlzLnN0YXJ0fSBtaWxsaXNlY29uZHMhYCk7XG4vLyAgIG5leHQoKTtcbi8vIH0pO1xuXG4vLyBBR0dSRUdBVElPTiBNSURETEVXQVJFXG4vLyB0b3VyU2NoZW1hLnByZSgnYWdncmVnYXRlJywgZnVuY3Rpb24obmV4dCkge1xuLy8gICB0aGlzLnBpcGVsaW5lKCkudW5zaGlmdCh7ICRtYXRjaDogeyBzZWNyZXRUb3VyOiB7ICRuZTogdHJ1ZSB9IH0gfSk7XG5cbi8vICAgY29uc29sZS5sb2codGhpcy5waXBlbGluZSgpKTtcbi8vICAgbmV4dCgpO1xuLy8gfSk7XG5cbmNvbnN0IFRvdXIgPSBtb25nb29zZS5tb2RlbCgnVG91cicsIHRvdXJTY2hlbWEpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFRvdXI7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ3BDLElBQU1DLE9BQU8sR0FBR0QsT0FBTyxDQUFDLFNBQVMsQ0FBQztBQUNsQztBQUNBOztBQUVBLElBQU1FLFVBQVUsR0FBRyxJQUFJSCxRQUFRLENBQUNJLE1BQU0sQ0FDcEM7RUFDRUMsSUFBSSxFQUFFO0lBQ0pDLElBQUksRUFBRUMsTUFBTTtJQUNaQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLEVBQUUseUJBQXlCLENBQUM7SUFDM0NDLE1BQU0sRUFBRSxJQUFJO0lBQ1pDLElBQUksRUFBRSxJQUFJO0lBQ1ZDLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRSx3REFBd0QsQ0FBQztJQUN6RUMsU0FBUyxFQUFFLENBQUMsRUFBRSxFQUFFLHdEQUF3RDtJQUN4RTtFQUNGLENBQUM7RUFDREMsSUFBSSxFQUFFTixNQUFNO0VBQ1pPLFFBQVEsRUFBRTtJQUNSUixJQUFJLEVBQUVTLE1BQU07SUFDWlAsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLDZCQUE2QjtFQUNoRCxDQUFDO0VBQ0RRLFlBQVksRUFBRTtJQUNaVixJQUFJLEVBQUVTLE1BQU07SUFDWlAsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLCtCQUErQjtFQUNsRCxDQUFDO0VBQ0RTLFVBQVUsRUFBRTtJQUNWWCxJQUFJLEVBQUVDLE1BQU07SUFDWkMsUUFBUSxFQUFFLENBQUMsSUFBSSxFQUFFLCtCQUErQixDQUFDO0lBQ2pELFFBQU07TUFDSlUsTUFBTSxFQUFFLENBQUMsTUFBTSxF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","map":{"version":3,"names":["mongoose","require","slugify","tourSchema","Schema","name","type","String","required","unique","trim","maxlength","minlength","slug","duration","Number","maxGroupSize","difficulty","values","message","ratingsAverage","min","max","set","val","Math","round","ratingsQuantity","price","priceDiscount","validate","validator","summary","description","imageCover","images","createdAt","Date","now","select","startDates","secretTour","Boolean","startLocation","coordinates","address","locations","day","guides","ObjectId","ref","toJSON","virtuals","toObject","index","virtual","get","foreignField","localField","pre","next","lower","find","$ne","start","populate","path","Tour","model","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/models/","sources":["tourModel.js"],"sourcesContent":["const mongoose = require('mongoose');\nconst slugify = require('slugify');\n// const User = require('./userModel');\n// const validator = require('validator');\n\nconst tourSchema = new mongoose.Schema(\n  {\n    name: {\n      type: String,\n      required: [true, 'A tour must have a name'],\n      unique: true,\n      trim: true,\n      maxlength: [40, 'A tour name must have less or equal then 40 characters'],\n      minlength: [10, 'A tour name must have more or equal then 10 characters'],\n      // validate: [validator.isAlpha, 'Tour name must only contain characters']\n    },\n    slug: String,\n    duration: {\n      type: Number,\n      required: [true, 'A tour must have a duration'],\n    },\n    maxGroupSize: {\n      type: Number,\n      required: [true, 'A tour must have a group size'],\n    },\n    difficulty: {\n      type: String,\n      required: [true, 'A tour must have a difficulty'],\n      enum: {\n        values: ['easy', 'medium', 'difficult'],\n        message: 'Difficulty is either: easy, medium, difficult',\n      },\n    },\n    ratingsAverage: {\n      type: Number,\n      default: 4.5,\n      min: [1, 'Rating must be above 1.0'],\n      max: [5, 'Rating must be below 5.0'],\n      set: (val) => Math.round(val * 10) / 10, // 4.666666, 46.6666, 47, 4.7\n    },\n    ratingsQuantity: {\n      type: Number,\n      default: 0,\n    },\n    price: {\n      type: Number,\n      required: [true, 'A tour must have a price'],\n    },\n    priceDiscount: {\n      type: Number,\n      validate: {\n        validator: function (val) {\n          // this only points to current doc on NEW document creation\n          return val < this.price;\n        },\n        message: 'Discount price ({VALUE}) should be below regular price',\n      },\n    },\n    summary: {\n      type: String,\n      trim: true,\n      required: [true, 'A tour must have a description'],\n    },\n    description: {\n      type: String,\n      trim: true,\n    },\n    imageCover: {\n      type: String,\n      required: [true, 'A tour must have a cover image'],\n    },\n    images: [String],\n    createdAt: {\n      type: Date,\n      default: Date.now(),\n      select: false,\n    },\n    startDates: [Date],\n    secretTour: {\n      type: Boolean,\n      default: false,\n    },\n    startLocation: {\n      // GeoJSON\n      type: {\n        type: String,\n        default: 'Point',\n        enum: ['Point'],\n      },\n      coordinates: [Number],\n      address: String,\n      description: String,\n    },\n    locations: [\n      {\n        type: {\n          type: String,\n          default: 'Point',\n          enum: ['Point'],\n        },\n        coordinates: [Number],\n        address: String,\n        description: String,\n        day: Number,\n      },\n    ],\n    guides: [\n      {\n        type: mongoose.Schema.ObjectId,\n        ref: 'User',\n      },\n    ],\n  },\n  {\n    toJSON: { virtuals: true },\n    toObject: { virtuals: true },\n  },\n);\n\n// tourSchema.index({ price: 1 });\ntourSchema.index({ price: 1, ratingsAverage: -1 });\ntourSchema.index({ slug: 1 });\ntourSchema.index({ startLocation: '2dsphere' });\n\ntourSchema.virtual('durationWeeks').get(function () {\n  return this.duration / 7;\n});\n\n// Virtual populate\ntourSchema.virtual('reviews', {\n  ref: 'Review',\n  foreignField: 'tour',\n  localField: '_id',\n});\n\n// DOCUMENT MIDDLEWARE: runs before .save() and .create()\ntourSchema.pre('save', function (next) {\n  this.slug = slugify(this.name, { lower: true });\n  next();\n});\n\n// tourSchema.pre('save', async function(next) {\n//   const guidesPromises = this.guides.map(async id => await User.findById(id));\n//   this.guides = await Promise.all(guidesPromises);\n//   next();\n// });\n\n// tourSchema.pre('save', function(next) {\n//   console.log('Will save document...');\n//   next();\n// });\n\n// tourSchema.post('save', function(doc, next) {\n//   console.log(doc);\n//   next();\n// });\n\n// QUERY MIDDLEWARE\n// tourSchema.pre('find', function(next) {\ntourSchema.pre(/^find/, function (next) {\n  this.find({ secretTour: { $ne: true } });\n\n  this.start = Date.now();\n  next();\n});\n\ntourSchema.pre(/^find/, function (next) {\n  this.populate({\n    path: 'guides',\n    select: '-__v -passwordChangedAt',\n  });\n\n  next();\n});\n\n// tourSchema.post(/^find/, function(docs, next) {\n//   console.log(`Query took ${Date.now() - this.start} milliseconds!`);\n//   next();\n// });\n\n// AGGREGATION MIDDLEWARE\n// tourSchema.pre('aggregate', function(next) {\n//   this.pipeline().unshift({ $match: { secretTour: { $ne: true } } });\n\n//   console.log(this.pipeline());\n//   next();\n// });\n\nconst Tour = mongoose.model('Tour', tourSchema);\n\nmodule.exports = Tour;\n"],"mappings":"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","ignoreList":[]}},"mtime":1762502227726},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/catchAsync.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nmodule.exports = function (fn) {\n  return function (req, res, next) {\n    fn(req, res, next)[\"catch\"](function (err) {\n      return next(err);\n    });\n  };\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiZm4iLCJyZXEiLCJyZXMiLCJuZXh0IiwiZXJyIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL3V0aWxzLyIsInNvdXJjZXMiOlsiY2F0Y2hBc3luYy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IChmbikgPT4ge1xuICByZXR1cm4gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgZm4ocmVxLCByZXMsIG5leHQpLmNhdGNoKChlcnIpID0+IG5leHQoZXJyKSk7XG4gIH07XG59O1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBQSxNQUFNLENBQUNDLE9BQU8sR0FBRyxVQUFDQyxFQUFFLEVBQUs7RUFDdkIsT0FBTyxVQUFDQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFLO0lBQ3pCSCxFQUFFLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLENBQUMsU0FBTSxDQUFDLFVBQUNDLEdBQUc7TUFBQSxPQUFLRCxJQUFJLENBQUNDLEdBQUcsQ0FBQztJQUFBLEVBQUM7RUFDOUMsQ0FBQztBQUNILENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=","map":{"version":3,"names":["module","exports","fn","req","res","next","err"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["catchAsync.js"],"sourcesContent":["module.exports = (fn) => {\n  return (req, res, next) => {\n    fn(req, res, next).catch((err) => next(err));\n  };\n};\n"],"mappings":";;AAAAA,MAAM,CAACC,OAAO,GAAG,UAACC,EAAE,EAAK;EACvB,OAAO,UAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,EAAK;IACzBH,EAAE,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,CAAC,SAAM,CAAC,UAACC,GAAG;MAAA,OAAKD,IAAI,CAACC,GAAG,CAAC;IAAA,EAAC;EAC9C,CAAC;AACH,CAAC","ignoreList":[]}},"mtime":1762243431370},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/templates/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/templates/PasswordResetEmail.jsx\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\nvar _BaseEmailTemplate = _interopRequireDefault(require(\"./BaseEmailTemplate\"));\nvar _react = _interopRequireDefault(require(\"react\"));\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { \"default\": e }; }\nvar PasswordResetEmail = function PasswordResetEmail(_ref) {\n  var firstName = _ref.firstName,\n    url = _ref.url;\n  var passwordUpdateContent = /*#__PURE__*/_react[\"default\"].createElement(_react[\"default\"].Fragment, null, /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"Hi \", firstName, \" \\uD83C\\uDF89\\uD83D\\uDE4F\"), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"Forgot your password? Submit a PATCH request with your new password and passwordConfirm to:\", /*#__PURE__*/_react[\"default\"].createElement(\"a\", {\n    href: url\n  }, url), \". If you didn't forget your password, please ignore this email!\"), /*#__PURE__*/_react[\"default\"].createElement(\"p\", null, \"(Website for this action not yet implemented.)\"));\n  return /*#__PURE__*/_react[\"default\"].createElement(_BaseEmailTemplate[\"default\"], {\n    subject: \"Reset your password\",\n    firstName: firstName,\n    content: passwordUpdateContent,\n    buttonLink: url,\n    buttonText: \"Reset your password\"\n  });\n};\nvar _default = exports[\"default\"] = PasswordResetEmail;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfQmFzZUVtYWlsVGVtcGxhdGUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdCIsImUiLCJfX2VzTW9kdWxlIiwiUGFzc3dvcmRSZXNldEVtYWlsIiwiX3JlZiIsImZpcnN0TmFtZSIsInVybCIsInBhc3N3b3JkVXBkYXRlQ29udGVudCIsImNyZWF0ZUVsZW1lbnQiLCJGcmFnbWVudCIsImhyZWYiLCJzdWJqZWN0IiwiY29udGVudCIsImJ1dHRvbkxpbmsiLCJidXR0b25UZXh0IiwiX2RlZmF1bHQiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvYW5hYXJldmFkemUvUHJvamVjdHMvbmF0b3Vycy9iYWNrZW5kL3RlbXBsYXRlcy8iLCJzb3VyY2VzIjpbIlBhc3N3b3JkUmVzZXRFbWFpbC5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2VFbWFpbFRlbXBsYXRlIGZyb20gJy4vQmFzZUVtYWlsVGVtcGxhdGUnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcblxuY29uc3QgUGFzc3dvcmRSZXNldEVtYWlsID0gKHsgZmlyc3ROYW1lLCB1cmwgfSkgPT4ge1xuICBjb25zdCBwYXNzd29yZFVwZGF0ZUNvbnRlbnQgPSAoXG4gICAgPFJlYWN0LkZyYWdtZW50PlxuICAgICAgPHA+SGkge2ZpcnN0TmFtZX0g8J+OifCfmY88L3A+XG4gICAgICA8cD5cbiAgICAgICAgRm9yZ290IHlvdXIgcGFzc3dvcmQ/IFN1Ym1pdCBhIFBBVENIIHJlcXVlc3Qgd2l0aCB5b3VyIG5ldyBwYXNzd29yZCBhbmRcbiAgICAgICAgcGFzc3dvcmRDb25maXJtIHRvOlxuICAgICAgICA8YSBocmVmPXt1cmx9Pnt1cmx9PC9hPi4gSWYgeW91IGRpZG4ndCBmb3JnZXQgeW91ciBwYXNzd29yZCwgcGxlYXNlXG4gICAgICAgIGlnbm9yZSB0aGlzIGVtYWlsIVxuICAgICAgPC9wPlxuICAgICAgPHA+KFdlYnNpdGUgZm9yIHRoaXMgYWN0aW9uIG5vdCB5ZXQgaW1wbGVtZW50ZWQuKTwvcD5cbiAgICA8L1JlYWN0LkZyYWdtZW50PlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPEJhc2VFbWFpbFRlbXBsYXRlXG4gICAgICBzdWJqZWN0PVwiUmVzZXQgeW91ciBwYXNzd29yZFwiXG4gICAgICBmaXJzdE5hbWU9e2ZpcnN0TmFtZX1cbiAgICAgIGNvbnRlbnQ9e3Bhc3N3b3JkVXBkYXRlQ29udGVudH1cbiAgICAgIGJ1dHRvbkxpbms9e3VybH1cbiAgICAgIGJ1dHRvblRleHQ9XCJSZXNldCB5b3VyIHBhc3N3b3JkXCJcbiAgICAvPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUGFzc3dvcmRSZXNldEVtYWlsO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFBQSxrQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQTBCLFNBQUFELHVCQUFBRyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsZ0JBQUFBLENBQUE7QUFFMUIsSUFBTUUsa0JBQWtCLEdBQUcsU0FBckJBLGtCQUFrQkEsQ0FBQUMsSUFBQSxFQUEyQjtFQUFBLElBQXJCQyxTQUFTLEdBQUFELElBQUEsQ0FBVEMsU0FBUztJQUFFQyxHQUFHLEdBQUFGLElBQUEsQ0FBSEUsR0FBRztFQUMxQyxJQUFNQyxxQkFBcUIsZ0JBQ3pCUCxNQUFBLFlBQUFRLGFBQUEsQ0FBQ1IsTUFBQSxXQUFLLENBQUNTLFFBQVEscUJBQ2JULE1BQUEsWUFBQVEsYUFBQSxZQUFHLEtBQUcsRUFBQ0gsU0FBUyxFQUFDLDJCQUFRLENBQUMsZUFDMUJMLE1BQUEsWUFBQVEsYUFBQSxZQUFHLDZGQUdELGVBQUFSLE1BQUEsWUFBQVEsYUFBQTtJQUFHRSxJQUFJLEVBQUVKO0VBQUksR0FBRUEsR0FBTyxDQUFDLG1FQUV0QixDQUFDLGVBQ0pOLE1BQUEsWUFBQVEsYUFBQSxZQUFHLGdEQUFpRCxDQUN0QyxDQUNqQjtFQUVELG9CQUNFUixNQUFBLFlBQUFRLGFBQUEsQ0FBQ1gsa0JBQUEsV0FBaUI7SUFDaEJjLE9BQU8sRUFBQyxxQkFBcUI7SUFDN0JOLFNBQVMsRUFBRUEsU0FBVTtJQUNyQk8sT0FBTyxFQUFFTCxxQkFBc0I7SUFDL0JNLFVBQVUsRUFBRVAsR0FBSTtJQUNoQlEsVUFBVSxFQUFDO0VBQXFCLENBQ2pDLENBQUM7QUFFTixDQUFDO0FBQUMsSUFBQUMsUUFBQSxHQUFBQyxPQUFBLGNBRWFiLGtCQUFrQiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["_BaseEmailTemplate","_interopRequireDefault","require","_react","e","__esModule","PasswordResetEmail","_ref","firstName","url","passwordUpdateContent","createElement","Fragment","href","subject","content","buttonLink","buttonText","_default","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/templates/","sources":["PasswordResetEmail.jsx"],"sourcesContent":["import BaseEmailTemplate from './BaseEmailTemplate';\nimport React from 'react';\n\nconst PasswordResetEmail = ({ firstName, url }) => {\n  const passwordUpdateContent = (\n    <React.Fragment>\n      <p>Hi {firstName} </p>\n      <p>\n        Forgot your password? Submit a PATCH request with your new password and\n        passwordConfirm to:\n        <a href={url}>{url}</a>. If you didn't forget your password, please\n        ignore this email!\n      </p>\n      <p>(Website for this action not yet implemented.)</p>\n    </React.Fragment>\n  );\n\n  return (\n    <BaseEmailTemplate\n      subject=\"Reset your password\"\n      firstName={firstName}\n      content={passwordUpdateContent}\n      buttonLink={url}\n      buttonText=\"Reset your password\"\n    />\n  );\n};\n\nexport default PasswordResetEmail;\n"],"mappings":";;;;;;AAAA,IAAAA,kBAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,MAAA,GAAAF,sBAAA,CAAAC,OAAA;AAA0B,SAAAD,uBAAAG,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,gBAAAA,CAAA;AAE1B,IAAME,kBAAkB,GAAG,SAArBA,kBAAkBA,CAAAC,IAAA,EAA2B;EAAA,IAArBC,SAAS,GAAAD,IAAA,CAATC,SAAS;IAAEC,GAAG,GAAAF,IAAA,CAAHE,GAAG;EAC1C,IAAMC,qBAAqB,gBACzBP,MAAA,YAAAQ,aAAA,CAACR,MAAA,WAAK,CAACS,QAAQ,qBACbT,MAAA,YAAAQ,aAAA,YAAG,KAAG,EAACH,SAAS,EAAC,2BAAQ,CAAC,eAC1BL,MAAA,YAAAQ,aAAA,YAAG,6FAGD,eAAAR,MAAA,YAAAQ,aAAA;IAAGE,IAAI,EAAEJ;EAAI,GAAEA,GAAO,CAAC,mEAEtB,CAAC,eACJN,MAAA,YAAAQ,aAAA,YAAG,gDAAiD,CACtC,CACjB;EAED,oBACER,MAAA,YAAAQ,aAAA,CAACX,kBAAA,WAAiB;IAChBc,OAAO,EAAC,qBAAqB;IAC7BN,SAAS,EAAEA,SAAU;IACrBO,OAAO,EAAEL,qBAAsB;IAC/BM,UAAU,EAAEP,GAAI;IAChBQ,UAAU,EAAC;EAAqB,CACjC,CAAC;AAEN,CAAC;AAAC,IAAAC,QAAA,GAAAC,OAAA,cAEab,kBAAkB","ignoreList":[]}},"mtime":1765352157552},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/handlerFactory.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar catchAsync = require('./../utils/catchAsync');\nvar appError = require('./../utils/appError');\nvar APIFeatures = require('../utils/apiFeatures');\nexports.deleteOne = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next) {\n      var doc;\n      return _regenerator().w(function (_context) {\n        while (1) switch (_context.n) {\n          case 0:\n            _context.n = 1;\n            return Model.findByIdAndDelete(req.params.id);\n          case 1:\n            doc = _context.v;\n            if (doc) {\n              _context.n = 2;\n              break;\n            }\n            return _context.a(2, next(new appError('No document found with that ID', 404)));\n          case 2:\n            res.status(204).json({\n              status: 'success',\n              data: {\n                doc: null\n              }\n            });\n          case 3:\n            return _context.a(2);\n        }\n      }, _callee);\n    }));\n    return function (_x, _x2, _x3) {\n      return _ref.apply(this, arguments);\n    };\n  }());\n};\nexports.updateOne = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n      var doc;\n      return _regenerator().w(function (_context2) {\n        while (1) switch (_context2.n) {\n          case 0:\n            _context2.n = 1;\n            return Model.findByIdAndUpdate(req.params.id, req.body, {\n              \"new\": true,\n              runValidators: true\n            });\n          case 1:\n            doc = _context2.v;\n            if (doc) {\n              _context2.n = 2;\n              break;\n            }\n            return _context2.a(2, next(new appError('No document found with that ID', 404)));\n          case 2:\n            res.status(200).json({\n              status: 'success',\n              data: {\n                doc: doc\n              }\n            });\n          case 3:\n            return _context2.a(2);\n        }\n      }, _callee2);\n    }));\n    return function (_x4, _x5, _x6) {\n      return _ref2.apply(this, arguments);\n    };\n  }());\n};\nexports.createOne = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(req, res, next) {\n      var newDoc;\n      return _regenerator().w(function (_context3) {\n        while (1) switch (_context3.n) {\n          case 0:\n            _context3.n = 1;\n            return Model.create(req.body);\n          case 1:\n            newDoc = _context3.v;\n            res.status(201).json({\n              status: 'success',\n              data: {\n                data: newDoc\n              }\n            });\n          case 2:\n            return _context3.a(2);\n        }\n      }, _callee3);\n    }));\n    return function (_x7, _x8, _x9) {\n      return _ref3.apply(this, arguments);\n    };\n  }());\n};\nexports.getOne = function (Model, popOptions) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n      var query, doc;\n      return _regenerator().w(function (_context4) {\n        while (1) switch (_context4.n) {\n          case 0:\n            // populate will fill up guides with the actual data but only in QUERY, not in database\n            // This will populate with EVERY FIELD in guides\n            // const tour = await Tour.findById(req.params.id).populate('guides');\n            query = Model.findById(req.params.id);\n            if (popOptions) query = query.populate(popOptions);\n            _context4.n = 1;\n            return query;\n          case 1:\n            doc = _context4.v;\n            if (doc) {\n              _context4.n = 2;\n              break;\n            }\n            return _context4.a(2, next(new appError('No document found with that ID', 404)));\n          case 2:\n            res.status(200).json({\n              status: 'success',\n              data: {\n                data: doc\n              }\n            });\n          case 3:\n            return _context4.a(2);\n        }\n      }, _callee4);\n    }));\n    return function (_x0, _x1, _x10) {\n      return _ref4.apply(this, arguments);\n    };\n  }());\n};\nexports.getAll = function (Model) {\n  return catchAsync(/*#__PURE__*/function () {\n    var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n      var filter, features, doc;\n      return _regenerator().w(function (_context5) {\n        while (1) switch (_context5.n) {\n          case 0:\n            // To allow for nested GET reviews on tour (hack)\n            filter = {};\n            if (req.params.tourId) filter = {\n              tour: req.params.tourId\n            };\n\n            // EXECUTE QUERY\n            features = new APIFeatures(Model.find(filter), req.query).filter().sort().limitFields().paginate();\n            _context5.n = 1;\n            return features.query;\n          case 1:\n            doc = _context5.v;\n            res.status(200).json({\n              status: 'success',\n              results: doc.length,\n              data: {\n                doc: doc\n              }\n            });\n          case 2:\n            return _context5.a(2);\n        }\n      }, _callee5);\n    }));\n    return function (_x11, _x12, _x13) {\n      return _ref5.apply(this, arguments);\n    };\n  }());\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsImNhdGNoQXN5bmMiLCJyZXF1aXJlIiwiYXBwRXJyb3IiLCJBUElGZWF0dXJlcyIsImV4cG9ydHMiLCJkZWxldGVPbmUiLCJNb2RlbCIsIl9yZWYiLCJfY2FsbGVlIiwicmVxIiwicmVzIiwibmV4dCIsImRvYyIsIl9jb250ZXh0IiwiZmluZEJ5SWRBbmREZWxldGUiLCJwYXJhbXMiLCJpZCIsInN0YXR1cyIsImpzb24iLCJkYXRhIiwiX3giLCJfeDIiLCJfeDMiLCJ1cGRhdGVPbmUiLCJfcmVmMiIsIl9jYWxsZWUyIiwiX2NvbnRleHQyIiwiZmluZEJ5SWRBbmRVcGRhdGUiLCJib2R5IiwicnVuVmFsaWRhdG9ycyIsIl94NCIsIl94NSIsIl94NiIsImNyZWF0ZU9uZSIsIl9yZWYzIiwiX2NhbGxlZTMiLCJuZXdEb2MiLCJfY29udGV4dDMiLCJfeDciLCJfeDgiLCJfeDkiLCJnZXRPbmUiLCJwb3BPcHRpb25zIiwiX3JlZjQiLCJfY2FsbGVlNCIsInF1ZXJ5IiwiX2NvbnRleHQ0IiwiZmluZEJ5SWQiLCJwb3B1bGF0ZSIsIl94MCIsIl94MSIsIl94MTAiLCJnZXRBbGwiLCJfcmVmNSIsIl9jYWxsZWU1IiwiZmlsdGVyIiwiZmVhdHVyZXMiLCJfY29udGV4dDUiLCJ0b3VySWQiLCJ0b3VyIiwiZmluZCIsInNvcnQiLCJsaW1pdEZpZWxkcyIsInBhZ2luYXRlIiwicmVzdWx0cyIsIl94MTEiLCJfeDEyIiwiX3gxMyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbImhhbmRsZXJGYWN0b3J5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGNhdGNoQXN5bmMgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2NhdGNoQXN5bmMnKTtcbmNvbnN0IGFwcEVycm9yID0gcmVxdWlyZSgnLi8uLi91dGlscy9hcHBFcnJvcicpO1xuY29uc3QgQVBJRmVhdHVyZXMgPSByZXF1aXJlKCcuLi91dGlscy9hcGlGZWF0dXJlcycpO1xuXG5leHBvcnRzLmRlbGV0ZU9uZSA9IChNb2RlbCkgPT5cbiAgY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgICBjb25zdCBkb2MgPSBhd2FpdCBNb2RlbC5maW5kQnlJZEFuZERlbGV0ZShyZXEucGFyYW1zLmlkKTtcblxuICAgIGlmICghZG9jKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ05vIGRvY3VtZW50IGZvdW5kIHdpdGggdGhhdCBJRCcsIDQwNCkpO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjA0KS5qc29uKHtcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgZGF0YToge1xuICAgICAgICBkb2M6IG51bGwsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuZXhwb3J0cy51cGRhdGVPbmUgPSAoTW9kZWwpID0+XG4gIGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgY29uc3QgZG9jID0gYXdhaXQgTW9kZWwuZmluZEJ5SWRBbmRVcGRhdGUocmVxLnBhcmFtcy5pZCwgcmVxLmJvZHksIHtcbiAgICAgIG5ldzogdHJ1ZSxcbiAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXG4gICAgfSk7XG5cbiAgICBpZiAoIWRvYykge1xuICAgICAgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdObyBkb2N1bWVudCBmb3VuZCB3aXRoIHRoYXQgSUQnLCA0MDQpKTtcbiAgICB9XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSk7XG5cbmV4cG9ydHMuY3JlYXRlT25lID0gKE1vZGVsKSA9PlxuICBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IG5ld0RvYyA9IGF3YWl0IE1vZGVsLmNyZWF0ZShyZXEuYm9keSk7XG4gICAgcmVzLnN0YXR1cygyMDEpLmpzb24oe1xuICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICBkYXRhOiB7IGRhdGE6IG5ld0RvYyB9LFxuICAgIH0pO1xuICB9KTtcblxuZXhwb3J0cy5nZXRPbmUgPSAoTW9kZWwsIHBvcE9wdGlvbnMpID0+XG4gIGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgLy8gcG9wdWxhdGUgd2lsbCBmaWxsIHVwIGd1aWRlcyB3aXRoIHRoZSBhY3R1YWwgZGF0YSBidXQgb25seSBpbiBRVUVSWSwgbm90IGluIGRhdGFiYXNlXG4gICAgLy8gVGhpcyB3aWxsIHBvcHVsYXRlIHdpdGggRVZFUlkgRklFTEQgaW4gZ3VpZGVzXG4gICAgLy8gY29uc3QgdG91ciA9IGF3YWl0IFRvdXIuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCkucG9wdWxhdGUoJ2d1aWRlcycpO1xuXG4gICAgbGV0IHF1ZXJ5ID0gTW9kZWwuZmluZEJ5SWQocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKHBvcE9wdGlvbnMpIHF1ZXJ5ID0gcXVlcnkucG9wdWxhdGUocG9wT3B0aW9ucyk7XG5cbiAgICBjb25zdCBkb2MgPSBhd2FpdCBxdWVyeTtcblxuICAgIGlmICghZG9jKSB7XG4gICAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ05vIGRvY3VtZW50IGZvdW5kIHdpdGggdGhhdCBJRCcsIDQwNCkpO1xuICAgIH1cblxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgZGF0YToge1xuICAgICAgICBkYXRhOiBkb2MsXG4gICAgICB9LFxuICAgIH0pO1xuICB9KTtcblxuZXhwb3J0cy5nZXRBbGwgPSAoTW9kZWwpID0+XG4gIGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gICAgLy8gVG8gYWxsb3cgZm9yIG5lc3RlZCBHRVQgcmV2aWV3cyBvbiB0b3VyIChoYWNrKVxuICAgIGxldCBmaWx0ZXIgPSB7fTtcbiAgICBpZiAocmVxLnBhcmFtcy50b3VySWQpIGZpbHRlciA9IHsgdG91cjogcmVxLnBhcmFtcy50b3VySWQgfTtcblxuICAgIC8vIEVYRUNVVEUgUVVFUllcbiAgICBjb25zdCBmZWF0dXJlcyA9IG5ldyBBUElGZWF0dXJlcyhNb2RlbC5maW5kKGZpbHRlciksIHJlcS5xdWVyeSlcbiAgICAgIC5maWx0ZXIoKVxuICAgICAgLnNvcnQoKVxuICAgICAgLmxpbWl0RmllbGRzKClcbiAgICAgIC5wYWdpbmF0ZSgpO1xuXG4gICAgY29uc3QgZG9jID0gYXdhaXQgZmVhdHVyZXMucXVlcnk7XG5cbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgIHJlc3VsdHM6IGRvYy5sZW5ndGgsXG4gICAgICBkYXRhOiB7XG4gICAgICAgIGRvYyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0pO1xuIl0sIm1hcHBpbmdzIjoiOzswQkFDQSx1S0FBQUEsQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsd0JBQUFDLE1BQUEsR0FBQUEsTUFBQSxPQUFBQyxDQUFBLEdBQUFGLENBQUEsQ0FBQUcsUUFBQSxrQkFBQUMsQ0FBQSxHQUFBSixDQUFBLENBQUFLLFdBQUEsOEJBQUFDLEVBQUFOLENBQUEsRUFBQUUsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUMsQ0FBQSxHQUFBTCxDQUFBLElBQUFBLENBQUEsQ0FBQU0sU0FBQSxZQUFBQyxTQUFBLEdBQUFQLENBQUEsR0FBQU8sU0FBQSxFQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsTUFBQSxDQUFBTCxDQUFBLENBQUFDLFNBQUEsVUFBQUssbUJBQUEsQ0FBQUgsQ0FBQSx1QkFBQVYsQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsUUFBQUUsQ0FBQSxFQUFBQyxDQUFBLEVBQUFHLENBQUEsRUFBQUksQ0FBQSxNQUFBQyxDQUFBLEdBQUFYLENBQUEsUUFBQVksQ0FBQSxPQUFBQyxDQUFBLEtBQUFGLENBQUEsS0FBQWIsQ0FBQSxLQUFBZ0IsQ0FBQSxFQUFBcEIsQ0FBQSxFQUFBcUIsQ0FBQSxFQUFBQyxDQUFBLEVBQUFOLENBQUEsRUFBQU0sQ0FBQSxDQUFBQyxJQUFBLENBQUF2QixDQUFBLE1BQUFzQixDQUFBLFdBQUFBLEVBQUFyQixDQUFBLEVBQUFDLENBQUEsV0FBQU0sQ0FBQSxHQUFBUCxDQUFBLEVBQUFRLENBQUEsTUFBQUcsQ0FBQSxHQUFBWixDQUFBLEVBQUFtQixDQUFBLENBQUFmLENBQUEsR0FBQUYsQ0FBQSxFQUFBbUIsQ0FBQSxnQkFBQUMsRUFBQXBCLENBQUEsRUFBQUUsQ0FBQSxTQUFBSyxDQUFBLEdBQUFQLENBQUEsRUFBQVUsQ0FBQSxHQUFBUixDQUFBLEVBQUFI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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","catchAsync","require","appError","APIFeatures","exports","deleteOne","Model","_ref","_callee","req","res","next","doc","_context","findByIdAndDelete","params","id","status","json","data","_x","_x2","_x3","updateOne","_ref2","_callee2","_context2","findByIdAndUpdate","body","runValidators","_x4","_x5","_x6","createOne","_ref3","_callee3","newDoc","_context3","_x7","_x8","_x9","getOne","popOptions","_ref4","_callee4","query","_context4","findById","populate","_x0","_x1","_x10","getAll","_ref5","_callee5","filter","features","_context5","tourId","tour","find","sort","limitFields","paginate","results","_x11","_x12","_x13"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["handlerFactory.js"],"sourcesContent":["const catchAsync = require('./../utils/catchAsync');\nconst appError = require('./../utils/appError');\nconst APIFeatures = require('../utils/apiFeatures');\n\nexports.deleteOne = (Model) =>\n  catchAsync(async (req, res, next) => {\n    const doc = await Model.findByIdAndDelete(req.params.id);\n\n    if (!doc) {\n      return next(new appError('No document found with that ID', 404));\n    }\n\n    res.status(204).json({\n      status: 'success',\n      data: {\n        doc: null,\n      },\n    });\n  });\n\nexports.updateOne = (Model) =>\n  catchAsync(async (req, res, next) => {\n    const doc = await Model.findByIdAndUpdate(req.params.id, req.body, {\n      new: true,\n      runValidators: true,\n    });\n\n    if (!doc) {\n      return next(new appError('No document found with that ID', 404));\n    }\n\n    res.status(200).json({\n      status: 'success',\n      data: {\n        doc,\n      },\n    });\n  });\n\nexports.createOne = (Model) =>\n  catchAsync(async (req, res, next) => {\n    const newDoc = await Model.create(req.body);\n    res.status(201).json({\n      status: 'success',\n      data: { data: newDoc },\n    });\n  });\n\nexports.getOne = (Model, popOptions) =>\n  catchAsync(async (req, res, next) => {\n    // populate will fill up guides with the actual data but only in QUERY, not in database\n    // This will populate with EVERY FIELD in guides\n    // const tour = await Tour.findById(req.params.id).populate('guides');\n\n    let query = Model.findById(req.params.id);\n    if (popOptions) query = query.populate(popOptions);\n\n    const doc = await query;\n\n    if (!doc) {\n      return next(new appError('No document found with that ID', 404));\n    }\n\n    res.status(200).json({\n      status: 'success',\n      data: {\n        data: doc,\n      },\n    });\n  });\n\nexports.getAll = (Model) =>\n  catchAsync(async (req, res, next) => {\n    // To allow for nested GET reviews on tour (hack)\n    let filter = {};\n    if (req.params.tourId) filter = { tour: req.params.tourId };\n\n    // EXECUTE QUERY\n    const features = new APIFeatures(Model.find(filter), req.query)\n      .filter()\n      .sort()\n      .limitFields()\n      .paginate();\n\n    const doc = await features.query;\n\n    res.status(200).json({\n      status: 'success',\n      results: doc.length,\n      data: {\n        doc,\n      },\n    });\n  });\n"],"mappings":"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","ignoreList":[]}},"mtime":1762243430742},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/utils/apiFeatures.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _classCallCheck(a, n) { if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\"); }\nfunction _defineProperties(e, r) { for (var t = 0; t < r.length; t++) { var o = r[t]; o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o); } }\nfunction _createClass(e, r, t) { return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", { writable: !1 }), e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nvar APIFeatures = /*#__PURE__*/function () {\n  // Query is an object that is a result of calling a method like .find()\n  // Query String is URL (req.query) part ?sort=price&limit=10\n  function APIFeatures(query, queryString) {\n    _classCallCheck(this, APIFeatures);\n    this.query = query;\n    this.queryString = queryString;\n  }\n  return _createClass(APIFeatures, [{\n    key: \"filter\",\n    value: function filter() {\n      // 1A) FILTERING\n      var queryObj = _objectSpread({}, this.queryString);\n      var excludedFields = ['page', 'sort', 'limit', 'fields'];\n      excludedFields.forEach(function (el) {\n        return delete queryObj[el];\n      });\n\n      // 1B) ADVANCED FILTERING\n      var queryStr = JSON.stringify(queryObj);\n      queryStr = queryStr.replace(/\\b(gte|gt|lte|lt)\\b/g, function (match) {\n        return \"$\".concat(match);\n      });\n      this.query = this.query.find(JSON.parse(queryStr));\n      return this;\n    }\n  }, {\n    key: \"sort\",\n    value: function sort() {\n      if (this.queryString.sort) {\n        var sortBy = this.queryString.sort.split(',').join(' ');\n        this.query = this.query.sort(sortBy);\n      } else {\n        this.query = this.query.sort('-createdAt');\n      }\n      return this; // Crucial for chaining\n    }\n  }, {\n    key: \"limitFields\",\n    value: function limitFields() {\n      if (this.queryString.fields) {\n        var fields = this.queryString.fields.split(',').join(' ');\n        this.query = this.query.select(fields);\n      } else {\n        this.query = this.query.select('-__v');\n      }\n      return this; // Crucial for chaining\n    }\n  }, {\n    key: \"paginate\",\n    value: function paginate() {\n      var page = this.queryString.page * 1 || 1;\n      var limit = this.queryString.limit * 1 || 100;\n      var skip = (page - 1) * limit;\n      this.query = this.query.skip(skip).limit(limit);\n      return this; // Crucial for chaining\n    }\n  }]);\n}();\nmodule.exports = APIFeatures;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBUElGZWF0dXJlcyIsInF1ZXJ5IiwicXVlcnlTdHJpbmciLCJfY2xhc3NDYWxsQ2hlY2siLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJ2YWx1ZSIsImZpbHRlciIsInF1ZXJ5T2JqIiwiX29iamVjdFNwcmVhZCIsImV4Y2x1ZGVkRmllbGRzIiwiZm9yRWFjaCIsImVsIiwicXVlcnlTdHIiLCJKU09OIiwic3RyaW5naWZ5IiwicmVwbGFjZSIsIm1hdGNoIiwiY29uY2F0IiwiZmluZCIsInBhcnNlIiwic29ydCIsInNvcnRCeSIsInNwbGl0Iiwiam9pbiIsImxpbWl0RmllbGRzIiwiZmllbGRzIiwic2VsZWN0IiwicGFnaW5hdGUiLCJwYWdlIiwibGltaXQiLCJza2lwIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL2FuYWFyZXZhZHplL1Byb2plY3RzL25hdG91cnMvYmFja2VuZC91dGlscy8iLCJzb3VyY2VzIjpbImFwaUZlYXR1cmVzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEFQSUZlYXR1cmVzIHtcbiAgLy8gUXVlcnkgaXMgYW4gb2JqZWN0IHRoYXQgaXMgYSByZXN1bHQgb2YgY2FsbGluZyBhIG1ldGhvZCBsaWtlIC5maW5kKClcbiAgLy8gUXVlcnkgU3RyaW5nIGlzIFVSTCAocmVxLnF1ZXJ5KSBwYXJ0ID9zb3J0PXByaWNlJmxpbWl0PTEwXG4gIGNvbnN0cnVjdG9yKHF1ZXJ5LCBxdWVyeVN0cmluZykge1xuICAgIHRoaXMucXVlcnkgPSBxdWVyeTtcbiAgICB0aGlzLnF1ZXJ5U3RyaW5nID0gcXVlcnlTdHJpbmc7XG4gIH1cblxuICBmaWx0ZXIoKSB7XG4gICAgLy8gMUEpIEZJTFRFUklOR1xuICAgIGNvbnN0IHF1ZXJ5T2JqID0geyAuLi50aGlzLnF1ZXJ5U3RyaW5nIH07XG4gICAgY29uc3QgZXhjbHVkZWRGaWVsZHMgPSBbJ3BhZ2UnLCAnc29ydCcsICdsaW1pdCcsICdmaWVsZHMnXTtcbiAgICBleGNsdWRlZEZpZWxkcy5mb3JFYWNoKChlbCkgPT4gZGVsZXRlIHF1ZXJ5T2JqW2VsXSk7XG5cbiAgICAvLyAxQikgQURWQU5DRUQgRklMVEVSSU5HXG4gICAgbGV0IHF1ZXJ5U3RyID0gSlNPTi5zdHJpbmdpZnkocXVlcnlPYmopO1xuICAgIHF1ZXJ5U3RyID0gcXVlcnlTdHIucmVwbGFjZSgvXFxiKGd0ZXxndHxsdGV8bHQpXFxiL2csIChtYXRjaCkgPT4gYCQke21hdGNofWApO1xuXG4gICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuZmluZChKU09OLnBhcnNlKHF1ZXJ5U3RyKSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHNvcnQoKSB7XG4gICAgaWYgKHRoaXMucXVlcnlTdHJpbmcuc29ydCkge1xuICAgICAgY29uc3Qgc29ydEJ5ID0gdGhpcy5xdWVyeVN0cmluZy5zb3J0LnNwbGl0KCcsJykuam9pbignICcpO1xuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuc29ydChzb3J0QnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnF1ZXJ5ID0gdGhpcy5xdWVyeS5zb3J0KCctY3JlYXRlZEF0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7IC8vIENydWNpYWwgZm9yIGNoYWluaW5nXG4gIH1cblxuICBsaW1pdEZpZWxkcygpIHtcbiAgICBpZiAodGhpcy5xdWVyeVN0cmluZy5maWVsZHMpIHtcbiAgICAgIGNvbnN0IGZpZWxkcyA9IHRoaXMucXVlcnlTdHJpbmcuZmllbGRzLnNwbGl0KCcsJykuam9pbignICcpO1xuICAgICAgdGhpcy5xdWVyeSA9IHRoaXMucXVlcnkuc2VsZWN0KGZpZWxkcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5LnNlbGVjdCgnLV9fdicpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpczsgLy8gQ3J1Y2lhbCBmb3IgY2hhaW5pbmdcbiAgfVxuXG4gIHBhZ2luYXRlKCkge1xuICAgIGNvbnN0IHBhZ2UgPSB0aGlzLnF1ZXJ5U3RyaW5nLnBhZ2UgKiAxIHx8IDE7XG4gICAgY29uc3QgbGltaXQgPSB0aGlzLnF1ZXJ5U3RyaW5nLmxpbWl0ICogMSB8fCAxMDA7XG4gICAgY29uc3Qgc2tpcCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5LnNraXAoc2tpcCkubGltaXQobGltaXQpO1xuXG4gICAgcmV0dXJuIHRoaXM7IC8vIENydWNpYWwgZm9yIGNoYWluaW5nXG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBUElGZWF0dXJlcztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7SUFBTUEsV0FBVztFQUNmO0VBQ0E7RUFDQSxTQUFBQSxZQUFZQyxLQUFLLEVBQUVDLFdBQVcsRUFBRTtJQUFBQyxlQUFBLE9BQUFILFdBQUE7SUFDOUIsSUFBSSxDQUFDQyxLQUFLLEdBQUdBLEtBQUs7SUFDbEIsSUFBSSxDQUFDQyxXQUFXLEdBQUdBLFdBQVc7RUFDaEM7RUFBQyxPQUFBRSxZQUFBLENBQUFKLFdBQUE7SUFBQUssR0FBQTtJQUFBQyxLQUFBLEVBRUQsU0FBQUMsTUFBTUEsQ0FBQSxFQUFHO01BQ1A7TUFDQSxJQUFNQyxRQUFRLEdBQUFDLGFBQUEsS0FBUSxJQUFJLENBQUNQLFdBQVcsQ0FBRTtNQUN4QyxJQUFNUSxjQUFjLEdBQUcsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFBRSxRQUFRLENBQUM7TUFDMURBLGNBQWMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUNDLEVBQUU7UUFBQSxPQUFLLE9BQU9KLFFBQVEsQ0FBQ0ksRUFBRSxDQUFDO01BQUEsRUFBQzs7TUFFbkQ7TUFDQSxJQUFJQyxRQUFRLEdBQUdDLElBQUksQ0FBQ0MsU0FBUyxDQUFDUCxRQUFRLENBQUM7TUFDdkNLLFFBQVEsR0FBR0EsUUFBUSxDQUFDRyxPQUFPLENBQUMsc0JBQXNCLEVBQUUsVUFBQ0MsS0FBSztRQUFBLFdBQUFDLE1BQUEsQ0FBU0QsS0FBSztNQUFBLENBQUUsQ0FBQztNQUUzRSxJQUFJLENBQUNoQixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNrQixJQUFJLENBQUNMLElBQUksQ0FBQ00sS0FBSyxDQUFDUCxRQUFRLENBQUMsQ0FBQztNQUVsRCxPQUFPLElBQUk7SUFDYjtFQUFDO0lBQUFSLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFlLElBQUlBLENBQUEsRUFBRztNQUNMLElBQUksSUFBSSxDQUFDbkIsV0FBVyxDQUFDbUIsSUFBSSxFQUFFO1FBQ3pCLElBQU1DLE1BQU0sR0FBRyxJQUFJLENBQUNwQixXQUFXLENBQUNtQixJQUFJLENBQUNFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQztRQUN6RCxJQUFJLENBQUN2QixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNvQixJQUFJLENBQUNDLE1BQU0sQ0FBQztNQUN0QyxDQUFDLE1BQU07UUFDTCxJQUFJLENBQUNyQixLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUNvQixJQUFJLENBQUMsWUFBWSxDQUFDO01BQzVDO01BRUEsT0FBTyxJQUFJLENBQUMsQ0FBQztJQUNmO0VBQUM7SUFBQWhCLEdBQUE7SUFBQUMsS0FBQSxFQUVELFNBQUFtQixXQUFXQSxDQUFBLEVBQUc7TUFDWixJQUFJLElBQUksQ0FBQ3ZCLFdBQVcsQ0FBQ3dCLE1BQU0sRUFBRTtRQUMzQixJQUFNQSxNQUFNLEdBQUcsSUFBSSxDQUFDeEIsV0FBVyxDQUFDd0IsTUFBTSxDQUFDSCxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDM0QsSUFBSSxDQUFDdkIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFDMEIsTUFBTSxDQUFDRCxNQUFNLENBQUM7TUFDeEMsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDekIsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFDMEIsTUFBTSxDQUFDLE1BQU0sQ0FBQztNQUN4QztNQUNBLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDZjtFQUFDO0lBQUF0QixHQUFBO0lBQUFDLEtBQUEsRUFFRCxTQUFBc0IsUUFBUUEsQ0FBQSxFQUFHO01BQ1QsSUFBTUMsSUFBSSxHQUFHLElBQUksQ0FBQzNCLFdBQVcsQ0FBQzJCLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQztNQUMzQyxJQUFNQyxLQUFLLEdBQUcsSUFBSSxDQUFDNUIsV0FBVyxDQUFDNEIsS0FBSyxHQUFHLENBQUMsSUFBSSxHQUFHO01BQy9DLElBQU1DLElBQUksR0FBRyxDQUFDRixJQUFJLEdBQUcsQ0FBQyxJQUFJQyxLQUFLO01BRS9CLElBQUksQ0FBQzdCLEtBQUssR0FBRyxJQUFJLENBQUNBLEtBQUssQ0FBQzhCLElBQUksQ0FBQ0EsSUFBSSxDQUFDLENBQUNELEtBQUssQ0FBQ0EsS0FBSyxDQUFDO01BRS9DLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDZjtFQUFDO0FBQUE7QUFHSEUsTUFBTSxDQUFDQyxPQUFPLEdBQUdqQyxXQUFXIiwiaWdub3JlTGlzdCI6W119","map":{"version":3,"names":["APIFeatures","query","queryString","_classCallCheck","_createClass","key","value","filter","queryObj","_objectSpread","excludedFields","forEach","el","queryStr","JSON","stringify","replace","match","concat","find","parse","sort","sortBy","split","join","limitFields","fields","select","paginate","page","limit","skip","module","exports"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/utils/","sources":["apiFeatures.js"],"sourcesContent":["class APIFeatures {\n  // Query is an object that is a result of calling a method like .find()\n  // Query String is URL (req.query) part ?sort=price&limit=10\n  constructor(query, queryString) {\n    this.query = query;\n    this.queryString = queryString;\n  }\n\n  filter() {\n    // 1A) FILTERING\n    const queryObj = { ...this.queryString };\n    const excludedFields = ['page', 'sort', 'limit', 'fields'];\n    excludedFields.forEach((el) => delete queryObj[el]);\n\n    // 1B) ADVANCED FILTERING\n    let queryStr = JSON.stringify(queryObj);\n    queryStr = queryStr.replace(/\\b(gte|gt|lte|lt)\\b/g, (match) => `$${match}`);\n\n    this.query = this.query.find(JSON.parse(queryStr));\n\n    return this;\n  }\n\n  sort() {\n    if (this.queryString.sort) {\n      const sortBy = this.queryString.sort.split(',').join(' ');\n      this.query = this.query.sort(sortBy);\n    } else {\n      this.query = this.query.sort('-createdAt');\n    }\n\n    return this; // Crucial for chaining\n  }\n\n  limitFields() {\n    if (this.queryString.fields) {\n      const fields = this.queryString.fields.split(',').join(' ');\n      this.query = this.query.select(fields);\n    } else {\n      this.query = this.query.select('-__v');\n    }\n    return this; // Crucial for chaining\n  }\n\n  paginate() {\n    const page = this.queryString.page * 1 || 1;\n    const limit = this.queryString.limit * 1 || 100;\n    const skip = (page - 1) * limit;\n\n    this.query = this.query.skip(skip).limit(limit);\n\n    return this; // Crucial for chaining\n  }\n}\n\nmodule.exports = APIFeatures;\n"],"mappings":";;;;;;;;;;;IAAMA,WAAW;EACf;EACA;EACA,SAAAA,YAAYC,KAAK,EAAEC,WAAW,EAAE;IAAAC,eAAA,OAAAH,WAAA;IAC9B,IAAI,CAACC,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,WAAW,GAAGA,WAAW;EAChC;EAAC,OAAAE,YAAA,CAAAJ,WAAA;IAAAK,GAAA;IAAAC,KAAA,EAED,SAAAC,MAAMA,CAAA,EAAG;MACP;MACA,IAAMC,QAAQ,GAAAC,aAAA,KAAQ,IAAI,CAACP,WAAW,CAAE;MACxC,IAAMQ,cAAc,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,CAAC;MAC1DA,cAAc,CAACC,OAAO,CAAC,UAACC,EAAE;QAAA,OAAK,OAAOJ,QAAQ,CAACI,EAAE,CAAC;MAAA,EAAC;;MAEnD;MACA,IAAIC,QAAQ,GAAGC,IAAI,CAACC,SAAS,CAACP,QAAQ,CAAC;MACvCK,QAAQ,GAAGA,QAAQ,CAACG,OAAO,CAAC,sBAAsB,EAAE,UAACC,KAAK;QAAA,WAAAC,MAAA,CAASD,KAAK;MAAA,CAAE,CAAC;MAE3E,IAAI,CAAChB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACkB,IAAI,CAACL,IAAI,CAACM,KAAK,CAACP,QAAQ,CAAC,CAAC;MAElD,OAAO,IAAI;IACb;EAAC;IAAAR,GAAA;IAAAC,KAAA,EAED,SAAAe,IAAIA,CAAA,EAAG;MACL,IAAI,IAAI,CAACnB,WAAW,CAACmB,IAAI,EAAE;QACzB,IAAMC,MAAM,GAAG,IAAI,CAACpB,WAAW,CAACmB,IAAI,CAACE,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;QACzD,IAAI,CAACvB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACoB,IAAI,CAACC,MAAM,CAAC;MACtC,CAAC,MAAM;QACL,IAAI,CAACrB,KAAK,GAAG,IAAI,CAACA,KAAK,CAACoB,IAAI,CAAC,YAAY,CAAC;MAC5C;MAEA,OAAO,IAAI,CAAC,CAAC;IACf;EAAC;IAAAhB,GAAA;IAAAC,KAAA,EAED,SAAAmB,WAAWA,CAAA,EAAG;MACZ,IAAI,IAAI,CAACvB,WAAW,CAACwB,MAAM,EAAE;QAC3B,IAAMA,MAAM,GAAG,IAAI,CAACxB,WAAW,CAACwB,MAAM,CAACH,KAAK,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;QAC3D,IAAI,CAACvB,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC0B,MAAM,CAACD,MAAM,CAAC;MACxC,CAAC,MAAM;QACL,IAAI,CAACzB,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC0B,MAAM,CAAC,MAAM,CAAC;MACxC;MACA,OAAO,IAAI,CAAC,CAAC;IACf;EAAC;IAAAtB,GAAA;IAAAC,KAAA,EAED,SAAAsB,QAAQA,CAAA,EAAG;MACT,IAAMC,IAAI,GAAG,IAAI,CAAC3B,WAAW,CAAC2B,IAAI,GAAG,CAAC,IAAI,CAAC;MAC3C,IAAMC,KAAK,GAAG,IAAI,CAAC5B,WAAW,CAAC4B,KAAK,GAAG,CAAC,IAAI,GAAG;MAC/C,IAAMC,IAAI,GAAG,CAACF,IAAI,GAAG,CAAC,IAAIC,KAAK;MAE/B,IAAI,CAAC7B,KAAK,GAAG,IAAI,CAACA,KAAK,CAAC8B,IAAI,CAACA,IAAI,CAAC,CAACD,KAAK,CAACA,KAAK,CAAC;MAE/C,OAAO,IAAI,CAAC,CAAC;IACf;EAAC;AAAA;AAGHE,MAAM,CAACC,OAAO,GAAGjC,WAAW","ignoreList":[]}},"mtime":1762243431370},"{\"assumptions\":{},\"sourceRoot\":\"/Users/anaarevadze/Projects/natours/backend/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/anaarevadze/Projects/natours/backend\",\"filename\":\"/Users/anaarevadze/Projects/natours/backend/controllers/authController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/anaarevadze/Projects/natours/backend\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-react-jsx\",\"visitor\":{\"JSXNamespacedName\":{\"enter\":[null]},\"JSXSpreadChild\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"JSXFragment\":{\"exit\":[null]},\"JSXElement\":{\"exit\":[null]},\"JSXAttribute\":{\"enter\":[null]}},\"options\":{\"pragma\":\"React.createElement\",\"pragmaFrag\":\"React.Fragment\",\"runtime\":\"classic\",\"throwIfNamespace\":true,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-react-display-name\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-react-pure-annotations\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{},\"externalDependencies\":[]},{\"key\":\"transform-explicit-resource-management\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"BlockStatement\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-sets-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-class-static-block\",\"visitor\":{\"ClassBody\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-private-property-in-object\",\"visitor\":{\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-class-properties\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-private-methods\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]}},\"options\":{\"loose\":\"#__internal__@babel/preset-env__prefer-false-but-true-is-ok-if-it-prevents-an-error\"},\"externalDependencies\":[]},{\"key\":\"transform-numeric-separator\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"BigIntLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-logical-assignment-operators\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-nullish-coalescing-operator\",\"visitor\":{\"LogicalExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-chaining\",\"visitor\":{\"_exploded\":true,\"OptionalCallExpression\":{\"enter\":[null]},\"OptionalMemberExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-json-strings\",\"visitor\":{\"_exploded\":true,\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-optional-catch-binding\",\"visitor\":{\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-generator-functions\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-rest-spread\",\"visitor\":{\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"DoWhileStatement\":{\"exit\":[null]},\"ForInStatement\":{\"exit\":[null]},\"ForStatement\":{\"exit\":[null]},\"WhileStatement\":{\"exit\":[null]},\"ForOfStatement\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-escapes\",\"visitor\":{\"Identifier\":{\"enter\":[null]},\"TemplateElement\":{\"enter\":[null]},\"_exploded\":true,\"StringLiteral\":{\"enter\":[null]},\"DirectiveLiteral\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null,null]},\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"StaticBlock\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]},\"AssignmentPattern\":{\"enter\":[null]},\"ArrayPattern\":{\"enter\":[null]},\"ObjectPattern\":{\"enter\":[null]},\"VoidPattern\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regenerator\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]},\"CallExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$48\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/anaarevadze/Projects/natours/backend/node_modules/@babel/preset-env/lib/index.js$49\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.28.5:development":{"value":{"code":"\"use strict\";\n\nfunction _regenerator() { /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */ var e, t, r = \"function\" == typeof Symbol ? Symbol : {}, n = r.iterator || \"@@iterator\", o = r.toStringTag || \"@@toStringTag\"; function i(r, n, o, i) { var c = n && n.prototype instanceof Generator ? n : Generator, u = Object.create(c.prototype); return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) { var i, c, u, f = 0, p = o || [], y = !1, G = { p: 0, n: 0, v: e, a: d, f: d.bind(e, 4), d: function d(t, r) { return i = t, c = 0, u = e, G.n = r, a; } }; function d(r, n) { for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) { var o, i = p[t], d = G.p, l = i[2]; r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0)); } if (o || r > 1) return a; throw y = !0, n; } return function (o, p, l) { if (f > 1) throw TypeError(\"Generator is already running\"); for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) { i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u); try { if (f = 2, i) { if (c || (o = \"next\"), t = i[o]) { if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\"); if (!t.done) return t; u = t.value, c < 2 && (c = 0); } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1); i = e; } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break; } catch (t) { i = e, c = 1, u = t; } finally { f = 1; } } return { value: t, done: y }; }; }(r, o, i), !0), u; } var a = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} t = Object.getPrototypeOf; var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () { return this; }), t), u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c); function f(e) { return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () { return this; }), _regeneratorDefine2(u, \"toString\", function () { return \"[object Generator]\"; }), (_regenerator = function _regenerator() { return { w: i, m: f }; })(); }\nfunction _regeneratorDefine2(e, r, n, t) { var i = Object.defineProperty; try { i({}, \"\", {}); } catch (e) { i = 0; } _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) { function o(r, n) { _regeneratorDefine2(e, r, function (e) { return this._invoke(r, n, e); }); } r ? i ? i(e, r, { value: n, enumerable: !t, configurable: !t, writable: !t }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2)); }, _regeneratorDefine2(e, r, n, t); }\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }\nfunction _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n); } _next(void 0); }); }; }\nvar _require = require('util'),\n  promisify = _require.promisify;\nvar crypto = require('crypto');\nvar jwt = require('jsonwebtoken');\nvar User = require('../models/userModel');\nvar catchAsync = require('../utils/catchAsync');\nvar appError = require('../utils/appError');\nvar Email = require('../utils/email');\nvar signToken = function signToken(id) {\n  return jwt.sign({\n    id: id\n  }, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRES_IN\n  });\n};\nvar createSendToken = function createSendToken(user, statusCode, res) {\n  var token = signToken(user._id);\n  var isProduction = process.env.NODE_ENV === 'production';\n  var cookieOptions = {\n    expires: new Date(Date.now() + process.env.JWT_COOKIE_EXPIRES_IN * 24 * 60 * 60 * 1000),\n    httpOnly: true,\n    secure: isProduction,\n    sameSite: isProduction ? 'none' : 'lax'\n  };\n  res.cookie('jwt', token, cookieOptions);\n\n  // Remove password from output\n  user.password = undefined;\n  res.status(statusCode).json({\n    status: 'success',\n    token: token,\n    data: {\n      user: user\n    }\n  });\n};\nexports.signup = catchAsync(/*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(req, res, next) {\n    var newUser, url;\n    return _regenerator().w(function (_context) {\n      while (1) switch (_context.n) {\n        case 0:\n          _context.n = 1;\n          return User.create({\n            name: req.body.name,\n            email: req.body.email,\n            role: req.body.role || 'user',\n            password: req.body.password,\n            photo: req.body.photo || 'default.jpg',\n            passwordConfirm: req.body.passwordConfirm\n          });\n        case 1:\n          newUser = _context.v;\n          url = \"\".concat(req.protocol, \"://\").concat(req.get('host'), \"/me\");\n          console.log(url);\n          _context.n = 2;\n          return new Email(newUser, url).sendWelcome();\n        case 2:\n          createSendToken(newUser, 201, res);\n        case 3:\n          return _context.a(2);\n      }\n    }, _callee);\n  }));\n  return function (_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}());\nexports.login = catchAsync(/*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(req, res, next) {\n    var _req$body, email, password, user, _t;\n    return _regenerator().w(function (_context2) {\n      while (1) switch (_context2.n) {\n        case 0:\n          _req$body = req.body, email = _req$body.email, password = _req$body.password; // 1) Check if email & password exists\n          if (!(!email || !password)) {\n            _context2.n = 1;\n            break;\n          }\n          return _context2.a(2, next(new appError('Please provide email and password!', 400)));\n        case 1:\n          _context2.n = 2;\n          return User.findOne({\n            email: email\n          }).select('+password');\n        case 2:\n          user = _context2.v;\n          _t = !user;\n          if (_t) {\n            _context2.n = 4;\n            break;\n          }\n          _context2.n = 3;\n          return user.correctPassword(password, user.password);\n        case 3:\n          _t = !_context2.v;\n        case 4:\n          if (!_t) {\n            _context2.n = 5;\n            break;\n          }\n          return _context2.a(2, next(new appError('Incorrect email or password', 401)));\n        case 5:\n          // 3) If everything is OK, send token back to a client\n          createSendToken(user, 200, res);\n        case 6:\n          return _context2.a(2);\n      }\n    }, _callee2);\n  }));\n  return function (_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}());\nexports.protect = catchAsync(/*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(req, res, next) {\n    var token, decoded, currentUser;\n    return _regenerator().w(function (_context3) {\n      while (1) switch (_context3.n) {\n        case 0:\n          // 1) Getting token & check if it exists\n\n          if (\n          // headers name MUST be Authorization and value MUST start with Bearer\n          req.headers.authorization && req.headers.authorization.startsWith('Bearer')) {\n            token = req.headers.authorization.split(' ')[1];\n          } else if (req.cookies.jwt) {\n            token = req.cookies.jwt;\n          }\n          if (token) {\n            _context3.n = 1;\n            break;\n          }\n          return _context3.a(2, next(new appError('You are not logged in! Please log in to get access', 401)));\n        case 1:\n          _context3.n = 2;\n          return promisify(jwt.verify)(token, process.env.JWT_SECRET);\n        case 2:\n          decoded = _context3.v;\n          _context3.n = 3;\n          return User.findById(decoded.id);\n        case 3:\n          currentUser = _context3.v;\n          if (currentUser) {\n            _context3.n = 4;\n            break;\n          }\n          return _context3.a(2, next(new appError('The user this token belonged to does no longer exist.', 401)));\n        case 4:\n          if (!currentUser.changedPasswordAfter(decoded.iat)) {\n            _context3.n = 5;\n            break;\n          }\n          return _context3.a(2, next(new appError('User recently changed password. Please log in again!', 401)));\n        case 5:\n          // Grant access to protected route\n          req.user = currentUser;\n          next();\n        case 6:\n          return _context3.a(2);\n      }\n    }, _callee3);\n  }));\n  return function (_x7, _x8, _x9) {\n    return _ref3.apply(this, arguments);\n  };\n}());\nexports.restrictTo = function () {\n  for (var _len = arguments.length, roles = new Array(_len), _key = 0; _key < _len; _key++) {\n    roles[_key] = arguments[_key];\n  }\n  return function (req, res, next) {\n    // roles is an array (closure)\n    // Since protect middleware runs first, we have access to req.user.role\n    console.log(req.user.role);\n    if (!roles.includes(req.user.role)) {\n      return next(new appError('You do not have permission to perform this action', 403));\n    }\n    next();\n  };\n};\n\n// I NEED TO GO THROUGH HOW EXACTLY THIS TRAPPING THINGY WORKS! MAILTRAP.IO\n\nexports.forgotPassword = catchAsync(/*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(req, res, next) {\n    var user, resetToken, resetURL, _t2;\n    return _regenerator().w(function (_context4) {\n      while (1) switch (_context4.p = _context4.n) {\n        case 0:\n          _context4.n = 1;\n          return User.findOne({\n            email: req.body.email\n          });\n        case 1:\n          user = _context4.v;\n          if (user) {\n            _context4.n = 2;\n            break;\n          }\n          return _context4.a(2, next(new appError('There is no user with that email address.', 404)));\n        case 2:\n          // 2) Generate the random reset\n          resetToken = user.createPasswordResetToken();\n          console.log(resetToken);\n          _context4.n = 3;\n          return user.save({\n            validateBeforeSave: false\n          });\n        case 3:\n          _context4.p = 3;\n          resetURL = \"\".concat(req.protocol, \"://\").concat(req.get('host'), \"/api/v1/users/resetPassword/\").concat(resetToken);\n          _context4.n = 4;\n          return new Email(user, resetURL).sendPasswordReset();\n        case 4:\n          _context4.n = 5;\n          return res.status(200).json({\n            status: 'success',\n            message: 'Token sent to email!'\n          });\n        case 5:\n          _context4.n = 8;\n          break;\n        case 6:\n          _context4.p = 6;\n          _t2 = _context4.v;\n          user.passwordResetToken = undefined;\n          user.passwordResetExpires = undefined;\n          _context4.n = 7;\n          return user.save({\n            validateBeforeSave: false\n          });\n        case 7:\n          return _context4.a(2, next(new appError('There was an error sending the email. Try again later', 500)));\n        case 8:\n          return _context4.a(2);\n      }\n    }, _callee4, null, [[3, 6]]);\n  }));\n  return function (_x0, _x1, _x10) {\n    return _ref4.apply(this, arguments);\n  };\n}());\nexports.resetPassword = catchAsync(/*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5(req, res, next) {\n    var hashedToken, user;\n    return _regenerator().w(function (_context5) {\n      while (1) switch (_context5.n) {\n        case 0:\n          // 1) Get user based on the token\n          hashedToken = crypto.createHash('sha256').update(req.params.token).digest('hex');\n          _context5.n = 1;\n          return User.findOne({\n            passwordResetToken: hashedToken,\n            passwordResetExpires: {\n              $gt: Date.now()\n            }\n          });\n        case 1:\n          user = _context5.v;\n          if (user) {\n            _context5.n = 2;\n            break;\n          }\n          return _context5.a(2, next(new appError('Token is invalid or has expired', 400)));\n        case 2:\n          // Saving is NEEDED, because this only modifies the document\n          user.password = req.body.password;\n          user.passwordConfirm = req.body.passwordConfirm;\n          user.passwordResetToken = undefined;\n          user.passwordResetExpires = undefined;\n          _context5.n = 3;\n          return user.save();\n        case 3:\n          // 3) Update changedPasswordAt property for the user\n          // 4) Log the user in, send JWT to a client\n          createSendToken(user, 200, res);\n        case 4:\n          return _context5.a(2);\n      }\n    }, _callee5);\n  }));\n  return function (_x11, _x12, _x13) {\n    return _ref5.apply(this, arguments);\n  };\n}());\n\n// MY SOLUTION\n\n/*\nexports.updatePassword = catchAsync(async (req, res, next) => {\n  // 1) Get user from the collection\n  const user = await User.findOne({ email: req.body.email }).select(\n    '+password',\n  ); // password won't show so we select it manually;\n\n  // 2) Check if POSTed current password is correct\n  if (\n    !user ||\n    !(await user.correctPassword(req.body.currentPassword, user.password))\n  ) {\n    return next(new appError('Your current password is wrong', 401));\n  }\n\n  // I NEEDED TO SAVE IT so I won't have to encrypt AGAIN like this\n  // 3) Update the password\n  user.password = await bcrypt.hash(req.body.currentPassword, 12);\n  console.log(user);\n\n  // 4) Log user in, send JWT\n  const token = signToken(user._id);\n\n  res.status(200).json({\n    status: 'success',\n    token,\n  });\n});\n*/\n\nexports.updatePassword = catchAsync(/*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee6(req, res, next) {\n    var user;\n    return _regenerator().w(function (_context6) {\n      while (1) switch (_context6.n) {\n        case 0:\n          _context6.n = 1;\n          return User.findById(req.user.id).select('+password');\n        case 1:\n          user = _context6.v;\n          _context6.n = 2;\n          return user.correctPassword(req.body.passwordCurrent, user.password);\n        case 2:\n          if (_context6.v) {\n            _context6.n = 3;\n            break;\n          }\n          return _context6.a(2, next(new appError('Your current password is wrong', 401)));\n        case 3:\n          user.password = req.body.password;\n          user.passwordConfirm = req.body.passwordConfirm;\n          _context6.n = 4;\n          return user.save();\n        case 4:\n          createSendToken(user, 200, res);\n        case 5:\n          return _context6.a(2);\n      }\n    }, _callee6);\n  }));\n  return function (_x14, _x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}());\nexports.logout = catchAsync(/*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee7(req, res, next) {\n    return _regenerator().w(function (_context7) {\n      while (1) switch (_context7.n) {\n        case 0:\n          // Clear the JWT cookie by setting it to expire immediately\n          res.cookie('jwt', 'loggedout', {\n            expires: new Date(Date.now() + 10 * 1000),\n            // Expires in 10 seconds\n            httpOnly: true\n          });\n          res.status(200).json({\n            status: 'success'\n          });\n        case 1:\n          return _context7.a(2);\n      }\n    }, _callee7);\n  }));\n  return function (_x17, _x18, _x19) {\n    return _ref7.apply(this, arguments);\n  };\n}());\nexports.getMe = catchAsync(/*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee8(req, res, next) {\n    var user;\n    return _regenerator().w(function (_context8) {\n      while (1) switch (_context8.n) {\n        case 0:\n          _context8.n = 1;\n          return User.findById(req.user.id);\n        case 1:\n          user = _context8.v;\n          if (user) {\n            _context8.n = 2;\n            break;\n          }\n          return _context8.a(2, next(new appError('User not found', 404)));\n        case 2:\n          res.status(200).json({\n            status: 'success',\n            data: {\n              user: user\n            }\n          });\n        case 3:\n          return _context8.a(2);\n      }\n    }, _callee8);\n  }));\n  return function (_x20, _x21, _x22) {\n    return _ref8.apply(this, arguments);\n  };\n}());\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJlIiwidCIsInIiLCJTeW1ib2wiLCJuIiwiaXRlcmF0b3IiLCJvIiwidG9TdHJpbmdUYWciLCJpIiwiYyIsInByb3RvdHlwZSIsIkdlbmVyYXRvciIsInUiLCJPYmplY3QiLCJjcmVhdGUiLCJfcmVnZW5lcmF0b3JEZWZpbmUyIiwiZiIsInAiLCJ5IiwiRyIsInYiLCJhIiwiZCIsImJpbmQiLCJsZW5ndGgiLCJsIiwiVHlwZUVycm9yIiwiY2FsbCIsImRvbmUiLCJ2YWx1ZSIsIkdlbmVyYXRvckZ1bmN0aW9uIiwiR2VuZXJhdG9yRnVuY3Rpb25Qcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInNldFByb3RvdHlwZU9mIiwiX19wcm90b19fIiwiZGlzcGxheU5hbWUiLCJfcmVnZW5lcmF0b3IiLCJ3IiwibSIsImRlZmluZVByb3BlcnR5IiwiX3JlZ2VuZXJhdG9yRGVmaW5lIiwiX2ludm9rZSIsImVudW1lcmFibGUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImFzeW5jR2VuZXJhdG9yU3RlcCIsIlByb21pc2UiLCJyZXNvbHZlIiwidGhlbiIsIl9hc3luY1RvR2VuZXJhdG9yIiwiYXJndW1lbnRzIiwiYXBwbHkiLCJfbmV4dCIsIl90aHJvdyIsIl9yZXF1aXJlIiwicmVxdWlyZSIsInByb21pc2lmeSIsImNyeXB0byIsImp3dCIsIlVzZXIiLCJjYXRjaEFzeW5jIiwiYXBwRXJyb3IiLCJFbWFpbCIsInNpZ25Ub2tlbiIsImlkIiwic2lnbiIsInByb2Nlc3MiLCJlbnYiLCJKV1RfU0VDUkVUIiwiZXhwaXJlc0luIiwiSldUX0VYUElSRVNfSU4iLCJjcmVhdGVTZW5kVG9rZW4iLCJ1c2VyIiwic3RhdHVzQ29kZSIsInJlcyIsInRva2VuIiwiX2lkIiwiaXNQcm9kdWN0aW9uIiwiTk9ERV9FTlYiLCJjb29raWVPcHRpb25zIiwiZXhwaXJlcyIsIkRhdGUiLCJub3ciLCJKV1RfQ09PS0lFX0VYUElSRVNfSU4iLCJodHRwT25seSIsInNlY3VyZSIsInNhbWVTaXRlIiwiY29va2llIiwicGFzc3dvcmQiLCJ1bmRlZmluZWQiLCJzdGF0dXMiLCJqc29uIiwiZGF0YSIsImV4cG9ydHMiLCJzaWdudXAiLCJfcmVmIiwiX2NhbGxlZSIsInJlcSIsIm5leHQiLCJuZXdVc2VyIiwidXJsIiwiX2NvbnRleHQiLCJuYW1lIiwiYm9keSIsImVtYWlsIiwicm9sZSIsInBob3RvIiwicGFzc3dvcmRDb25maXJtIiwiY29uY2F0IiwicHJvdG9jb2wiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwic2VuZFdlbGNvbWUiLCJfeCIsIl94MiIsIl94MyIsImxvZ2luIiwiX3JlZjIiLCJfY2FsbGVlMiIsIl9yZXEkYm9keSIsIl90IiwiX2NvbnRleHQyIiwiZmluZE9uZSIsInNlbGVjdCIsImNvcnJlY3RQYXNzd29yZCIsIl94NCIsIl94NSIsIl94NiIsInByb3RlY3QiLCJfcmVmMyIsIl9jYWxsZWUzIiwiZGVjb2RlZCIsImN1cnJlbnRVc2VyIiwiX2NvbnRleHQzIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzdGFydHNXaXRoIiwic3BsaXQiLCJjb29raWVzIiwidmVyaWZ5IiwiZmluZEJ5SWQiLCJjaGFuZ2VkUGFzc3dvcmRBZnRlciIsImlhdCIsIl94NyIsIl94OCIsIl94OSIsInJlc3RyaWN0VG8iLCJfbGVuIiwicm9sZXMiLCJBcnJheSIsIl9rZXkiLCJpbmNsdWRlcyIsImZvcmdvdFBhc3N3b3JkIiwiX3JlZjQiLCJfY2FsbGVlNCIsInJlc2V0VG9rZW4iLCJyZXNldFVSTCIsIl90MiIsIl9jb250ZXh0NCIsImNyZWF0ZVBhc3N3b3JkUmVzZXRUb2tlbiIsInNhdmUiLCJ2YWxpZGF0ZUJlZm9yZVNhdmUiLCJzZW5kUGFzc3dvcmRSZXNldCIsIm1lc3NhZ2UiLCJwYXNzd29yZFJlc2V0VG9rZW4iLCJwYXNzd29yZFJlc2V0RXhwaXJlcyIsIl94MCIsIl94MSIsIl94MTAiLCJyZXNldFBhc3N3b3JkIiwiX3JlZjUiLCJfY2FsbGVlNSIsImhhc2hlZFRva2VuIiwiX2NvbnRleHQ1IiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsInBhcmFtcyIsImRpZ2VzdCIsIiRndCIsIl94MTEiLCJfeDEyIiwiX3gxMyIsInVwZGF0ZVBhc3N3b3JkIiwiX3JlZjYiLCJfY2FsbGVlNiIsIl9jb250ZXh0NiIsInBhc3N3b3JkQ3VycmVudCIsIl94MTQiLCJfeDE1IiwiX3gxNiIsImxvZ291dCIsIl9yZWY3IiwiX2NhbGxlZTciLCJfY29udGV4dDciLCJfeDE3IiwiX3gxOCIsIl94MTkiLCJnZXRNZSIsIl9yZWY4IiwiX2NhbGxlZTgiLCJfY29udGV4dDgiLCJfeDIwIiwiX3gyMSIsIl94MjIiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9hbmFhcmV2YWR6ZS9Qcm9qZWN0cy9uYXRvdXJzL2JhY2tlbmQvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJhdXRoQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHByb21pc2lmeSB9ID0gcmVxdWlyZSgndXRpbCcpO1xuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5jb25zdCBqd3QgPSByZXF1aXJlKCdqc29ud2VidG9rZW4nKTtcbmNvbnN0IFVzZXIgPSByZXF1aXJlKCcuLi9tb2RlbHMvdXNlck1vZGVsJyk7XG5jb25zdCBjYXRjaEFzeW5jID0gcmVxdWlyZSgnLi4vdXRpbHMvY2F0Y2hBc3luYycpO1xuY29uc3QgYXBwRXJyb3IgPSByZXF1aXJlKCcuLi91dGlscy9hcHBFcnJvcicpO1xuY29uc3QgRW1haWwgPSByZXF1aXJlKCcuLi91dGlscy9lbWFpbCcpO1xuXG5jb25zdCBzaWduVG9rZW4gPSAoaWQpID0+IHtcbiAgcmV0dXJuIGp3dC5zaWduKHsgaWQgfSwgcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCwge1xuICAgIGV4cGlyZXNJbjogcHJvY2Vzcy5lbnYuSldUX0VYUElSRVNfSU4sXG4gIH0pO1xufTtcblxuY29uc3QgY3JlYXRlU2VuZFRva2VuID0gKHVzZXIsIHN0YXR1c0NvZGUsIHJlcykgPT4ge1xuICBjb25zdCB0b2tlbiA9IHNpZ25Ub2tlbih1c2VyLl9pZCk7XG5cbiAgY29uc3QgaXNQcm9kdWN0aW9uID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJztcbiAgY29uc3QgY29va2llT3B0aW9ucyA9IHtcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShcbiAgICAgIERhdGUubm93KCkgKyBwcm9jZXNzLmVudi5KV1RfQ09PS0lFX0VYUElSRVNfSU4gKiAyNCAqIDYwICogNjAgKiAxMDAwLFxuICAgICksXG4gICAgaHR0cE9ubHk6IHRydWUsXG4gICAgc2VjdXJlOiBpc1Byb2R1Y3Rpb24sXG4gICAgc2FtZVNpdGU6IGlzUHJvZHVjdGlvbiA/ICdub25lJyA6ICdsYXgnLFxuICB9O1xuXG4gIHJlcy5jb29raWUoJ2p3dCcsIHRva2VuLCBjb29raWVPcHRpb25zKTtcblxuICAvLyBSZW1vdmUgcGFzc3dvcmQgZnJvbSBvdXRwdXRcbiAgdXNlci5wYXNzd29yZCA9IHVuZGVmaW5lZDtcblxuICByZXMuc3RhdHVzKHN0YXR1c0NvZGUpLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIHRva2VuLFxuICAgIGRhdGE6IHtcbiAgICAgIHVzZXIsXG4gICAgfSxcbiAgfSk7XG59O1xuXG5leHBvcnRzLnNpZ251cCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IG5ld1VzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZSh7XG4gICAgbmFtZTogcmVxLmJvZHkubmFtZSxcbiAgICBlbWFpbDogcmVxLmJvZHkuZW1haWwsXG4gICAgcm9sZTogcmVxLmJvZHkucm9sZSB8fCAndXNlcicsXG4gICAgcGFzc3dvcmQ6IHJlcS5ib2R5LnBhc3N3b3JkLFxuICAgIHBob3RvOiByZXEuYm9keS5waG90byB8fCAnZGVmYXVsdC5qcGcnLFxuICAgIHBhc3N3b3JkQ29uZmlybTogcmVxLmJvZHkucGFzc3dvcmRDb25maXJtLFxuICB9KTtcbiAgY29uc3QgdXJsID0gYCR7cmVxLnByb3RvY29sfTovLyR7cmVxLmdldCgnaG9zdCcpfS9tZWA7XG4gIGNvbnNvbGUubG9nKHVybCk7XG5cbiAgYXdhaXQgbmV3IEVtYWlsKG5ld1VzZXIsIHVybCkuc2VuZFdlbGNvbWUoKTtcblxuICBjcmVhdGVTZW5kVG9rZW4obmV3VXNlciwgMjAxLCByZXMpO1xufSk7XG5cbmV4cG9ydHMubG9naW4gPSBjYXRjaEFzeW5jKGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gcmVxLmJvZHk7XG5cbiAgLy8gMSkgQ2hlY2sgaWYgZW1haWwgJiBwYXNzd29yZCBleGlzdHNcbiAgaWYgKCFlbWFpbCB8fCAhcGFzc3dvcmQpIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1BsZWFzZSBwcm92aWRlIGVtYWlsIGFuZCBwYXNzd29yZCEnLCA0MDApKTtcbiAgfVxuXG4gIC8vIDIpIENoZWNrIGlmIHRoZSB1c2VyIGV4aXN0cyAmIHBhc3N3b3JkIGlzIGNvcnJlY3RcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsIH0pLnNlbGVjdCgnK3Bhc3N3b3JkJyk7IC8vIHBhc3N3b3JkIHdvbid0IHNob3cgc28gd2Ugc2VsZWN0IGl0IG1hbnVhbGx5XG5cbiAgaWYgKCF1c2VyIHx8ICEoYXdhaXQgdXNlci5jb3JyZWN0UGFzc3dvcmQocGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKSkge1xuICAgIHJldHVybiBuZXh0KG5ldyBhcHBFcnJvcignSW5jb3JyZWN0IGVtYWlsIG9yIHBhc3N3b3JkJywgNDAxKSk7XG4gIH1cbiAgLy8gMykgSWYgZXZlcnl0aGluZyBpcyBPSywgc2VuZCB0b2tlbiBiYWNrIHRvIGEgY2xpZW50XG4gIGNyZWF0ZVNlbmRUb2tlbih1c2VyLCAyMDAsIHJlcyk7XG59KTtcblxuZXhwb3J0cy5wcm90ZWN0ID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gMSkgR2V0dGluZyB0b2tlbiAmIGNoZWNrIGlmIGl0IGV4aXN0c1xuICBsZXQgdG9rZW47XG4gIGlmIChcbiAgICAvLyBoZWFkZXJzIG5hbWUgTVVTVCBiZSBBdXRob3JpemF0aW9uIGFuZCB2YWx1ZSBNVVNUIHN0YXJ0IHdpdGggQmVhcmVyXG4gICAgcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbiAmJlxuICAgIHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24uc3RhcnRzV2l0aCgnQmVhcmVyJylcbiAgKSB7XG4gICAgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV07XG4gIH0gZWxzZSBpZiAocmVxLmNvb2tpZXMuand0KSB7XG4gICAgdG9rZW4gPSByZXEuY29va2llcy5qd3Q7XG4gIH1cblxuICBpZiAoIXRva2VuKSB7XG4gICAgcmV0dXJuIG5leHQoXG4gICAgICBuZXcgYXBwRXJyb3IoJ1lvdSBhcmUgbm90IGxvZ2dlZCBpbiEgUGxlYXNlIGxvZyBpbiB0byBnZXQgYWNjZXNzJywgNDAxKSxcbiAgICApO1xuICB9XG5cbiAgLy8gMikgVmVyaWZpY2F0aW9uIHRva2VuIChzaWduaXR1cmUgdmFsaWRhdGlvbi92ZXJpZmljYXRpb24pXG4gIGNvbnN0IGRlY29kZWQgPSBhd2FpdCBwcm9taXNpZnkoand0LnZlcmlmeSkodG9rZW4sIHByb2Nlc3MuZW52LkpXVF9TRUNSRVQpO1xuXG4gIC8vIDMpIENoZWNrIGlmIHVzZXIgc3RpbGwgZXhpc3RzXG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChkZWNvZGVkLmlkKTtcblxuICBpZiAoIWN1cnJlbnRVc2VyKSB7XG4gICAgcmV0dXJuIG5leHQoXG4gICAgICBuZXcgYXBwRXJyb3IoXG4gICAgICAgICdUaGUgdXNlciB0aGlzIHRva2VuIGJlbG9uZ2VkIHRvIGRvZXMgbm8gbG9uZ2VyIGV4aXN0LicsXG4gICAgICAgIDQwMSxcbiAgICAgICksXG4gICAgKTtcbiAgfVxuICAvLyA0KSBDaGVjayBpZiB1c2VyIGNoYW5nZWQgcGFzc3dvcmQgYWZ0ZXIgdG9rZW4gd2FzIGlzc3VlZFxuICBpZiAoY3VycmVudFVzZXIuY2hhbmdlZFBhc3N3b3JkQWZ0ZXIoZGVjb2RlZC5pYXQpKSB7XG4gICAgcmV0dXJuIG5leHQoXG4gICAgICBuZXcgYXBwRXJyb3IoJ1VzZXIgcmVjZW50bHkgY2hhbmdlZCBwYXNzd29yZC4gUGxlYXNlIGxvZyBpbiBhZ2FpbiEnLCA0MDEpLFxuICAgICk7XG4gIH1cblxuICAvLyBHcmFudCBhY2Nlc3MgdG8gcHJvdGVjdGVkIHJvdXRlXG4gIHJlcS51c2VyID0gY3VycmVudFVzZXI7XG4gIG5leHQoKTtcbn0pO1xuXG5leHBvcnRzLnJlc3RyaWN0VG8gPSAoLi4ucm9sZXMpID0+IHtcbiAgcmV0dXJuIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIC8vIHJvbGVzIGlzIGFuIGFycmF5IChjbG9zdXJlKVxuICAgIC8vIFNpbmNlIHByb3RlY3QgbWlkZGxld2FyZSBydW5zIGZpcnN0LCB3ZSBoYXZlIGFjY2VzcyB0byByZXEudXNlci5yb2xlXG4gICAgY29uc29sZS5sb2cocmVxLnVzZXIucm9sZSk7XG5cbiAgICBpZiAoIXJvbGVzLmluY2x1ZGVzKHJlcS51c2VyLnJvbGUpKSB7XG4gICAgICByZXR1cm4gbmV4dChcbiAgICAgICAgbmV3IGFwcEVycm9yKCdZb3UgZG8gbm90IGhhdmUgcGVybWlzc2lvbiB0byBwZXJmb3JtIHRoaXMgYWN0aW9uJywgNDAzKSxcbiAgICAgICk7XG4gICAgfVxuICAgIG5leHQoKTtcbiAgfTtcbn07XG5cbi8vIEkgTkVFRCBUTyBHTyBUSFJPVUdIIEhPVyBFWEFDVExZIFRISVMgVFJBUFBJTkcgVEhJTkdZIFdPUktTISBNQUlMVFJBUC5JT1xuXG5leHBvcnRzLmZvcmdvdFBhc3N3b3JkID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB9KTtcblxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1RoZXJlIGlzIG5vIHVzZXIgd2l0aCB0aGF0IGVtYWlsIGFkZHJlc3MuJywgNDA0KSk7XG4gIH1cbiAgLy8gMikgR2VuZXJhdGUgdGhlIHJhbmRvbSByZXNldFxuICBjb25zdCByZXNldFRva2VuID0gdXNlci5jcmVhdGVQYXNzd29yZFJlc2V0VG9rZW4oKTtcblxuICBjb25zb2xlLmxvZyhyZXNldFRva2VuKTtcblxuICBhd2FpdCB1c2VyLnNhdmUoeyB2YWxpZGF0ZUJlZm9yZVNhdmU6IGZhbHNlIH0pO1xuXG4gIC8vIDMpIFNlbmQgaXQgdG8gdXNlcidzIGVtYWlsXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzZXRVUkwgPSBgJHtyZXEucHJvdG9jb2x9Oi8vJHtyZXEuZ2V0KCdob3N0Jyl9L2FwaS92MS91c2Vycy9yZXNldFBhc3N3b3JkLyR7cmVzZXRUb2tlbn1gO1xuICAgIGF3YWl0IG5ldyBFbWFpbCh1c2VyLCByZXNldFVSTCkuc2VuZFBhc3N3b3JkUmVzZXQoKTtcbiAgICBhd2FpdCByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICAgIG1lc3NhZ2U6ICdUb2tlbiBzZW50IHRvIGVtYWlsIScsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdXNlci5wYXNzd29yZFJlc2V0VG9rZW4gPSB1bmRlZmluZWQ7XG4gICAgdXNlci5wYXNzd29yZFJlc2V0RXhwaXJlcyA9IHVuZGVmaW5lZDtcblxuICAgIGF3YWl0IHVzZXIuc2F2ZSh7IHZhbGlkYXRlQmVmb3JlU2F2ZTogZmFsc2UgfSk7XG5cbiAgICByZXR1cm4gbmV4dChcbiAgICAgIG5ldyBhcHBFcnJvcihcbiAgICAgICAgJ1RoZXJlIHdhcyBhbiBlcnJvciBzZW5kaW5nIHRoZSBlbWFpbC4gVHJ5IGFnYWluIGxhdGVyJyxcbiAgICAgICAgNTAwLFxuICAgICAgKSxcbiAgICApO1xuICB9XG59KTtcblxuZXhwb3J0cy5yZXNldFBhc3N3b3JkID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gMSkgR2V0IHVzZXIgYmFzZWQgb24gdGhlIHRva2VuXG4gIGNvbnN0IGhhc2hlZFRva2VuID0gY3J5cHRvXG4gICAgLmNyZWF0ZUhhc2goJ3NoYTI1NicpXG4gICAgLnVwZGF0ZShyZXEucGFyYW1zLnRva2VuKVxuICAgIC5kaWdlc3QoJ2hleCcpO1xuXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRPbmUoe1xuICAgIHBhc3N3b3JkUmVzZXRUb2tlbjogaGFzaGVkVG9rZW4sXG4gICAgcGFzc3dvcmRSZXNldEV4cGlyZXM6IHsgJGd0OiBEYXRlLm5vdygpIH0sXG4gIH0pO1xuXG4gIC8vIDIpIElmIHRva2VuIGhhcyBub3QgZXhwaXJlZCBhbmQgdGhlcmUgaXMgYSB1c2VyLCBzZXQgdGhlIG5ldyBwYXNzd29yZFxuICBpZiAoIXVzZXIpIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1Rva2VuIGlzIGludmFsaWQgb3IgaGFzIGV4cGlyZWQnLCA0MDApKTtcbiAgfVxuXG4gIC8vIFNhdmluZyBpcyBORUVERUQsIGJlY2F1c2UgdGhpcyBvbmx5IG1vZGlmaWVzIHRoZSBkb2N1bWVudFxuICB1c2VyLnBhc3N3b3JkID0gcmVxLmJvZHkucGFzc3dvcmQ7XG4gIHVzZXIucGFzc3dvcmRDb25maXJtID0gcmVxLmJvZHkucGFzc3dvcmRDb25maXJtO1xuICB1c2VyLnBhc3N3b3JkUmVzZXRUb2tlbiA9IHVuZGVmaW5lZDtcbiAgdXNlci5wYXNzd29yZFJlc2V0RXhwaXJlcyA9IHVuZGVmaW5lZDtcblxuICBhd2FpdCB1c2VyLnNhdmUoKTtcblxuICAvLyAzKSBVcGRhdGUgY2hhbmdlZFBhc3N3b3JkQXQgcHJvcGVydHkgZm9yIHRoZSB1c2VyXG4gIC8vIDQpIExvZyB0aGUgdXNlciBpbiwgc2VuZCBKV1QgdG8gYSBjbGllbnRcbiAgY3JlYXRlU2VuZFRva2VuKHVzZXIsIDIwMCwgcmVzKTtcbn0pO1xuXG4vLyBNWSBTT0xVVElPTlxuXG4vKlxuZXhwb3J0cy51cGRhdGVQYXNzd29yZCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIDEpIEdldCB1c2VyIGZyb20gdGhlIGNvbGxlY3Rpb25cbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZE9uZSh7IGVtYWlsOiByZXEuYm9keS5lbWFpbCB9KS5zZWxlY3QoXG4gICAgJytwYXNzd29yZCcsXG4gICk7IC8vIHBhc3N3b3JkIHdvbid0IHNob3cgc28gd2Ugc2VsZWN0IGl0IG1hbnVhbGx5O1xuXG4gIC8vIDIpIENoZWNrIGlmIFBPU1RlZCBjdXJyZW50IHBhc3N3b3JkIGlzIGNvcnJlY3RcbiAgaWYgKFxuICAgICF1c2VyIHx8XG4gICAgIShhd2FpdCB1c2VyLmNvcnJlY3RQYXNzd29yZChyZXEuYm9keS5jdXJyZW50UGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpKVxuICApIHtcbiAgICByZXR1cm4gbmV4dChuZXcgYXBwRXJyb3IoJ1lvdXIgY3VycmVudCBwYXNzd29yZCBpcyB3cm9uZycsIDQwMSkpO1xuICB9XG5cbiAgLy8gSSBORUVERUQgVE8gU0FWRSBJVCBzbyBJIHdvbid0IGhhdmUgdG8gZW5jcnlwdCBBR0FJTiBsaWtlIHRoaXNcbiAgLy8gMykgVXBkYXRlIHRoZSBwYXNzd29yZFxuICB1c2VyLnBhc3N3b3JkID0gYXdhaXQgYmNyeXB0Lmhhc2gocmVxLmJvZHkuY3VycmVudFBhc3N3b3JkLCAxMik7XG4gIGNvbnNvbGUubG9nKHVzZXIpO1xuXG4gIC8vIDQpIExvZyB1c2VyIGluLCBzZW5kIEpXVFxuICBjb25zdCB0b2tlbiA9IHNpZ25Ub2tlbih1c2VyLl9pZCk7XG5cbiAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgIHRva2VuLFxuICB9KTtcbn0pO1xuKi9cblxuZXhwb3J0cy51cGRhdGVQYXNzd29yZCA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHJlcS51c2VyLmlkKS5zZWxlY3QoJytwYXNzd29yZCcpO1xuXG4gIGlmICghKGF3YWl0IHVzZXIuY29ycmVjdFBhc3N3b3JkKHJlcS5ib2R5LnBhc3N3b3JkQ3VycmVudCwgdXNlci5wYXNzd29yZCkpKSB7XG4gICAgcmV0dXJuIG5leHQobmV3IGFwcEVycm9yKCdZb3VyIGN1cnJlbnQgcGFzc3dvcmQgaXMgd3JvbmcnLCA0MDEpKTtcbiAgfVxuXG4gIHVzZXIucGFzc3dvcmQgPSByZXEuYm9keS5wYXNzd29yZDtcbiAgdXNlci5wYXNzd29yZENvbmZpcm0gPSByZXEuYm9keS5wYXNzd29yZENvbmZpcm07XG4gIGF3YWl0IHVzZXIuc2F2ZSgpO1xuICBjcmVhdGVTZW5kVG9rZW4odXNlciwgMjAwLCByZXMpO1xufSk7XG5cbmV4cG9ydHMubG9nb3V0ID0gY2F0Y2hBc3luYyhhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgLy8gQ2xlYXIgdGhlIEpXVCBjb29raWUgYnkgc2V0dGluZyBpdCB0byBleHBpcmUgaW1tZWRpYXRlbHlcbiAgcmVzLmNvb2tpZSgnand0JywgJ2xvZ2dlZG91dCcsIHtcbiAgICBleHBpcmVzOiBuZXcgRGF0ZShEYXRlLm5vdygpICsgMTAgKiAxMDAwKSwgLy8gRXhwaXJlcyBpbiAxMCBzZWNvbmRzXG4gICAgaHR0cE9ubHk6IHRydWUsXG4gIH0pO1xuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgfSk7XG59KTtcblxuZXhwb3J0cy5nZXRNZSA9IGNhdGNoQXN5bmMoYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIC8vIFRoZSBwcm90ZWN0IG1pZGRsZXdhcmUgc2V0cyByZXEudXNlciwgc28gd2UganVzdCByZXR1cm4gaXRcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQocmVxLnVzZXIuaWQpO1xuXG4gIGlmICghdXNlcikge1xuICAgIHJldHVybiBuZXh0KG5ldyBhcHBFcnJvcignVXNlciBub3QgZm91bmQnLCA0MDQpKTtcbiAgfVxuXG4gIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyxcbiAgICBkYXRhOiB7XG4gICAgICB1c2VyLFxuICAgIH0sXG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7OzBCQUNBLHVLQUFBQSxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSx3QkFBQUMsTUFBQSxHQUFBQSxNQUFBLE9BQUFDLENBQUEsR0FBQUYsQ0FBQSxDQUFBRyxRQUFBLGtCQUFBQyxDQUFBLEdBQUFKLENBQUEsQ0FBQUssV0FBQSw4QkFBQUMsRUFBQU4sQ0FBQSxFQUFBRSxDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBQyxDQUFBLEdBQUFMLENBQUEsSUFBQUEsQ0FBQSxDQUFBTSxTQUFBLFlBQUFDLFNBQUEsR0FBQVAsQ0FBQSxHQUFBTyxTQUFBLEVBQUFDLENBQUEsR0FBQUMsTUFBQSxDQUFBQyxNQUFBLENBQUFMLENBQUEsQ0FBQUMsU0FBQSxVQUFBSyxtQkFBQSxDQUFBSCxDQUFBLHVCQUFBVixDQUFBLEVBQUFFLENBQUEsRUFBQUUsQ0FBQSxRQUFBRSxDQUFBLEVBQUFDLENBQUEsRUFBQUcsQ0FBQSxFQUFBSSxDQUFBLE1BQUFDLENBQUEsR0FBQVgsQ0FBQSxRQUFBWSxDQUFBLE9BQUFDLENBQUEsS0FBQUYsQ0FBQSxLQUFBYixDQUFBLEtBQUFnQixDQUFBLEVBQUFwQixDQUFBLEVBQUFxQixDQUFBLEVBQUFDLENBQUEsRUFBQU4sQ0FBQSxFQUFBTSxDQUFBLENBQUFDLElBQUEsQ0FBQXZCLENBQUEsTUFBQXNCLENBQUEsV0FBQUEsRUFBQXJCLENBQUEsRUFBQUMsQ0FBQSxXQUFBTSxDQUFBLEdBQUFQLENBQUEsRUFBQVEsQ0FBQSxNQUFBRyxDQUFBLEdBQUFaLENBQUEs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","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","_require","require","promisify","crypto","jwt","User","catchAsync","appError","Email","signToken","id","sign","process","env","JWT_SECRET","expiresIn","JWT_EXPIRES_IN","createSendToken","user","statusCode","res","token","_id","isProduction","NODE_ENV","cookieOptions","expires","Date","now","JWT_COOKIE_EXPIRES_IN","httpOnly","secure","sameSite","cookie","password","undefined","status","json","data","exports","signup","_ref","_callee","req","next","newUser","url","_context","name","body","email","role","photo","passwordConfirm","concat","protocol","get","console","log","sendWelcome","_x","_x2","_x3","login","_ref2","_callee2","_req$body","_t","_context2","findOne","select","correctPassword","_x4","_x5","_x6","protect","_ref3","_callee3","decoded","currentUser","_context3","headers","authorization","startsWith","split","cookies","verify","findById","changedPasswordAfter","iat","_x7","_x8","_x9","restrictTo","_len","roles","Array","_key","includes","forgotPassword","_ref4","_callee4","resetToken","resetURL","_t2","_context4","createPasswordResetToken","save","validateBeforeSave","sendPasswordReset","message","passwordResetToken","passwordResetExpires","_x0","_x1","_x10","resetPassword","_ref5","_callee5","hashedToken","_context5","createHash","update","params","digest","$gt","_x11","_x12","_x13","updatePassword","_ref6","_callee6","_context6","passwordCurrent","_x14","_x15","_x16","logout","_ref7","_callee7","_context7","_x17","_x18","_x19","getMe","_ref8","_callee8","_context8","_x20","_x21","_x22"],"sourceRoot":"/Users/anaarevadze/Projects/natours/backend/controllers/","sources":["authController.js"],"sourcesContent":["const { promisify } = require('util');\nconst crypto = require('crypto');\nconst jwt = require('jsonwebtoken');\nconst User = require('../models/userModel');\nconst catchAsync = require('../utils/catchAsync');\nconst appError = require('../utils/appError');\nconst Email = require('../utils/email');\n\nconst signToken = (id) => {\n  return jwt.sign({ id }, process.env.JWT_SECRET, {\n    expiresIn: process.env.JWT_EXPIRES_IN,\n  });\n};\n\nconst createSendToken = (user, statusCode, res) => {\n  const token = signToken(user._id);\n\n  const isProduction = process.env.NODE_ENV === 'production';\n  const cookieOptions = {\n    expires: new Date(\n      Date.now() + process.env.JWT_COOKIE_EXPIRES_IN * 24 * 60 * 60 * 1000,\n    ),\n    httpOnly: true,\n    secure: isProduction,\n    sameSite: isProduction ? 'none' : 'lax',\n  };\n\n  res.cookie('jwt', token, cookieOptions);\n\n  // Remove password from output\n  user.password = undefined;\n\n  res.status(statusCode).json({\n    status: 'success',\n    token,\n    data: {\n      user,\n    },\n  });\n};\n\nexports.signup = catchAsync(async (req, res, next) => {\n  const newUser = await User.create({\n    name: req.body.name,\n    email: req.body.email,\n    role: req.body.role || 'user',\n    password: req.body.password,\n    photo: req.body.photo || 'default.jpg',\n    passwordConfirm: req.body.passwordConfirm,\n  });\n  const url = `${req.protocol}://${req.get('host')}/me`;\n  console.log(url);\n\n  await new Email(newUser, url).sendWelcome();\n\n  createSendToken(newUser, 201, res);\n});\n\nexports.login = catchAsync(async (req, res, next) => {\n  const { email, password } = req.body;\n\n  // 1) Check if email & password exists\n  if (!email || !password) {\n    return next(new appError('Please provide email and password!', 400));\n  }\n\n  // 2) Check if the user exists & password is correct\n  const user = await User.findOne({ email }).select('+password'); // password won't show so we select it manually\n\n  if (!user || !(await user.correctPassword(password, user.password))) {\n    return next(new appError('Incorrect email or password', 401));\n  }\n  // 3) If everything is OK, send token back to a client\n  createSendToken(user, 200, res);\n});\n\nexports.protect = catchAsync(async (req, res, next) => {\n  // 1) Getting token & check if it exists\n  let token;\n  if (\n    // headers name MUST be Authorization and value MUST start with Bearer\n    req.headers.authorization &&\n    req.headers.authorization.startsWith('Bearer')\n  ) {\n    token = req.headers.authorization.split(' ')[1];\n  } else if (req.cookies.jwt) {\n    token = req.cookies.jwt;\n  }\n\n  if (!token) {\n    return next(\n      new appError('You are not logged in! Please log in to get access', 401),\n    );\n  }\n\n  // 2) Verification token (signiture validation/verification)\n  const decoded = await promisify(jwt.verify)(token, process.env.JWT_SECRET);\n\n  // 3) Check if user still exists\n  const currentUser = await User.findById(decoded.id);\n\n  if (!currentUser) {\n    return next(\n      new appError(\n        'The user this token belonged to does no longer exist.',\n        401,\n      ),\n    );\n  }\n  // 4) Check if user changed password after token was issued\n  if (currentUser.changedPasswordAfter(decoded.iat)) {\n    return next(\n      new appError('User recently changed password. Please log in again!', 401),\n    );\n  }\n\n  // Grant access to protected route\n  req.user = currentUser;\n  next();\n});\n\nexports.restrictTo = (...roles) => {\n  return (req, res, next) => {\n    // roles is an array (closure)\n    // Since protect middleware runs first, we have access to req.user.role\n    console.log(req.user.role);\n\n    if (!roles.includes(req.user.role)) {\n      return next(\n        new appError('You do not have permission to perform this action', 403),\n      );\n    }\n    next();\n  };\n};\n\n// I NEED TO GO THROUGH HOW EXACTLY THIS TRAPPING THINGY WORKS! MAILTRAP.IO\n\nexports.forgotPassword = catchAsync(async (req, res, next) => {\n  const user = await User.findOne({ email: req.body.email });\n\n  if (!user) {\n    return next(new appError('There is no user with that email address.', 404));\n  }\n  // 2) Generate the random reset\n  const resetToken = user.createPasswordResetToken();\n\n  console.log(resetToken);\n\n  await user.save({ validateBeforeSave: false });\n\n  // 3) Send it to user's email\n  try {\n    const resetURL = `${req.protocol}://${req.get('host')}/api/v1/users/resetPassword/${resetToken}`;\n    await new Email(user, resetURL).sendPasswordReset();\n    await res.status(200).json({\n      status: 'success',\n      message: 'Token sent to email!',\n    });\n  } catch (error) {\n    user.passwordResetToken = undefined;\n    user.passwordResetExpires = undefined;\n\n    await user.save({ validateBeforeSave: false });\n\n    return next(\n      new appError(\n        'There was an error sending the email. Try again later',\n        500,\n      ),\n    );\n  }\n});\n\nexports.resetPassword = catchAsync(async (req, res, next) => {\n  // 1) Get user based on the token\n  const hashedToken = crypto\n    .createHash('sha256')\n    .update(req.params.token)\n    .digest('hex');\n\n  const user = await User.findOne({\n    passwordResetToken: hashedToken,\n    passwordResetExpires: { $gt: Date.now() },\n  });\n\n  // 2) If token has not expired and there is a user, set the new password\n  if (!user) {\n    return next(new appError('Token is invalid or has expired', 400));\n  }\n\n  // Saving is NEEDED, because this only modifies the document\n  user.password = req.body.password;\n  user.passwordConfirm = req.body.passwordConfirm;\n  user.passwordResetToken = undefined;\n  user.passwordResetExpires = undefined;\n\n  await user.save();\n\n  // 3) Update changedPasswordAt property for the user\n  // 4) Log the user in, send JWT to a client\n  createSendToken(user, 200, res);\n});\n\n// MY SOLUTION\n\n/*\nexports.updatePassword = catchAsync(async (req, res, next) => {\n  // 1) Get user from the collection\n  const user = await User.findOne({ email: req.body.email }).select(\n    '+password',\n  ); // password won't show so we select it manually;\n\n  // 2) Check if POSTed current password is correct\n  if (\n    !user ||\n    !(await user.correctPassword(req.body.currentPassword, user.password))\n  ) {\n    return next(new appError('Your current password is wrong', 401));\n  }\n\n  // I NEEDED TO SAVE IT so I won't have to encrypt AGAIN like this\n  // 3) Update the password\n  user.password = await bcrypt.hash(req.body.currentPassword, 12);\n  console.log(user);\n\n  // 4) Log user in, send JWT\n  const token = signToken(user._id);\n\n  res.status(200).json({\n    status: 'success',\n    token,\n  });\n});\n*/\n\nexports.updatePassword = catchAsync(async (req, res, next) => {\n  const user = await User.findById(req.user.id).select('+password');\n\n  if (!(await user.correctPassword(req.body.passwordCurrent, user.password))) {\n    return next(new appError('Your current password is wrong', 401));\n  }\n\n  user.password = req.body.password;\n  user.passwordConfirm = req.body.passwordConfirm;\n  await user.save();\n  createSendToken(user, 200, res);\n});\n\nexports.logout = catchAsync(async (req, res, next) => {\n  // Clear the JWT cookie by setting it to expire immediately\n  res.cookie('jwt', 'loggedout', {\n    expires: new Date(Date.now() + 10 * 1000), // Expires in 10 seconds\n    httpOnly: true,\n  });\n\n  res.status(200).json({\n    status: 'success',\n  });\n});\n\nexports.getMe = catchAsync(async (req, res, next) => {\n  // The protect middleware sets req.user, so we just return it\n  const user = await User.findById(req.user.id);\n\n  if (!user) {\n    return next(new appError('User not found', 404));\n  }\n\n  res.status(200).json({\n    status: 'success',\n    data: {\n      user,\n    },\n  });\n});\n"],"mappings":"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","ignoreList":[]}},"mtime":1765352670505}}